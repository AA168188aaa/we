var WEGAME=function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?e(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e,t){return e(t={exports:{}},t.exports),t.exports}var a=i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.clientVersion=t.getClientVersion=t.pageHost=t.isWeGameX=t.isMainland=t.isOversea=t.isProduction=t.isPreRelease=t.isTest=t.isDevelopment=t.isTgpIndependent=t.isWeGameIndependent=t.isTgpCross=t.isWeGameCross=t.isTgpFrame=t.isWeGameFrame=t.isTgpMainTop=t.isWeGameMainTop=t.isTgpMain=t.isWeGameMain=t.isTgp=t.isInClient=t.isWeGame=t.isWeGameMac=t.isServer=t.isBrowser=void 0,t.isBrowser="undefined"!=typeof window&&"undefined"!=typeof document,t.isServer=!t.isBrowser&&void 0!==o;var n=function(e){try{return e()}catch(e){return!1}};t.isWeGameMac=t.isBrowser&&n((function(){return/wegame-mac/.test(navigator.userAgent)})),t.isWeGame=t.isBrowser&&window.external&&"function"==typeof window.external.callcpp&&n((function(){return window.top.location.href,!0})),t.isInClient=t.isWeGame||t.isWeGameMac,t.isTgp=t.isWeGame,t.isWeGameMain=t.isWeGame&&n((function(){return void 0!==window.top.TGP.status})),t.isTgpMain=t.isWeGameMain,t.isWeGameMainTop=t.isWeGameMain&&n((function(){return window.top===window.parent&&window.top!==window})),t.isTgpMainTop=t.isWeGameMainTop,t.isWeGameFrame=t.isWeGameMain&&n((function(){return window.top===window})),t.isTgpFrame=t.isWeGameFrame,t.isWeGameCross=t.isWeGame&&n((function(){return/clienttype=cross/.test(window.location.href)})),t.isTgpCross=t.isWeGameCross,t.isWeGameIndependent=t.isWeGame&&!t.isWeGameMain&&!t.isWeGameCross,t.isTgpIndependent=t.isWeGameIndependent;var r=function(){try{return"production"}catch(e){return"production"}}();function i(e){if(!t.isBrowser&&!e)return null;var n=(e||window.navigator.userAgent).match(/(^| )WeGame(-mac)?\/([^/\s]*)( |$)/i);if(!n||!n[3])return null;var o=n[2];return{type:o=o?o.split("-")[1]:"",version:n[3],versionAsNumber:n[3].split(".").reduce((function(e,t,n){return e|Number(t)<<24-8*n}),0)}}t.isDevelopment="development"===r,t.isTest="test"===r,t.isPreRelease="pre-release"===r||"prerelease"===r,t.isProduction=!t.isDevelopment&&!t.isTest&&!t.isPreRelease,t.isOversea=!1,t.isMainland=!t.isOversea,t.isWeGameX=t.isOversea,t.pageHost=t.isBrowser?window.location.host:window.__WEGAME_WEB_SDK_INJECTIONS__.WEGAME_PAGE_HOST,t.getClientVersion=i,t.clientVersion=(i()||{}).versionAsNumber||0})),s=r(a),c=a.clientVersion,u=a.getClientVersion,l=a.pageHost,f=a.isWeGameX,p=a.isMainland,d=a.isOversea,m=a.isProduction,g=a.isPreRelease,h=a.isTest,v=a.isDevelopment,y=a.isTgpIndependent,w=a.isWeGameIndependent,b=a.isTgpCross,_=a.isWeGameCross,O=a.isTgpFrame,E=a.isWeGameFrame,S=a.isTgpMainTop,R=a.isWeGameMainTop,P=a.isTgpMain,x=a.isWeGameMain,T=a.isTgp,j=a.isInClient,C=a.isWeGame,L=a.isWeGameMac,k=a.isServer,q=a.isBrowser,I=Object.freeze({__proto__:null,default:s,__moduleExports:a,clientVersion:c,getClientVersion:u,pageHost:l,isWeGameX:f,isMainland:p,isOversea:d,isProduction:m,isPreRelease:g,isTest:h,isDevelopment:v,isTgpIndependent:y,isWeGameIndependent:w,isTgpCross:b,isWeGameCross:_,isTgpFrame:O,isWeGameFrame:E,isTgpMainTop:S,isWeGameMainTop:R,isTgpMain:P,isWeGameMain:x,isTgp:T,isInClient:j,isWeGame:C,isWeGameMac:L,isServer:k,isBrowser:q}),N=i((function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var o in n)t[o]=n[o]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(o){function r(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=o.write?o.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(o.read||o)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(r[u]=c,e===u)break}catch(e){}}return e?r[e]:r}}return r.set=i,r.get=function(e){return a(e,!1)},r.getJSON=function(e){return a(e,!0)},r.remove=function(t,n){i(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))},e.exports=n()})),A=Object.prototype.hasOwnProperty,D=Array.isArray,M=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),B=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(n[o]=e[o]);return n},U={arrayToObject:B,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var r=t[o],i=r.obj[r.prop],a=Object.keys(i),s=0;s<a.length;++s){var c=a[s],u=i[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:i,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(D(n)){for(var o=[],r=0;r<n.length;++r)void 0!==n[r]&&o.push(n[r]);t.obj[t.prop]=o}}}(t),e},decode:function(e,t,n){var o=e.replace(/\+/g," ");if("iso-8859-1"===n)return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch(e){return o}},encode:function(e,t,n){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var r="",i=0;i<o.length;++i){var a=o.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=o.charAt(i):a<128?r+=M[a]:a<2048?r+=M[192|a>>6]+M[128|63&a]:a<55296||a>=57344?r+=M[224|a>>12]+M[128|a>>6&63]+M[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&o.charCodeAt(i)),r+=M[240|a>>18]+M[128|a>>12&63]+M[128|a>>6&63]+M[128|63&a])}return r},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,o){if(!n)return t;if("object"!=typeof n){if(D(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(o&&(o.plainObjects||o.allowPrototypes)||!A.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var r=t;return D(t)&&!D(n)&&(r=B(t,o)),D(t)&&D(n)?(n.forEach((function(n,r){if(A.call(t,r)){var i=t[r];i&&"object"==typeof i&&n&&"object"==typeof n?t[r]=e(i,n,o):t.push(n)}else t[r]=n})),t):Object.keys(n).reduce((function(t,r){var i=n[r];return A.call(t,r)?t[r]=e(t[r],i,o):t[r]=i,t}),r)}},G=String.prototype.replace,F=/%20/g,W={RFC1738:"RFC1738",RFC3986:"RFC3986"},H=U.assign({default:W.RFC3986,formatters:{RFC1738:function(e){return G.call(e,F,"+")},RFC3986:function(e){return String(e)}}},W),$=Object.prototype.hasOwnProperty,J={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},V=Array.isArray,Q=Array.prototype.push,z=function(e,t){Q.apply(e,V(t)?t:[t])},X=Date.prototype.toISOString,K=H.default,Y={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:U.encode,encodeValuesOnly:!1,format:K,formatter:H.formatters[K],indices:!1,serializeDate:function(e){return X.call(e)},skipNulls:!1,strictNullHandling:!1},Z=function e(t,n,o,r,i,a,s,c,u,l,f,p,d){var m,g=t;if("function"==typeof s?g=s(n,g):g instanceof Date?g=l(g):"comma"===o&&V(g)&&(g=g.join(",")),null===g){if(r)return a&&!p?a(n,Y.encoder,d,"key"):n;g=""}if("string"==typeof(m=g)||"number"==typeof m||"boolean"==typeof m||"symbol"==typeof m||"bigint"==typeof m||U.isBuffer(g))return a?[f(p?n:a(n,Y.encoder,d,"key"))+"="+f(a(g,Y.encoder,d,"value"))]:[f(n)+"="+f(String(g))];var h,v=[];if(void 0===g)return v;if(V(s))h=s;else{var y=Object.keys(g);h=c?y.sort(c):y}for(var w=0;w<h.length;++w){var b=h[w];i&&null===g[b]||(V(g)?z(v,e(g[b],"function"==typeof o?o(n,b):n,o,r,i,a,s,c,u,l,f,p,d)):z(v,e(g[b],n+(u?"."+b:"["+b+"]"),o,r,i,a,s,c,u,l,f,p,d)))}return v},ee=Object.prototype.hasOwnProperty,te=Array.isArray,ne={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:U.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},oe=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},re=function(e,t,n){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,r=/(\[[^[\]]*])/g,i=n.depth>0&&/(\[[^[\]]*])/.exec(o),a=i?o.slice(0,i.index):o,s=[];if(a){if(!n.plainObjects&&ee.call(Object.prototype,a)&&!n.allowPrototypes)return;s.push(a)}for(var c=0;n.depth>0&&null!==(i=r.exec(o))&&c<n.depth;){if(c+=1,!n.plainObjects&&ee.call(Object.prototype,i[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+o.slice(i.index)+"]"),function(e,t,n){for(var o=t,r=e.length-1;r>=0;--r){var i,a=e[r];if("[]"===a&&n.parseArrays)i=[].concat(o);else{i=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(s,10);n.parseArrays||""!==s?!isNaN(c)&&a!==s&&String(c)===s&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(i=[])[c]=o:i[s]=o:i={0:o}}o=i}return o}(s,t,n)}},ie={formats:H,parse:function(e,t){var n=function(e){if(!e)return ne;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?ne.charset:e.charset;return{allowDots:void 0===e.allowDots?ne.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:ne.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:ne.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:ne.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:ne.comma,decoder:"function"==typeof e.decoder?e.decoder:ne.decoder,delimiter:"string"==typeof e.delimiter||U.isRegExp(e.delimiter)?e.delimiter:ne.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:ne.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:ne.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:ne.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:ne.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:ne.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var o="string"==typeof e?function(e,t){var n,o={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=r.split(t.delimiter,i),s=-1,c=t.charset;if(t.charsetSentinel)for(n=0;n<a.length;++n)0===a[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===a[n]?c="utf-8":"utf8=%26%2310003%3B"===a[n]&&(c="iso-8859-1"),s=n,n=a.length);for(n=0;n<a.length;++n)if(n!==s){var u,l,f=a[n],p=f.indexOf("]="),d=-1===p?f.indexOf("="):p+1;-1===d?(u=t.decoder(f,ne.decoder,c,"key"),l=t.strictNullHandling?null:""):(u=t.decoder(f.slice(0,d),ne.decoder,c,"key"),l=t.decoder(f.slice(d+1),ne.decoder,c,"value")),l&&t.interpretNumericEntities&&"iso-8859-1"===c&&(l=oe(l)),l&&"string"==typeof l&&t.comma&&l.indexOf(",")>-1&&(l=l.split(",")),f.indexOf("[]=")>-1&&(l=te(l)?[l]:l),ee.call(o,u)?o[u]=U.combine(o[u],l):o[u]=l}return o}(e,n):e,r=n.plainObjects?Object.create(null):{},i=Object.keys(o),a=0;a<i.length;++a){var s=i[a],c=re(s,o[s],n);r=U.merge(r,c,n)}return U.compact(r)},stringify:function(e,t){var n,o=e,r=function(e){if(!e)return Y;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||Y.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=H.default;if(void 0!==e.format){if(!$.call(H.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var o=H.formatters[n],r=Y.filter;return("function"==typeof e.filter||V(e.filter))&&(r=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:Y.addQueryPrefix,allowDots:void 0===e.allowDots?Y.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Y.charsetSentinel,delimiter:void 0===e.delimiter?Y.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:Y.encode,encoder:"function"==typeof e.encoder?e.encoder:Y.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:Y.encodeValuesOnly,filter:r,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:Y.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:Y.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Y.strictNullHandling}}(t);"function"==typeof r.filter?o=(0,r.filter)("",o):V(r.filter)&&(n=r.filter);var i,a=[];if("object"!=typeof o||null===o)return"";i=t&&t.arrayFormat in J?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var s=J[i];n||(n=Object.keys(o)),r.sort&&n.sort(r.sort);for(var c=0;c<n.length;++c){var u=n[c];r.skipNulls&&null===o[u]||z(a,Z(o[u],u,s,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.formatter,r.encodeValuesOnly,r.charset))}var l=a.join(r.delimiter),f=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),l.length>0?f+l:""}};function ae(e){return{all:e=e||new Map,on:function(t,n){var o=e.get(t);o?o.push(n):e.set(t,[n])},off:function(t,n){var o=e.get(t);o&&(n?o.splice(o.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var o=e.get(t);o&&o.slice().map((function(e){e(n)})),(o=e.get("*"))&&o.slice().map((function(e){e(t,n)}))}}}var se=Object.freeze({__proto__:null,default:ae}),ce=i((function(e,t){e.exports=function(){var e=function(){},t={},n={},o={};function r(e,t){if(e){var r=o[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function i(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function a(t,n,o,r){var i,s,c=document,u=o.async,l=(o.numRetries||0)+1,f=o.before||e,p=t.replace(/[\?|#].*$/,""),d=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(p)?((s=c.createElement("link")).rel="stylesheet",s.href=d,(i="hideFocus"in s)&&s.relList&&(i=0,s.rel="preload",s.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p)?(s=c.createElement("img")).src=d:((s=c.createElement("script")).src=t,s.async=void 0===u||u),s.onload=s.onerror=s.onbeforeload=function(e){var c=e.type[0];if(i)try{s.sheet.cssText.length||(c="e")}catch(e){18!=e.code&&(c="e")}if("e"==c){if((r+=1)<l)return a(t,n,o,r)}else if("preload"==s.rel&&"style"==s.as)return s.rel="stylesheet";n(t,c,e.defaultPrevented)},!1!==f(t,s)&&c.head.appendChild(s)}function s(e,n,o){var s,c;if(n&&n.trim&&(s=n),c=(s?o:n)||{},s){if(s in t)throw"LoadJS";t[s]=!0}function u(t,n){!function(e,t,n){var o,r,i=(e=e.push?e:[e]).length,s=i,c=[];for(o=function(e,n,o){if("e"==n&&c.push(e),"b"==n){if(!o)return;c.push(e)}--i||t(c)},r=0;r<s;r++)a(e[r],o,n)}(e,(function(e){i(c,e),t&&i({success:t,error:n},e),r(s,e)}),c)}if(c.returnPromise)return new Promise(u);u()}return s.ready=function(e,t){return function(e,t){e=e.push?e:[e];var r,i,a,s=[],c=e.length,u=c;for(r=function(e,n){n.length&&s.push(e),--u||t(s)};c--;)i=e[c],(a=n[i])?r(i,a):(o[i]=o[i]||[]).push(r)}(e,(function(e){i(t,e)})),s},s.done=function(e){r(e,[])},s.reset=function(){t={},n={},o={}},s.isDefined=function(e){return e in t},s}()})),ue={cookie:N,url:ie,loadjs:ce,mitt:ae},le=function(e,t){return function(){for(var n=new Array(arguments.length),o=0;o<n.length;o++)n[o]=arguments[o];return e.apply(t,n)}},fe=Object.prototype.toString;function pe(e){return"[object Array]"===fe.call(e)}function de(e){return void 0===e}function me(e){return null!==e&&"object"==typeof e}function ge(e){return"[object Function]"===fe.call(e)}function he(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),pe(e))for(var n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}var ve={isArray:pe,isArrayBuffer:function(e){return"[object ArrayBuffer]"===fe.call(e)},isBuffer:function(e){return null!==e&&!de(e)&&null!==e.constructor&&!de(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:me,isUndefined:de,isDate:function(e){return"[object Date]"===fe.call(e)},isFile:function(e){return"[object File]"===fe.call(e)},isBlob:function(e){return"[object Blob]"===fe.call(e)},isFunction:ge,isStream:function(e){return me(e)&&ge(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:he,merge:function e(){var t={};function n(n,o){"object"==typeof t[o]&&"object"==typeof n?t[o]=e(t[o],n):t[o]=n}for(var o=0,r=arguments.length;o<r;o++)he(arguments[o],n);return t},deepMerge:function e(){var t={};function n(n,o){"object"==typeof t[o]&&"object"==typeof n?t[o]=e(t[o],n):t[o]="object"==typeof n?e({},n):n}for(var o=0,r=arguments.length;o<r;o++)he(arguments[o],n);return t},extend:function(e,t,n){return he(t,(function(t,o){e[o]=n&&"function"==typeof t?le(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}};function ye(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var we=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(ve.isURLSearchParams(t))o=t.toString();else{var r=[];ve.forEach(t,(function(e,t){null!=e&&(ve.isArray(e)?t+="[]":e=[e],ve.forEach(e,(function(e){ve.isDate(e)?e=e.toISOString():ve.isObject(e)&&(e=JSON.stringify(e)),r.push(ye(t)+"="+ye(e))})))})),o=r.join("&")}if(o){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e};function be(){this.handlers=[]}be.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},be.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},be.prototype.forEach=function(e){ve.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var _e=be,Oe=function(e,t,n){return ve.forEach(n,(function(n){e=n(e,t)})),e},Ee=function(e){return!(!e||!e.__CANCEL__)},Se=function(e,t){ve.forEach(e,(function(n,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[o])}))},Re=function(e,t,n,o,r){return function(e,t,n,o,r){return e.config=t,n&&(e.code=n),e.request=o,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,n,o,r)},Pe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],xe=ve.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(e){var o=e;return t&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(t){var n=ve.isString(t)?o(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Te=ve.isStandardBrowserEnv()?{write:function(e,t,n,o,r,i){var a=[];a.push(e+"="+encodeURIComponent(t)),ve.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),ve.isString(o)&&a.push("path="+o),ve.isString(r)&&a.push("domain="+r),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},je=function(e){return new Promise((function(t,n){var o=e.data,r=e.headers;ve.isFormData(o)&&delete r["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var a=e.auth.username||"",s=e.auth.password||"";r.Authorization="Basic "+btoa(a+":"+s)}var c,u,l=(c=e.baseURL,u=e.url,c&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(u)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(c,u):u);if(i.open(e.method.toUpperCase(),we(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var o,r,a,s,c,u="getAllResponseHeaders"in i?(o=i.getAllResponseHeaders(),c={},o?(ve.forEach(o.split("\n"),(function(e){if(s=e.indexOf(":"),r=ve.trim(e.substr(0,s)).toLowerCase(),a=ve.trim(e.substr(s+1)),r){if(c[r]&&Pe.indexOf(r)>=0)return;c[r]="set-cookie"===r?(c[r]?c[r]:[]).concat([a]):c[r]?c[r]+", "+a:a}})),c):c):null,l={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:u,config:e,request:i};!function(e,t,n){var o=n.config.validateStatus;!o||o(n.status)?e(n):t(Re("Request failed with status code "+n.status,n.config,null,n.request,n))}(t,n,l),i=null}},i.onabort=function(){i&&(n(Re("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){n(Re("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(Re(t,e,"ECONNABORTED",i)),i=null},ve.isStandardBrowserEnv()){var f=Te,p=(e.withCredentials||xe(l))&&e.xsrfCookieName?f.read(e.xsrfCookieName):void 0;p&&(r[e.xsrfHeaderName]=p)}if("setRequestHeader"in i&&ve.forEach(r,(function(e,t){void 0===o&&"content-type"===t.toLowerCase()?delete r[t]:i.setRequestHeader(t,e)})),ve.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),n(e),i=null)})),void 0===o&&(o=null),i.send(o)}))},Ce={"Content-Type":"application/x-www-form-urlencoded"};function Le(e,t){!ve.isUndefined(e)&&ve.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var ke,qe={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(ke=je),ke),transformRequest:[function(e,t){return Se(t,"Accept"),Se(t,"Content-Type"),ve.isFormData(e)||ve.isArrayBuffer(e)||ve.isBuffer(e)||ve.isStream(e)||ve.isFile(e)||ve.isBlob(e)?e:ve.isArrayBufferView(e)?e.buffer:ve.isURLSearchParams(e)?(Le(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):ve.isObject(e)?(Le(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};qe.headers={common:{Accept:"application/json, text/plain, */*"}},ve.forEach(["delete","get","head"],(function(e){qe.headers[e]={}})),ve.forEach(["post","put","patch"],(function(e){qe.headers[e]=ve.merge(Ce)}));var Ie=qe;function Ne(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var Ae=function(e){return Ne(e),e.headers=e.headers||{},e.data=Oe(e.data,e.headers,e.transformRequest),e.headers=ve.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),ve.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||Ie.adapter)(e).then((function(t){return Ne(e),t.data=Oe(t.data,t.headers,e.transformResponse),t}),(function(t){return Ee(t)||(Ne(e),t&&t.response&&(t.response.data=Oe(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},De=function(e,t){t=t||{};var n={},o=["url","method","params","data"],r=["headers","auth","proxy"],i=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];ve.forEach(o,(function(e){void 0!==t[e]&&(n[e]=t[e])})),ve.forEach(r,(function(o){ve.isObject(t[o])?n[o]=ve.deepMerge(e[o],t[o]):void 0!==t[o]?n[o]=t[o]:ve.isObject(e[o])?n[o]=ve.deepMerge(e[o]):void 0!==e[o]&&(n[o]=e[o])})),ve.forEach(i,(function(o){void 0!==t[o]?n[o]=t[o]:void 0!==e[o]&&(n[o]=e[o])}));var a=o.concat(r).concat(i),s=Object.keys(t).filter((function(e){return-1===a.indexOf(e)}));return ve.forEach(s,(function(o){void 0!==t[o]?n[o]=t[o]:void 0!==e[o]&&(n[o]=e[o])})),n};function Me(e){this.defaults=e,this.interceptors={request:new _e,response:new _e}}Me.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=De(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[Ae,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},Me.prototype.getUri=function(e){return e=De(this.defaults,e),we(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},ve.forEach(["delete","get","head","options"],(function(e){Me.prototype[e]=function(t,n){return this.request(ve.merge(n||{},{method:e,url:t}))}})),ve.forEach(["post","put","patch"],(function(e){Me.prototype[e]=function(t,n,o){return this.request(ve.merge(o||{},{method:e,url:t,data:n}))}}));var Be=Me;function Ue(e){this.message=e}Ue.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Ue.prototype.__CANCEL__=!0;var Ge=Ue;function Fe(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new Ge(e),t(n.reason))}))}Fe.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Fe.source=function(){var e;return{token:new Fe((function(t){e=t})),cancel:e}};var We=Fe;function He(e){var t=new Be(e),n=le(Be.prototype.request,t);return ve.extend(n,Be.prototype,t),ve.extend(n,t),n}var $e=He(Ie);$e.Axios=Be,$e.create=function(e){return He(De($e.defaults,e))},$e.Cancel=Ge,$e.CancelToken=We,$e.isCancel=Ee,$e.all=function(e){return Promise.all(e)},$e.spread=function(e){return function(t){return e.apply(null,t)}};var Je=$e,Ve=$e;Je.default=Ve;var Qe=Je,ze=i((function(e,t){var n=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=n(Qe);t.default=r.default}));r(ze);var Xe=i((function(e,t){function n(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),t.snakeKeys=t.camelKeys=t.camelToSnake=t.snakeToCamel=void 0;var o=/^_+/g,r=/_+[A-Za-z0-9]/g;function i(e){return((String(e||"").match(o)||[])[0]||"")+String(e||"").replace(o,"").replace(r,(function(e){return e[e.length-1].toUpperCase()}))}t.snakeToCamel=i;var a=/^[A-Z]+/,s=/\.?([A-Z]+)/g;function c(e){return String(e||"").replace(a,(function(e){return e.toLowerCase()})).replace(s,(function(e,t){return"_"+t.toLowerCase()}))}function u(e){return function t(o){return"object"===n(o)?Object.keys(o).reduce((function(n,r){return n[e(r)]=t(o[r]),n}),{}):"array"===n(o)?o.map(t):o}}t.camelToSnake=c,t.camelKeys=u(i),t.snakeKeys=u(c)})),Ke=r(Xe),Ye=(Xe.snakeKeys,Xe.camelKeys,Xe.camelToSnake,Xe.snakeToCamel,i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.convertCookieToHeaders=void 0;t.convertCookieToHeaders=function(e){return e?Object.keys(e).map((function(t){return t+"="+e[t]+";"})).join(" "):""},t.uuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}})));r(Ye);Ye.uuid,Ye.convertCookieToHeaders;var Ze=tt,et=tt;function tt(){}Ze.HttpsAgent=et;var nt=i((function(e,t){var n=o&&o.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),r=o&&o.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=o&&o.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t},a=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(Qe),c=i(Ze),u="undefined"!=typeof window,l={timeout:5e3};if(!u){var f=new c.default({maxSockets:100,maxFreeSockets:10,timeout:6e4,freeSocketTimeout:3e4}),p=new c.HttpsAgent({maxSockets:100,maxFreeSockets:10,timeout:6e4,freeSocketTimeout:3e4});l.httpAgent=f,l.httpsAgent=p}var d=s.default.create(l),m={},g=function(e){var t,n=e.camelCase,o=function(e){var t=e.cacheable,n=e.cacheKey;if(!u)return{cacheable:!1,cacheKey:""};if(t&&!n)throw new Error('"cacheKey" must be provided for cacheable request');return{cacheable:t||!!n,cacheKey:(e.url||"")+"__"+n}}(e),r=o.cacheable,i=o.cacheKey;return e.cookies&&Object.keys(e.cookies).length>0&&(e.headers=e.headers||{},e.headers.Cookie=Ye.convertCookieToHeaders(e.cookies),delete e.cookies),r&&m[i]?t=m[i]:(t=d.request(e),r&&(m[i]=t)),t.then((function(e){var t=e.data;return n?Xe.camelKeys(t):t}))};g.instance=d,t.default=g}));r(nt);var ot=i((function(e,t){var n=o&&o.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(nt),a={method:"post",responseType:"json"},s=function(e){var t=n(n({},a),e);return i.default(t).then((function(e){var t=e.result||{};return t.error_code&&Number(t.error_code)||void 0===t.error_code&&Number(t)?Promise.reject(e):Promise.resolve(e)}))};s.instance=i.default.instance,t.default=s}));r(ot);var rt=i((function(e,t){var n=o&&o.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.feedsUpload=t.imRequest=t.webdRequest=t.feedsRequest=void 0;var i=r(N),a=r(nt),s=r(ze),c={responseType:"json"},u=function(e,t,n){if("get"===e)return{params:t};if(n)return{data:t};var o=new FormData;return Object.keys(t).forEach((function(e){o.append(e,t[e])})),{data:o}},l=function(e){return"get"===e?{}:{headers:{"Content-Type":"multipart/form-data"}}},f=function(e){return(e.type||e.method||"GET").toLowerCase()},p=function(e){return e.timeout?{timeout:e.timeout}:{}};t.feedsRequest=function(e){e.data=e.data||{};var t=f(e),o=e.tourist,r="get"===t&&e.params||e.data,s=e.appType||"wegame_feeds",d=e.url||"/api/forum/lua/"+s+"/"+e.api;if(!e.withoutUid){var m=r.uid||i.default.get("tgp_id");if(!m&&!o)throw new Error("uid or tgpid are required");r.uid=m||0}return a.default(n(n(n(n({url:d,method:t},c),p(e)),u(t,{p:JSON.stringify(Xe.snakeKeys(r))})),l(t))).then((function(e){return e?Xe.camelKeys(e.data||e):Promise.reject(e)}))},t.feedsRequest.instance=a.default.instance;t.webdRequest=function(e){var t=f(e),o=e.url,r=e.api;return a.default(n(n(n(n({url:o||"/api/webd"+r,method:t},c),p(e)),u(t,e.data||e.params||{})),l(t)))},t.webdRequest.instance=a.default.instance;t.imRequest=function(e){var t=f(e),o="GET"===t&&e.params||e.data,r=e.url||"/api/mwg_im/lua/proxy/index/mwg_org_svr/"+e.api;return a.default(n(n(n({url:r,method:t},c),p(e)),u(t,o,!0))).then((function(e){return e&&0!==Number(e.code)?Promise.reject(e):Xe.camelKeys((null==e?void 0:e.data)||e||{})}))},t.imRequest.instance=a.default.instance;t.feedsUpload=function(e){var t=e.file,o=e.bussiness,r=void 0===o?"feeds":o,i=e.app_id,a=e.onprogress,u=void 0===a?function(){}:a,l=e.game_id,f=e.withoutWaterMark,d=void 0===f?1:f,m=e.extra,g=void 0===m?"":m,h=new FormData,v=[Date.now(),r,Ye.uuid()].join("_"),y="/api/wpicupload/platform/snappic/upload.fcg?from="+r+"&without_water_mark="+d;return h.append("filename",v),h.append("img",t),h.append("app_id",String(i)),l&&h.append("game_id",String(l)),g&&h.append("extra",g),s.default(n(n(n({},c),p(e)),{url:y,data:h,headers:{"Content-Type":"multipart/form-data"},onUploadProgress:u})).then((function(e){return e.data?Promise.resolve(e.data):Promise.reject(e)}))}}));r(rt);rt.feedsUpload,rt.imRequest,rt.webdRequest,rt.feedsRequest;var it=i((function(e,t){var n=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.feedsUpload=t.imRequest=t.webdRequest=t.feedsRequest=t.railRequest=t.baseRequest=t.rawRequest=void 0;var r=n(ze);t.rawRequest=r.default;var i=n(nt);t.baseRequest=i.default;var a=n(ot);t.railRequest=a.default,Object.defineProperty(t,"feedsRequest",{enumerable:!0,get:function(){return rt.feedsRequest}}),Object.defineProperty(t,"webdRequest",{enumerable:!0,get:function(){return rt.webdRequest}}),Object.defineProperty(t,"imRequest",{enumerable:!0,get:function(){return rt.imRequest}}),Object.defineProperty(t,"feedsUpload",{enumerable:!0,get:function(){return rt.feedsUpload}})})),at=r(it),st=it.feedsUpload,ct=it.imRequest,ut=it.webdRequest,lt=it.feedsRequest,ft=it.railRequest,pt=it.baseRequest,dt=it.rawRequest,mt=Object.freeze({__proto__:null,default:at,__moduleExports:it,feedsUpload:st,imRequest:ct,webdRequest:ut,feedsRequest:lt,railRequest:ft,baseRequest:pt,rawRequest:dt}),gt=Object.prototype.hasOwnProperty,ht=Array.isArray,vt=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),yt=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(n[o]=e[o]);return n},wt={arrayToObject:yt,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],o=0;o<t.length;++o)for(var r=t[o],i=r.obj[r.prop],a=Object.keys(i),s=0;s<a.length;++s){var c=a[s],u=i[c];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:i,prop:c}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(ht(n)){for(var o=[],r=0;r<n.length;++r)void 0!==n[r]&&o.push(n[r]);t.obj[t.prop]=o}}}(t),e},decode:function(e,t,n){var o=e.replace(/\+/g," ");if("iso-8859-1"===n)return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch(e){return o}},encode:function(e,t,n){if(0===e.length)return e;var o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var r="",i=0;i<o.length;++i){var a=o.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=o.charAt(i):a<128?r+=vt[a]:a<2048?r+=vt[192|a>>6]+vt[128|63&a]:a<55296||a>=57344?r+=vt[224|a>>12]+vt[128|a>>6&63]+vt[128|63&a]:(i+=1,a=65536+((1023&a)<<10|1023&o.charCodeAt(i)),r+=vt[240|a>>18]+vt[128|a>>12&63]+vt[128|a>>6&63]+vt[128|63&a])}return r},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,o){if(!n)return t;if("object"!=typeof n){if(ht(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(o&&(o.plainObjects||o.allowPrototypes)||!gt.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var r=t;return ht(t)&&!ht(n)&&(r=yt(t,o)),ht(t)&&ht(n)?(n.forEach((function(n,r){if(gt.call(t,r)){var i=t[r];i&&"object"==typeof i&&n&&"object"==typeof n?t[r]=e(i,n,o):t.push(n)}else t[r]=n})),t):Object.keys(n).reduce((function(t,r){var i=n[r];return gt.call(t,r)?t[r]=e(t[r],i,o):t[r]=i,t}),r)}},bt=String.prototype.replace,_t=/%20/g,Ot={RFC1738:"RFC1738",RFC3986:"RFC3986"},Et=wt.assign({default:Ot.RFC3986,formatters:{RFC1738:function(e){return bt.call(e,_t,"+")},RFC3986:function(e){return String(e)}}},Ot),St=(Object.prototype.hasOwnProperty,Array.isArray,Array.prototype.push,Date.prototype.toISOString),Rt=Et.default,Pt=(Et.formatters[Rt],Object.prototype.hasOwnProperty),xt=Array.isArray,Tt={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:wt.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},jt=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},Ct=function(e,t,n){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,r=/(\[[^[\]]*])/g,i=n.depth>0&&/(\[[^[\]]*])/.exec(o),a=i?o.slice(0,i.index):o,s=[];if(a){if(!n.plainObjects&&Pt.call(Object.prototype,a)&&!n.allowPrototypes)return;s.push(a)}for(var c=0;n.depth>0&&null!==(i=r.exec(o))&&c<n.depth;){if(c+=1,!n.plainObjects&&Pt.call(Object.prototype,i[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+o.slice(i.index)+"]"),function(e,t,n){for(var o=t,r=e.length-1;r>=0;--r){var i,a=e[r];if("[]"===a&&n.parseArrays)i=[].concat(o);else{i=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(s,10);n.parseArrays||""!==s?!isNaN(c)&&a!==s&&String(c)===s&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(i=[])[c]=o:i[s]=o:i={0:o}}o=i}return o}(s,t,n)}},Lt=function(e,t){var n=function(e){if(!e)return Tt;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?Tt.charset:e.charset;return{allowDots:void 0===e.allowDots?Tt.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:Tt.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:Tt.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:Tt.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:Tt.comma,decoder:"function"==typeof e.decoder?e.decoder:Tt.decoder,delimiter:"string"==typeof e.delimiter||wt.isRegExp(e.delimiter)?e.delimiter:Tt.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:Tt.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:Tt.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:Tt.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:Tt.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:Tt.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var o="string"==typeof e?function(e,t){var n,o={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,i=t.parameterLimit===1/0?void 0:t.parameterLimit,a=r.split(t.delimiter,i),s=-1,c=t.charset;if(t.charsetSentinel)for(n=0;n<a.length;++n)0===a[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===a[n]?c="utf-8":"utf8=%26%2310003%3B"===a[n]&&(c="iso-8859-1"),s=n,n=a.length);for(n=0;n<a.length;++n)if(n!==s){var u,l,f=a[n],p=f.indexOf("]="),d=-1===p?f.indexOf("="):p+1;-1===d?(u=t.decoder(f,Tt.decoder,c,"key"),l=t.strictNullHandling?null:""):(u=t.decoder(f.slice(0,d),Tt.decoder,c,"key"),l=t.decoder(f.slice(d+1),Tt.decoder,c,"value")),l&&t.interpretNumericEntities&&"iso-8859-1"===c&&(l=jt(l)),l&&"string"==typeof l&&t.comma&&l.indexOf(",")>-1&&(l=l.split(",")),f.indexOf("[]=")>-1&&(l=xt(l)?[l]:l),Pt.call(o,u)?o[u]=wt.combine(o[u],l):o[u]=l}return o}(e,n):e,r=n.plainObjects?Object.create(null):{},i=Object.keys(o),a=0;a<i.length;++a){var s=i[a],c=Ct(s,o[s],n);r=wt.merge(r,c,n)}return wt.compact(r)};function kt(){return e=N.get("uin")||N.get("pt2gguin")||N.get("uin_cookie")||"",String(e).replace(/^o0*/g,"")||"";var e}const qt=!!q&&"https:"===location.protocol,It=qt?"https://web1.ied-tqos-s.qq.com:8001":"http://ied-tqosweb.qq.com:8001",Nt=qt?"https://tgp.ied-tqos-s.qq.com:8001":"http://ied-tqos-tgp.qq.com:8001";let At;if(q)try{At=parent.TGP.status}catch(e){}function Dt(){let e=-1,t=0,n="0";At&&At.isNetbar>-1&&(e=At.isNetbar,At.uin&&(t=At.uin,n=At.ver.toString())),t=t||kt()||0,0===Number(t)&&(t=N.get("tgp_id")?1e11+Number(N.get("tgp_id")):0);let o="0",r="0";return n&&(r=n.substr(0,4),o=n.substr(4,4)||"0"),void 0===e&&(window.tqosNetbarFlag=-1),{tqosNetbarFlag:e,uid:t,ver_high:r,ver_low:o}}function Mt(){const e=Date.now().toString();return{timestamp_high:e.substr(0,8),timestemp_low:e.substr(8)}}function Bt(e,t,n,o,r){const{tqosNetbarFlag:i,ver_high:a,ver_low:s,uid:c}=Dt(),{timestamp_high:u,timestemp_low:l}=Mt(),f=[a,s,u,l,e,i,t],p=["","",c,n,o];Ft(r,p,5);const d=`{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":${e},"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":${f.length},"IntList":[${f.join(",")}],"StrNum":${p.length},"StrList":["${p.join('","')}"]}}}]}}}`,m=`${Nt}/?tqos=${encodeURIComponent(d)}`;(new Image).src=m}function Ut(e){return e.replace(/[^\x00-\xff]/g,"***").length}function Gt(e,t,n,o){if(!(n>o))if(Ut(String(e))<128)t.push(e);else{const r=function(e,t){let n="";const o=e.length;if(Ut(e)<=t)return e;for(let r=0,i=0;r<o;r++){const o=e.charAt(r);if(/[\x00-\xff]/.test(o)?i+=1:i+=3,!(i<=t))return n;n+=o}return n}(e=String(e).replace(/\{/g,"｛").replace(/\}/g,"｝"),126);t.push(r),Gt(e=e.slice(r.length,e.length),t,n+=1,o)}}function Ft(e,t,n){e&&("object"==typeof e&&(e=`{${Object.keys(e).map(t=>`'${t}':'${e[t]}'`).join(";")}}`),Gt(e,t,0,n))}function Wt(e,t,n,o,r,i){let a=-1,s=0;At&&At.isNetbar>-1&&(a=At.isNetbar,At.uin&&(s=At.uin)),void 0!==s&&0!==Number(s)||(s=kt()||0),void 0===a&&(window.tqosNetbarFlag=-1);const c=Date.now().toString(),u=[0,0,c.substr(0,4),c.substr(4,4),e,a,t],l=["","",s,n,o],f=r.replace(/"/g,"'").replace(/,/g,";");for(let e=0,t=f.length;e<t/127;e++){const t=f.slice(127*e,127*(e+1));l.push(t)}const p=`{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":${e},"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":${u.length},"IntList":[${u.join(",")}],"StrNum":${l.length},"StrList":["${l.join('","')}"]}}}]}}}`,d=`${1===Number(i)?It:Nt}/?tqos=${encodeURIComponent(p)}`;(new Image).src=d}var Ht=Object.freeze({__proto__:null,PV_REPORT_QOISID:8866,getClientInfo:Dt,getTimestamp:Mt,qosReport:Bt,qosPerformanceReport:function(e,t){const{uid:n,tqosNetbarFlag:o,ver_high:r,ver_low:i}=Dt(),{timestamp_high:a,timestemp_low:s}=Mt(),c=[r,i,a,s,7703,o],u=["","",n,e,"",window.__INITIAL_STATE__?"1":"0"];Object.keys(t).forEach(e=>{Number(e)<25&&(c[Number(e)+5]=t[e],delete t[e])}),Ft(t,u,4);const l=`{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"Flag":1,"QosList":[{"QosID":7703,"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":${c.length},"IntList":[${c.join(",")}],"StrNum":${u.length},"StrList":["${u.join('","')}"]}}}]}}}`,f=`${Nt}/?tqos=${encodeURIComponent(l)}`;(new Image).src=f},qosCgiReport:function(e){const{uid:t,tqosNetbarFlag:n,ver_high:o,ver_low:r}=Dt(),{timestamp_high:i,timestemp_low:a}=Mt(),s=String(e.request_start),c=[o,r,i,a,5099,n,e.http_code,e.error_code,s.substr(0,8),s.substr(8),e.request_time],u=["","",t,e.api_url,e.refer_url,e.error_message],l=`{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"Flag":1,"QosList":[{"QosID":5099,"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":${c.length},"IntList":[${c.join(",")}],"StrNum":${u.length},"StrList":["${u.join('","')}"]}}}]}}}`,f=`${Nt}/?tqos=${encodeURIComponent(l)}`;(new Image).src=f},$qosReportComm:function(e,t){let n=-1,o=0;At&&At.isNetbar>-1&&(n=At.isNetbar,At.uin&&(o=At.uin)),void 0===n&&(window.tqosNetbarFlag=-1);const r=Date.now().toString(),i=[0,0,0,r.substr(0,4),r.substr(4,4),e,n];i.push(t);for(var a=2;a<arguments.length&&"string"!=typeof arguments[a];++a)i.push(arguments[a]);const s=["","",o];for(;a<arguments.length;++a)s.push(arguments[a]);const c=`{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":${e},"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":${i.length},"IntList":[${i.join(",")}],"StrNum":${s.length},"StrList":["${s.join('","')}"]}}}]}}}`,u=`${It}/?tqos=${encodeURIComponent(c)}`,l=new Image;l.src=u},$qosReportCommNew:function(e,t){let n=-1,o=0;At&&At.isNetbar>-1&&(n=At.isNetbar,At.uin&&(o=At.uin)),void 0!==o&&0!==Number(o)||(o=kt()||0),void 0===n&&(window.tqosNetbarFlag=-1);const r=Date.now().toString(),i=[0,0,0,r.substr(0,4),r.substr(4,4),e,n];i.push(t);for(var a=2;a<arguments.length&&"string"!=typeof arguments[a];++a)i.push(arguments[a]);const s=["","",o];for(;a<arguments.length;++a)s.push(arguments[a]);const c=`{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":${e},"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":${i.length},"IntList":[${i.join(",")}],"StrNum":${s.length},"StrList":["${s.join('","')}"]}}}]}}}`,u=`${Nt}/?tqos=${encodeURIComponent(c)}`,l=new Image;l.src=u},$qosReportCommOldEx:function(e,t,n,o,r){Wt(e,t,n,o,r,1)},$qosReportCommNewEx:function(e,t,n,o,r){Wt(e,t,n,o,r,2)}}),$t=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};function Jt(){return N.get("tgp_id")||""}function Vt(e){if(null==e?void 0:e.from)return e.from;let t=Lt(window.location.search,{ignoreQueryPrefix:!0}).from||function(e){if(!e||C||!sessionStorage)return"";const t=document.referrer,n=sessionStorage.getItem("last_referrer"),o=sessionStorage.getItem("custom_json");let r={};if(o)try{const e=JSON.parse(o);e.path&&(e.path===t||e.path===location.href&&!t||t===location.href&&e.path===n)&&(r=e)}catch(e){}return r[e]||""}("from");return t.match(/[^\dA-Za-z.\-_]/)&&(t="unsafe"),C&&!t&&(t="client.wegame"),t}function Qt(e,t){return t&&e&&void 0!==e[t]?`${t}=${e[t]}`:""}function zt(e={}){const{tgameid:t}=e,n=$t(e,["tgameid"]);void 0!==t&&void 0===n.game_id&&(n.game_id=t);const o={};return Object.keys(n).forEach(e=>o[`s_${e}`]=n[e]),o}let Xt;function Kt(e,t=!1){Xt=Xt||document.createElement("a"),Xt.href=e;let n="";if(t){const e=decodeURIComponent(Xt.search).match(/ADTAG=([^&]+)/i);(null==e?void 0:e[1])&&(n=`ADTAG=${e[1]}`)}return Xt.search=n,Xt.hash="",Xt.href}var Yt=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const Zt={appkey:"0WEB0A20294YU9L9",strictMode:!1,onReportBeforeSend:function(e={}){var t,n;const o=Object.assign({},e),r=null===(n=null===(t=e.data)||void 0===t?void 0:t.common)||void 0===n?void 0:n.A102;return r&&(o.data.common.A102=Kt(r,!0)),o}},en={id:"jyMsoCbcSuYHtDaOKe",hostUrl:"https://rumt-zh.com",random:.1,reportApiSpeed:!0,reportAssetSpeed:!0,onBeforeRequest:function(e={}){const t=e.url,n=function(e){if(!e)return e;const t=e.match(/from=([^&]*)/);let n=(null==t?void 0:t[1])||"";return n?(n=decodeURIComponent(n),n=Kt(n),n=encodeURIComponent(n),e.replace(/(from=)([^&]*)/gi,`from=${n}`)):e}(e.url);return Object.assign(Object.assign({},e),{url:n,ourl:t})}},tn={env:"cn",appId:837297941,srcId:15033,eventName:"web_report"},nn={name:"BeaconAction",url:"https://beaconcdn.qq.com/sdk/4.3.4/beacon_web.min.js"},on={name:"TDM",url:"https://game.gtimg.cn/images/js/tdm/tdm.js"};function rn(e,t,n){const o=e,r=n,i=o[r],a=Yt(o,["symbol"==typeof r?r:r+""]),s=t,c=n,u=s[c],l=Yt(s,["symbol"==typeof c?c:c+""]),f={[n](e){try{return[i,u].reduce((e,t)=>"function"==typeof t?t(e):e,e)}catch(t){return e}}};return Object.assign(Object.assign(Object.assign({},a),l),{[n]:f[n]})}function an(e,t){return"undefined"==typeof window?t:e in window?window[e].bind(window):t}const sn=an("requestIdleCallback",(function(e,t){return setTimeout(()=>{const t=Date.now();e({didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-t))})},1)}));an("cancelIdleCallback",(function(e){clearTimeout(e)}));var cn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};let un;let ln;class fn{constructor(e={}){const{beaconOptions:t={},TDMOptions:n={}}=e;this.clientVersion=function(){const e=u();if(!e)return"0";let{type:t="",version:n="0"}=e;return t=t?`${t}-`:"",n=n.split(".").slice(0,3).join("."),`${t}${n}`}(),this.userid=Jt(),this.userQQ=(N.get("puin")||N.get("p_uin")||"").replace(/^o0*/g,""),this.userType=N.get("tgp_user_type")||"",this.channel=function(){let e="";if("undefined"!=typeof sessionStorage&&(e=sessionStorage.getItem("promote_id")||""),!e)try{const{isNetbar:t}=top.TGP.status;t&&(e="netbar")}catch(e){}return e}(),this.beaconOptions=t,this.TDMOptions=n,sn(()=>{this.lazyBeacon()},{timeout:1e3})}lazyBeacon(){return this.beacon||(this.beacon=(un||(un=ce(nn.url,{returnPromise:!0}).then(()=>window[nn.name])),un).then(e=>{const t=rn(Zt,this.beaconOptions,"onReportBeforeSend");return t.openid||(t.openid=this.userid),new e(t)})),this.beacon}lazyTDM(){return this.tdm||(this.tdm=(ln||(ln=ce(on.url,{returnPromise:!0}).then(()=>window[on.name])),ln).then(e=>{const t=Object.assign(Object.assign({userId:this.userid},tn),this.TDMOptions),{srcId:n=0,eventName:o=""}=t,r=cn(t,["srcId","eventName"]);return e.init(r).catch(e=>console.error("TDM init error",e)),{TDM:e,srcId:n,eventName:o}})),this.tdm}setOpenId(e){this.userid=e,this.lazyBeacon().then(t=>t.setOpenId(e))}reportEvent(e,t={},n={}){const{immediate:o=!1,sendBeacon:r=!1,realTimeAnalysis:i=!1}=n,a=Vt(t),s=function(){let e="";try{const t=sessionStorage.getItem("user_path_track");if(t){const n=JSON.parse(t);Array.isArray(n)&&n.length&&(e=t)}}catch(e){}return e}(),c=Object.assign(Object.assign({clientver:this.clientVersion,uid:this.userid,utype:this.userType,uchannel:this.channel,qq:this.userQQ},t),{efrom:a,track:s}),u=e.replace(/\./g,"_");let l=o?"onDirectUserAction":"onUserAction";l=r?"onSendBeacon":l,this.lazyBeacon().then(e=>{e[l](u,c)}),i&&this.lazyTDM().then(({TDM:e,srcId:t,eventName:n})=>{e.reportEvents({events:[{srcId:t,eventName:n,eventInfo:zt(c)}]})})}}var pn=i((function(e,t){e.exports=function(){var e,t;function n(t){this.name="__st"+(1e9*Math.random()>>>0)+e+"__",null!=t&&t.forEach(this.add,this),e+=1}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var o=arguments[1],r=0;r<n;){var i=t[r];if(e.call(o,i,r,t))return i;r+=1}}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),window.WeakSet||(e=Date.now()%1e9,n.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},n.prototype.delete=function(e){return!!e[this.name]&&!(e[this.name]=void 0)},n.prototype.has=function(e){return!!e[this.name]},t=n,Object.defineProperty(window,"WeakSet",{value:function(e){return new t(e)}})),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(o=arguments[n]))for(var o=Object(o),r=Object.keys(Object(o)),i=0,a=r.length;i<a;i++){var s=r[i],c=Object.getOwnPropertyDescriptor(o,s);null!=c&&c.enumerable&&(t[s]=o[s])}return t}});var o=function(e,t){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},r=function(){return(r=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function i(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o}function a(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}}var s,c=["ext1","ext2","ext3","level","trace","tag","seq","code"],u=(f.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},f.prototype.on=function(e,t,n){var o;if(void 0===n&&(n=0),this)return(o=this.eventsList[e])||(this.eventsList[e]=[],o=this.eventsList[e]),-1===this.indexOf(o,t)&&o.push({name:e,type:n||0,callback:t}),this},f.prototype.one=function(e,t){this.on(e,t,1)},f.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch(e){}}return null}},f.prototype.clear=function(){this.eventsList={}},f),l=function(e){if(!e||0===e.length)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach((function(t){n[t]=e.map((function(e){return e[t]}))})),n.count=e.length,A(n)};function f(){var e=this;this.emit=function(t,n){if(e){var o;if(null!=(r=e.eventsList[t])&&r.length)for(var r=r.slice(),i=0;i<r.length;i++){o=r[i];try{var a=o.callback.apply(e,[n]);if(1===o.type&&e.remove(t,o.callback),!1===a)break}catch(t){throw t}}return e}},this.eventsList={}}function p(e,t){return"number"==typeof e||"string"==typeof e?e:t?s.string:s.number}function d(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e}function m(e){return"string"==typeof e&&e.startsWith("//")?"https:"===(null===location||void 0===location?void 0:location.protocol):/^https/.test(e)}function g(e,t,n){var o,r;try{if("function"==typeof(null==t?void 0:t.retCodeHandler))return{code:void 0===(i=(r=t.retCodeHandler(e,null==n?void 0:n.url,null==n?void 0:n.ctx,null==n?void 0:n.payload)||{}).code)?"unknown":i,isErr:r.isErr};"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null==(o=null==t?void 0:t.ret)?void 0:o.join)&&(q=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var i,a=Object.getOwnPropertyNames(e).filter((function(e){return-1!==q.indexOf(e.toLowerCase())}));return a.length?{code:""+(i=e[a[0]]),isErr:0!==i&&"0"!==i}:{code:"unknown",isErr:!1}}catch(e){return{code:"unknown",isErr:!1}}}function h(e,t,n){try{var o="function"==typeof t?t(e,null==n?void 0:n.url)||"":e;return D(o).slice(0,102400)}catch(e){return""}}function v(e,t){var n,o=[],r=e.config;return e.lifeCycle.on("destroy",(function(){o.length=0})),function(i,a){Array.isArray(i)?o=o.concat(i):o.push(i),t&&o.length>=t||e.sendNow&&0<o.length?(o=U(o),a(o.splice(0,o.length)),n&&clearTimeout(n)):(n&&clearTimeout(n),n=setTimeout((function(){n=null,0<(o=U(o)).length&&a(o.splice(0,o.length))}),r.delay))}}function y(e,t){return Array.isArray(e)?t(e.map((function(e){return t=r(r({},e),{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(N).join(" ")}),c.forEach((function(e){t[e]||delete t[e]})),t;var t}))):t([r(r({},e),{msg:"string"==typeof e.msg?e.msg:N(e.msg)})])}function w(e,t){return function(n,o){var i,a,s,u=Array.isArray(n),l=u?n:[n],f=(e.lifeCycle.emit("beforeRequest",n),e.config.beforeRequest);(l="function"==typeof f?l.map((function(e){try{var n=f({logs:e,logType:t});return(null==n?void 0:n.logType)===t&&null!=n&&n.logs?n.logs:!1!==n&&e}catch(n){return e}})).filter((function(e){return!1!==e})):l).length&&(i=l,n=c,!Array.isArray(i)||i.length<=1||(a=[],s=[],!(s="string"==typeof n?[n]:n))||s.length<=0||(s.forEach((function(e){i.forEach((function(t){null!=t&&t[e]&&a.push(e)}))})),0<a.length&&(i=i.map((function(e){var t={};return a.forEach((function(e){t[e]=""})),r(r({},t),e)})))),l=i,o(u?l:l[0]))}}function b(e){return function(t,n){e.lifeCycle.emit("modifyRequest",t);var o=e.config.modifyRequest;if("function"==typeof o)try{var r=o(t);"object"==typeof r&&"url"in r&&(t=r)}catch(t){console.error(t)}n(t)}}function _(e){return function(t,n){null!=(o=e.lifeCycle)&&o.emit("afterRequest",t);var o=(e.config||{}).afterRequest;"function"==typeof o&&!1===o(t)||n(t)}}function O(e){if(e&&e.reduce&&e.length)return 1===e.length?function(t,n){e[0](t,n||H)}:e.reduce((function(e,t){return function(n,o){return void 0===o&&(o=H),e(n,(function(e){return null==t?void 0:t(e,o)}))}}));throw new TypeError("createPipeline need at least one function param")}function E(e,t){Object.getOwnPropertyNames(e).forEach((function(n){"function"==typeof e[n]&&"constructor"!==n&&(t?t[n]="sendPipeline"===n?function(){return function(){}}:function(){}:e[n]=function(){})}))}function S(){return void 0!==window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now}function R(e,t){function n(o){"pagehide"!==o.type&&"hidden"!==document.visibilityState||(e(o),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)}function P(e){return Q.some((function(t){return-1<e.indexOf(t)}))}function x(e){return-1!==Y.indexOf(e)}($=s=s||{})[$.number=-1]="number",$.string="";var T,j,C,L=["application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video"],k=/\.(json|js|css|jpg|jpeg|png|svg|apng|webp|gif|bmp|mp4|mp3|mpeg|wav|webm|ogg|flv|m3u8|ttf|woff2|otf|eot|woff|html|htm|shtml|shtm|)$/gi,q=["ret","retcode","code","errcode"],I=function(){var e=new WeakSet;return function(t,n){if(n instanceof Error)return"Error.message: "+n.message+" \n  Error.stack: "+n.stack;if("object"==typeof n&&null!==n){if(e.has(n))return"[Circular "+(t||"root")+"]";e.add(n)}return n}},N=function(e){if("string"==typeof e)return e;try{return e instanceof Error?(JSON.stringify(e,I(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,I(),4)||"undefined"}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}},A=function(e){if("string"==typeof e)return e;try{return JSON.stringify(e,I())||"undefined"}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}},D=function(e,t){void 0===t&&(t=3);var n,o,r,i="";return Array.isArray(e)?(i+="[",n=e.length,e.forEach((function(e,o){i=(i+="object"==typeof e&&1<t?D(e,t-1):B(e))+(o===n-1?"":",")})),i+="]"):e instanceof Object?(i="{",o=Object.keys(e),r=o.length,o.forEach((function(n,a){"object"==typeof e[n]&&1<t?i+='"'+n+'":'+D(e[n],t-1):i+=M(n,e[n]),i+=a===r-1||a<r-1&&void 0===e[o[a+1]]?"":","})),i+="}"):i+=e,i},M=function(e,t){var n=typeof t,o="";return"string"==n||"object"==n?o+='"'+e+'":"'+t+'"':"function"==typeof t?o+='"'+e+'":"function '+t.name+'"':"symbol"==typeof t?o+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!=n||(o+='"'+e+'": '+t),o},B=function(e){var t=typeof e;return""+("undefined"==t||"symbol"==t||"function"==t?"null":"string"==t||"object"==t?'"'+e+'"':e)},U=(($=T=T||{}).INFO_ALL="-1",$.API_RESPONSE="1",$.INFO="2",$.ERROR="4",$.PROMISE_ERROR="8",$.AJAX_ERROR="16",$.SCRIPT_ERROR="32",$.IMAGE_ERROR="64",$.CSS_ERROR="128",$.CONSOLE_ERROR="256",$.MEDIA_ERROR="512",$.RET_ERROR="1024",$.REPORT="2048",$.PV="4096",$.EVENT="8192",$.PAGE_NOT_FOUND_ERROR="16384",$.WEBSOCKET_ERROR="32768",$.BRIDGE_ERROR="65536",($=j=j||{}).LOG="log",$.SPEED="speed",$.PERFORMANCE="performance",$.OFFLINE="offline",$.WHITE_LIST="whiteList",$.VITALS="vitals",$.PV="pv",$.CUSTOM_PV="customPV",$.EVENT="event",$.CUSTOM="custom",$.SDK_ERROR="sdkError",$.SET_DATA="setData",$.LOAD_PACKAGE="loadPackage",($=C=C||{}).production="production",$.development="development",$.gray="gray",$.pre="pre",$.daily="daily",$.local="local",$.test="test",$.others="others",function(e){return e.filter((function(t,n){return"static"!==t.type||!e.find((function(e,o){return t.url===e.url&&200===t.status&&n<o}))}))}),G=function(e){e.level===T.INFO_ALL&&(e.level=T.INFO)},F=function(e){return(Array.isArray(e)?e:[e]).map((function(e){return Object.getOwnPropertyNames(e).reduce((function(t,n){return"ctx"!==n&&(t[n]=e[n]),t}),{level:T.INFO,msg:""})}))},W=function(e){return function(t){return e.sendPipeline([function(t,n){return n({url:e.config.url||"",data:l(F(t)),method:"post",contentType:"application/json",type:j.LOG,log:t,requestConfig:{timeout:5e3},success:function(){var o=e.config.onReport;"function"==typeof o&&t.forEach((function(e){o(e)})),"function"==typeof n&&n([])}})}],j.LOG)(t)}},H=function(){},$=(Object.defineProperty(te.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.38.53"},enumerable:!1,configurable:!0}),Object.defineProperty(te.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),T},enumerable:!1,configurable:!0}),te.prototype.init=function(e){this.setConfig(e);for(var t=0;t<te.installedPlugins.length;t++)try{te.installedPlugins[t].patch(this)}catch(e){this.sendSDKError(e)}this.lifeCycle.emit("onInited")},te.prototype.setConfig=function(e){Object.assign(this.config,e);var t=(e=this.config).id,n=e.uin,o=e.version,r=e.ext1,i=e.ext2,a=e.ext3,s=e.aid,c=void 0===(u=e.env)?"production":u,u=e.pageUrl;return e=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==s,this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=o||"1.38.53",this.bean.aid=s||"",this.bean.env=function(){switch(c){case C.production:case C.development:case C.gray:case C.pre:case C.daily:case C.local:case C.test:case C.others:return 1;default:return}}()?c:C.others,u&&this.extendBean("from",encodeURIComponent(u.slice(0,2048))),r&&this.extendBean("ext1",encodeURIComponent(r)),i&&this.extendBean("ext2",encodeURIComponent(i)),a&&this.extendBean("ext3",encodeURIComponent(a)),e&&this.lifeCycle.emit("onConfigChange",this.config),this.config},te.use=function(e){-1===te.installedPlugins.indexOf(e)&&e.aegisPlugin&&te.installedPlugins.push(e)},te.unuse=function(e){-1!==(e=te.installedPlugins.indexOf(e))&&te.installedPlugins.splice(e,1)},te.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.INFO,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0]),{level:T.INFO}),this.normalLogPipeline(n)},te.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.INFO_ALL,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0]),{level:T.INFO_ALL}),this.normalLogPipeline(n)},te.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.REPORT,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0])),this.normalLogPipeline(n)},te.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:T.ERROR,msg:e};1===e.length&&e[0].msg&&Object.assign(n,r({},e[0]),{level:T.ERROR}),this.normalLogPipeline(n)},te.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},te.prototype.reportPv=function(e){var t,n=this;e&&(console.warn("reportPv is deprecated, please use reportEvent"),t=""+Object.getOwnPropertyNames(this.bean).filter((function(e){return"id"!==e})).map((function(e){return e+"="+n.bean[e]})).join("&"),this.sendPipeline([function(o,r){r({url:n.config.url+"/"+e+"?"+t,addBean:!1,type:j.CUSTOM_PV})}],j.CUSTOM_PV)(null))},te.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},te.prototype.reportTime=function(e,t){if("object"==typeof e)return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},te.prototype.reportT=function(e){var t=e.name,n=e.duration,o=void 0===(o=e.ext1)?"":o,r=void 0===(r=e.ext2)?"":r,i=void 0===(i=e.ext3)?"":i;if(e=e.from,"string"==typeof t&&"number"==typeof n&&"string"==typeof o&&"string"==typeof r&&"string"==typeof i){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,o,r,i,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},te.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},te.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},te.prototype.submitCustomTime=function(e,t,n,o,r,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:o||this.config.ext2,ext3:r||this.config.ext3,from:i||void 0})},te.prototype.extendBean=function(e,t){this.bean[e]=t},te.prototype.sendPipeline=function(e,t){var n,o=this;return O(i([function(e,t){if("number"!=typeof n.config.random&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||t(e);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,t(e);n.isHidden=!0}},w(n=this,t)],e,[b(this),function(e,t){o.request(e,(function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];o.failRequestCount=0,t({isErr:!1,result:r,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null!=(n=null==e?void 0:e.success)&&n.call.apply(n,i([e],r))}),(function(){for(var n,r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];10<=++o.failRequestCount&&o.destroy(),-1<(""+r[0]).indexOf("403 forbidden")&&o.destroy(),t({isErr:!0,result:r,logType:null==e?void 0:e.type,logs:null==e?void 0:e.log}),null!=(n=null==e?void 0:e.fail)&&n.call.apply(n,i([e],r))}))},_(this)]))},te.prototype.send=function(e,t,n){var o=this;return O([b(this),function(e,r){o.request(e,(function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r({isErr:!1,result:n,logType:e.type,logs:e.log}),null!=t&&t.apply(void 0,n)}),(function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];r({isErr:!0,result:t,logType:e.type,logs:e.log}),null!=n&&n.apply(void 0,t)}))},_(this)])(e)},te.prototype.ready=function(e,t,n){throw new Error('You need to override "ready" method')},te.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},te.prototype.sendSDKError=function(e){var t=this;this.sendPipeline([function(e,n){n({url:t.config.url+"?id=1085&msg[0]="+encodeURIComponent(N(e))+"&level[0]=2&from="+t.config.id+"&count=1&version="+t.config.id+"(1.38.53)",addBean:!1,method:"get",type:j.SDK_ERROR,log:e})}],j.SDK_ERROR)(e)},te.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,o=te.instances.indexOf(this);-1!==o&&te.instances.splice(o,1);for(var r=te.installedPlugins.length-1;0<=r;r--)try{te.installedPlugins[r].unpatch(this)}catch(e){this.sendSDKError(e)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach((function(e){n[e].writable&&(t[e]=null)})),Object.setPrototypeOf(this,null);else{for(var i=this;i.constructor!==Object&&E(i,this),i=Object.getPrototypeOf(i););0===te.instances.length&&(E(o=Object.getPrototypeOf(this).constructor),E(te))}},te.version="1.38.53",te.instances=[],te.logType=T,te.environment=C,te.installedPlugins=[],te),J=(ee.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},ee.prototype.unpatch=function(e){var t=this.instances.indexOf(e);-1!==t&&(this.instances.splice(t,1),0===this.instances.length)&&this.uninstall(e)},ee.prototype.countInstance=function(){return this.instances.length},ee.prototype.uninstall=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.destroy)&&t.apply(this,[e])},ee.prototype.walk=function(e){var t=this;this.instances.forEach((function(n){var o=t.canUse(n);o&&e(n,o)}))},ee.prototype.canUse=function(e){return!(!(e=this.getConfig(e))||"object"!=typeof e)||!!e},ee.prototype.getConfig=function(e){return null==(e=e.config)?void 0:e[this.name]},ee.prototype.exist=function(e){return-1===this.instances.indexOf(e)},ee.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null==(t=null==(t=this.option)?void 0:t.init))||t.call(this.option,this.getConfig(e))},ee.prototype.triggerOnNewAegis=function(e){var t;null!=(t=null==(t=this.option)?void 0:t.onNewAegis)&&t.call(this.option,e,this.getConfig(e))},ee),V=new J({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(e){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),Q=["/collect/offlineAuto","/aegis-sdk","/flog.core.min.js"],z=function(e){var t;return e.payload?(t={},Object.keys(e).forEach((function(n){"payload"!==n&&(t[n]=e[n])})),t):e},X=new J({name:"reportAssetSpeed"}),K=X=new J({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;S()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(e){this.$walk((function(t){t.speedLogPipeline(e)}))},publishMany:function(e,t){for(var n=t.config,o=0,r=e.length;o<r;o++){var i=e[o];-1===this.ASSETS_INITIATOR_TYPE.indexOf(i.initiatorType)||P(i.name)||this.publish(this.generateLog(i,n))}},collectSuccessLog:function(e){var t,n,o=this;"function"==typeof window.PerformanceObserver?(this.publishMany(performance.getEntriesByType(this.collectEntryType),e),(t=new window.PerformanceObserver((function(t){o.publishMany(t.getEntries(),e)}))).observe({entryTypes:[this.collectEntryType]}),e.lifeCycle.on("destroy",(function(){0===X.countInstance()&&t.disconnect()}))):(n=setInterval((function(){var t=performance.getEntriesByType(o.collectEntryType),n=t.slice(o.collectCur);o.collectCur=t.length,o.publishMany(n,e)}),3e3),e.lifeCycle.on("destroy",(function(){0===X.countInstance()&&clearInterval(n)})))},collectFailLog:function(e){function t(e){var t,r;e&&(e=e.target||e.srcElement,!(t=(null==e?void 0:e.src)||(null==e?void 0:e.href))||"string"!=typeof t||-1<window.location.href.indexOf(t)||(e="function"==typeof(null==(e=o.api)?void 0:e.resourceTypeHandler)?null==(e=o.api)?void 0:e.resourceTypeHandler(t):"",r=performance.getEntriesByType(n.collectEntryType).find((function(e){return e.name===t})),P(t))||(r={url:d(t),status:400,duration:Number(((null==r?void 0:r.duration)||0).toFixed(2)),method:"get",type:e||"static",isHttps:m(t),urlQuery:d(t,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},n.publish(r)))}var n=this,o=e.config;window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",(function(){0===X.countInstance()&&window.document.removeEventListener("error",t,!0)}))},generateLog:function(e,t){var n;return t="function"==typeof(null==(n=t.api)?void 0:n.resourceTypeHandler)?null==(n=t.api)?void 0:n.resourceTypeHandler(e.name):"",{url:d(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:t||"static",isHttps:m(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:d(e.name,!0),domainLookup:p(e.domainLookupEnd-e.domainLookupStart),connectTime:p(e.connectEnd-e.connectStart)}},collectNotReportedLog:function(e){var t,n;S()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,"function"!=typeof window.PerformanceObserver)&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0))},destroy:function(){this.option.publish=function(){}}}),Y=window.navigator.userAgent.toLowerCase(),Z={};function ee(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function te(e){var t,n,o,r,i,a,s,c,l,f,p,d,m,g,h,w=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,reportLoadPackageSpeed:!0,hostUrl:"https://aegis.qq.com",env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:"",reportImmediately:!0},this.isWhiteList=!1,this.lifeCycle=new u,this.bean={},this.originFireUrl="",this.normalLogPipeline=O([v(this,5),y,function(e,n){var o=t.config;n(e=e.map((function(e){var t,n=o.maxLength||102400;try{if(!e.msg||e.msg.length<=n)return e;e.msg=null==(t=e.msg)?void 0:t.substring(0,n)}catch(t){e.msg=N(e.msg).substring(0,o.maxLength)}return e})))},(g=(t=this).config,h={},function(e,t){var n="number"==typeof g.repeat?g.repeat:5;if(0===n)return t(e);t(e.filter((function(e){return e.level!==T.ERROR&&e.level!==T.PROMISE_ERROR&&e.level!==T.AJAX_ERROR&&e.level!==T.SCRIPT_ERROR&&e.level!==T.IMAGE_ERROR&&e.level!==T.CSS_ERROR&&e.level!==T.MEDIA_ERROR||(h[e.msg]=h[e.msg]||0,h[e.msg]+=1,!(h[e.msg]>n))})))}),(d=this.lifeCycle.emit,m=this.config,function(e,t){var n,o=m.logCreated;return"function"==typeof o?(n=e.filter((function(e){return!1!==o(e)})),d("beforeWrite",n),t(n)):(d("beforeWrite",e),t(e))}),(p=this,setTimeout((function(){var e=void 0===(t=p.config.pvUrl)?"":t,t="undefined"!=typeof location?(null===location||void 0===location?void 0:location.pathname)+(null===location||void 0===location?void 0:location.hash):void 0;e&&t!==p.originFireUrl&&(p.sendPipeline([function(t,n){n({url:e,type:j.PV})}],j.PV)(null),t)&&location&&(p.originFireUrl=t)}),100),function(e,t){t(e)}),(l=c=s=!1,f=[],(i=this).lifeCycle.on("onConfigChange",(function(){a&&clearTimeout(a),a=setTimeout((function(){var e,t;!l&&i.config&&(l=!0,e=i.config.whiteListUrl,(t=void 0===e?"":e)&&i.sendPipeline([function(e,n){n({url:t,type:j.WHITE_LIST,success:function(e){c=!0;try{var t=e.data||JSON.parse(e),n=t.retcode,o=t.result,r=void 0===o?{}:o,a=(0===n&&(s=r.is_in_white_list,i.isWhiteList=s,0<=r.rate)&&r.rate<=1&&(i.config.random=r.rate,i.isGetSample=!1),i.isWhiteList&&f.length?W(i)(f.splice(0),(function(){})):!i.isWhiteList&&f.length&&(f.length=0),i.config.onWhitelist);"function"==typeof a&&a(s)}catch(e){}},fail:function(){c=!0}})}],j.WHITE_LIST)(null),l=!1)}),i.config.uin?50:500)})),i.lifeCycle.on("destroy",(function(){f.length=0})),function(e,t){var n;s||null!=(n=null==(n=i.config)?void 0:n.api)&&n.reportRequest?t(e.concat(f.splice(0)).map((function(e){return G(e),e}))):(n=e.filter((function(e){return e.level!==T.INFO&&e.level!==T.API_RESPONSE?(G(e),!0):(c||(f.push(e),200<=f.length&&(f.length=200)),!1)}))).length&&t(n)}),function(e,t){try{var n=JSON.parse(JSON.stringify(e)),o=(w.lifeCycle.emit("beforeReport",n),w.config.beforeReport);(e="function"==typeof o?e.filter((function(e){return!1!==o(e)})):e).length&&t(e)}catch(e){}},W(this)]),this.eventPipeline=O([v(this,10),(r=this,function(e){r.sendPipeline([function(e,t){var n=e.map((function(e){return{name:e.name,ext1:e.ext1||r.config.ext1||"",ext2:e.ext2||r.config.ext2||"",ext3:e.ext3||r.config.ext3||""}}));t({url:r.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(n)),type:j.EVENT,log:e})}],j.EVENT)(e)})]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=O([v(this,10),(o=this,function(e){return o.sendPipeline([function(e,t){t({url:o.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:j.CUSTOM,log:e})}],j.CUSTOM)(e)})]),this.config=(n=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),n.url=n.url||e+"/collect",n.offlineUrl=n.offlineUrl||e+"/offline",n.whiteListUrl=n.whiteListUrl||e+"/collect/whitelist",n.pvUrl=n.pvUrl||e+"/collect/pv",n.eventUrl=n.eventUrl||e+"/collect/events",n.speedUrl=n.speedUrl||e+"/speed",n.customTimeUrl=n.customTimeUrl||e+"/speed/custom",n.performanceUrl=n.performanceUrl||e+"/speed/performance",n.webVitalsUrl=n.webVitalsUrl||e+"/speed/webvitals",n.setDataReportUrl=n.SetDataReportUrl||e+"/speed/miniProgramData",n),te.instances.push(this)}function ne(e,t,n){return null!=t&&t.length&&"object"==typeof e?t.reduce((function(t,o){var r=e instanceof Headers?e.get(o):e[o];return r?t+(""===t?"\n":"\n\n")+n+" header "+o+": "+r:t}),""):""}function oe(e){var t,n="";return"object"==typeof e&&(t=(e=function(e,t){for(var n=0;n<t.length;n++){var o=t[n],r=e[o]||"function"==typeof e.get&&e.get(o);if(r)return[o,r]}return["",""]}(e,Object.keys(ge)))[0],e=e[1],t)?ge[t](e):n}Z.macos=function(){return x("mac")},Z.ios=function(){return Z.iphone()||Z.ipod()||Z.ipad()},Z.iphone=function(){return!Z.windows()&&x("iphone")},Z.ipod=function(){return x("ipod")},Z.ipad=function(){var e="MacIntel"===navigator.platform&&1<navigator.maxTouchPoints;return x("ipad")||e},Z.android=function(){return!Z.windows()&&x("android")},Z.androidPhone=function(){return Z.android()&&x("mobile")},Z.androidTablet=function(){return Z.android()&&!x("mobile")},Z.blackberry=function(){return x("blackberry")||x("bb10")},Z.blackberryPhone=function(){return Z.blackberry()&&!x("tablet")},Z.blackberryTablet=function(){return Z.blackberry()&&x("tablet")},Z.windows=function(){return x("windows")},Z.windowsPhone=function(){return Z.windows()&&x("phone")},Z.windowsTablet=function(){return Z.windows()&&x("touch")&&!Z.windowsPhone()},Z.fxos=function(){return(x("(mobile")||x("(tablet"))&&x(" rv:")},Z.fxosPhone=function(){return Z.fxos()&&x("mobile")},Z.fxosTablet=function(){return Z.fxos()&&x("tablet")},Z.meego=function(){return x("meego")},Z.cordova=function(){return window.cordova&&"file:"===location.protocol},Z.nodeWebkit=function(){return"object"==typeof window.process},Z.mobile=function(){return Z.androidPhone()||Z.iphone()||Z.ipod()||Z.windowsPhone()||Z.blackberryPhone()||Z.fxosPhone()||Z.meego()},Z.tablet=function(){return Z.ipad()||Z.androidTablet()||Z.blackberryTablet()||Z.windowsTablet()||Z.fxosTablet()},Z.desktop=function(){return!Z.tablet()&&!Z.mobile()};var re,ie,ae,se,ce,ue,le,fe=!(Z.isIE=function(){return"ActiveXObject"in window}),pe=[],de=!1,me=[],ge={sw8:function(e){return(e=e.split("-")[1])?atob(e):""},traceparent:function(e){return e.split("-")[1]},"sentry-trace":function(e){return e.split("-")[0]}},he=(new J({name:"reportApiSpeed"}),new J({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},getRequestType:function(e,t,n){var o,r;return void 0===t&&(t=""),"fetch"===(e="function"==typeof(null==(r=e.api)?void 0:r.resourceTypeHandler)?null==(r=e.api)?void 0:r.resourceTypeHandler(n):"")&&"static"===e||(o=void 0===t?"":t,r=(void 0===n?"":n).split("?")[0],e=k.test(r)||L.some((function(e){return-1!==String(o).indexOf(e)}))?"static":"fetch"),e},overrideFetch:function(e){var t=this,n={name:this.name,then:function(n,o,r,i){var a,c;e.hostUrl&&-1<r.indexOf(e.hostUrl)||(a=n.headers?n.headers.get("content-type"):"",a=t.getRequestType(e,a,n.url),c={url:n.url,isHttps:m(n.url),method:(null==i?void 0:i.method)||"get",duration:o,type:a,nextHopProtocol:"",status:n.status||0},"fetch"===a?n.clone().text().then((function(a){var s=n.status<=0||400<=n.status,u=(null==(u=e.api)?void 0:u.reqHeaders)||[],l=(u=ne(null==i?void 0:i.headers,u,"req"),(null==(l=e.api)?void 0:l.resHeaders)||[]),f=(l=ne(n.headers,l,"res"),oe(null==i?void 0:i.headers)),p=(d=g(a,e.api,{url:r,ctx:n,payload:null==i?void 0:i.body})).code,d=d.isErr,m=(v=null==(v=e.api)?void 0:v.apiDetail)?h(null==i?void 0:i.body,null==(m=e.api)?void 0:m.reqParamHandler,{url:r}):"",v=v?h(a,null==(v=e.api)?void 0:v.resBodyHandler,{url:r,ctx:n}):"";a=(s?"FETCH_ERROR: "+a+" \n\n":"")+"fetch req url: "+r+" \n                                \nres status: "+(n.status||0)+" \n                                \nres duration: "+o+"ms \n                                \nreq method: "+((null==i?void 0:i.method)||"get")+" \n                                \nres retcode: "+p+"\n                                \nreq param: "+m+"\n                                \nres data: "+v+"\n                                "+u+"\n                                "+l,c.payload=null==i?void 0:i.body,c.ret=p,c.isErr=+d,t.publishNormalLog({msg:a,level:s?T.AJAX_ERROR:d?T.RET_ERROR:T.API_RESPONSE,code:p,trace:f}),t.publishSpeed(c)})):(Object.assign(c,{type:"static",urlQuery:d(n.url,!0),domainLookup:s.number,connectTime:s.number}),t.publishSpeed(c)))},catch:function(n,o,r,i){var a,s,c;if(!(e.hostUrl&&-1<r.indexOf(e.hostUrl)))throw a=t.getRequestType(e,"",r),a={url:r,isHttps:m(r),method:(null==i?void 0:i.method)||"get",duration:o,nextHopProtocol:"",type:a,status:0},t.publishSpeed(a),a=(null==(a=e.api)?void 0:a.reqHeaders)||[],a=ne(null==i?void 0:i.headers,a,"req"),s=oe(null==i?void 0:i.headers),c=null!=(c=e.api)&&c.apiDetail?h(null==i?void 0:i.body,null==(c=e.api)?void 0:c.reqParamHandler,{url:r}):"",r="AJAX_ERROR: "+n+"\n                          \nreq url: "+r+"\n                          \nres status: 0\n                          \nres duration: "+o+"ms\n                          \nreq method: "+((null==i?void 0:i.method)||"get")+"\n                          \nreq param:"+c+"\n                          "+a,t.publishNormalLog({msg:r,level:T.AJAX_ERROR,code:-400,trace:s}),n}},o=(this.hackFetchOptions=n,this.hackFetchOptions);if(me.find((function(e){return e.name===o.name})))throw new Error("name '"+o.name+"' is already in hackFetch option list");me.push(o),!de&&window.fetch&&(de=!0,se=window.fetch,window.fetch=function(e,t){void 0===t&&(t={});for(var n="string"==typeof e?e:e.url,o=0;o<me.length;o++){var r=me[o];try{"function"==typeof r.beforeFetch&&r.beforeFetch(n,t)}catch(e){}}var i=Date.now();return se(e,t).then((function(e){for(var o=0;o<me.length;o++){var r=me[o];try{"function"==typeof r.then&&r.then(e,Date.now()-i,n,t)}catch(e){}}return e})).catch((function(e){for(var o=0;o<me.length;o++){var r=me[o];try{"function"==typeof r.catch&&r.catch(e,Date.now()-i,n,t)}catch(e){}}throw e}))})},overrideXhr:function(e){var t,n=this,o={name:this.name,send:function(t,o){var r=Date.now();t.addEventListener("loadend",(function(){var i=t.aegisUrl||"";if(i&&!(e.hostUrl&&-1<i.indexOf(e.hostUrl))){var a="",c=((t.failType||!t.status||400<=t.status)&&(a=t.failType||"failed"),Date.now()-r),u=t.getResponseHeader("content-type"),l=(u=n.getRequestType(e,u,i),{url:i,isHttps:m(i),status:t.status||0,method:t.aegisMethod||"get",type:u,nextHopProtocol:"",duration:c});if("fetch"===u){u=(null==(u=e.api)?void 0:u.reqHeaders)||[];var f=ne(t.aegisXhrReqHeader,u,"req"),p=(u=(null==(u=e.api)?void 0:u.resHeaders)||[],t.getAllResponseHeaders().split("\r\n").reduce((function(e,t){return(t=t.split(": "))[0]&&t[1]&&(e[t[0]]=t[1]),e}),{})),g=ne(p,u,"res"),v=oe(t.aegisXhrReqHeader),y=(u=null==(p=e.api)?void 0:p.apiDetail)?h(o,null==(p=e.api)?void 0:p.reqParamHandler,{url:i}):"",w=u?h(t.response,null==(p=e.api)?void 0:p.resBodyHandler,{url:i}):"";try{var b,_,O,E,S=t.response,R=e.api,P={url:i,ctx:t,payload:o},x=function(e){var t=e.code,r=(e=e.isErr,(a?"AJAX_ERROR: request "+a+" \n\n":"")+"fetch req url: "+i+" \n                    \nres status: "+l.status+"\n                    \nres duration: "+c+"ms\n                    \nreq method: "+l.method+"\n                    \nres retcode: "+t+"\n                    \nreq param: "+y+"\n                    \nres data: "+w+"\n                    "+f+"\n                    "+g);l.ret=t,l.isErr=+e,l.payload=o,n.publishNormalLog({msg:r,level:a?T.AJAX_ERROR:e?T.RET_ERROR:T.API_RESPONSE,code:t,trace:v}),n.publishSpeed(l)};try{if("function"==typeof(null==R?void 0:R.retCodeHandlerAsync))return void R.retCodeHandlerAsync(S,null==P?void 0:P.url,null==P?void 0:P.ctx,(function(e){var t=e.code;e=e.isErr,null!=x&&x({code:void 0===t?"unknown":t,isErr:e})}));if("function"==typeof(null==R?void 0:R.retCodeHandler))return O=(_=R.retCodeHandler(S,null==P?void 0:P.url,null==P?void 0:P.ctx,null==P?void 0:P.payload)||{}).code,E=_.isErr,void(null!=x&&x({code:void 0===O?"unknown":O,isErr:E}));"string"==typeof S&&(S=JSON.parse(S)),"function"==typeof(null==(b=null==R?void 0:R.ret)?void 0:b.join)&&(q=[].concat(R.ret.map((function(e){return e.toLowerCase()}))));var j=Object.getOwnPropertyNames(S).filter((function(e){return-1!==q.indexOf(e.toLowerCase())}));if(j.length)return O=S[j[0]],void(null!=x&&x({code:""+O,isErr:0!==O&&"0"!==O}));null!=x&&x({code:"unknown",isErr:!1})}catch(S){null!=x&&x({code:"unknown",isErr:!1})}}catch(u){l.ret="unknown",n.publishSpeed(l)}}else Object.assign(l,{type:"static",urlQuery:d(i,!0),domainLookup:s.number,connectTime:s.number}),n.publishSpeed(l)}})),t.addEventListener("timeout",(function(){t.failType="timeout"})),t.addEventListener("error",(function(){t.failType="error"})),t.addEventListener("abort",(function(){t.failType="abort"}))}};this.hackXHROptions=o,t=this.hackXHROptions,pe.find((function(e){return e.name===t.name}))||(pe.push(t),!fe&&window.XMLHttpRequest&&(re=window.XMLHttpRequest.prototype.send,ie=window.XMLHttpRequest.prototype.open,ae=window.XMLHttpRequest.prototype.setRequestHeader,fe=!0,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),this.sendByAegis)Z.isIE()||(this.timeout=5e3);else for(var e=0;e<pe.length;e++){var t=pe[e];try{"function"==typeof t.open&&t.open(this)}catch(e){}}return ie.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var e=arguments[0],t=arguments[1];return this.aegisXhrReqHeader=this.aegisXhrReqHeader||{},this.aegisXhrReqHeader[e]=t,ae.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<pe.length;e++){var t=pe[e];try{"function"==typeof t.send&&t.send(this,arguments[0])}catch(e){}}return re.apply(this,arguments)}))},publishSpeed:function(e){var t=this;this.$walk((function(n){var o=t.$getConfig(n);"fetch"===e.type&&o&&"function"==typeof o.urlHandler?n.speedLogPipeline(r(r({},e),{url:d(o.urlHandler(e.url,e.payload))})):(e.url=d(e.url),n.speedLogPipeline(e))}))},publishNormalLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},destroy:function(){var e,t,n;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&(e=this.option.hackXHROptions,-1!==(n=pe.findIndex((function(t){return t.name===e.name})))&&pe.splice(n,1),window.XMLHttpRequest.prototype.send=re,window.XMLHttpRequest.prototype.open=ie,window.XMLHttpRequest.prototype.setRequestHeader=ae,fe=!1),this.option.hackFetchOptions&&(t=this.option.hackFetchOptions,-1!==(n=me.findIndex((function(e){return e.name===t.name})))&&me.splice(n,1),window.fetch=se,de=!1),this.option.override=!1}})),ve={},ye=new J({name:"reportBridgeSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideBridge(e))},publishSpeed:function(e){this.$walk((function(t){t.speedLogPipeline(e)}))},overrideBridge:function(e){var t=this,n=e.config;n.reportBridgeSpeed&&n.h5Bridge&&n.h5BridgeFunc.length&&n.h5BridgeFunc.forEach((function(e){var o=n.h5Bridge[e];ve[e]=o,n.h5Bridge[e]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e[0],a=e[1],s=e[2],c=e[3],u=Date.now();o(i,a,s,(function(e){var o=(r=g(e,n.api)).code,r=r.isErr;o={url:i+"-"+a,name:i+"-"+a,duration:Date.now()-u,type:"bridge",ret:o,isErr:+r},t.publishSpeed(o),c(e)}))}}))},unHackBridge:function(e){Object.keys(ve).forEach((function(t){ve[t]&&(e.config.h5Bridge[t]=ve[t])})),ve={}},destroy:function(e){this.option.publishSpeed=function(){},this.option.unHackBridge(e),this.option.override=!1}});function we(e,t,n,o){return void 0===n&&(n=3e4),void 0===o&&(o=0),(t=void 0===t?0:t)<=e&&e<=n?e:o}(je=ce=ce||{})[je.unknown=100]="unknown",je[je.wifi=1]="wifi",je[je.net2g=2]="net2g",je[je.net3g=3]="net3g",je[je.net4g=4]="net4g",je[je.net5g=5]="net5g",je[je.net6g=6]="net6g",(je=ue=ue||{})[je.android=1]="android",je[je.ios=2]="ios",je[je.windows=3]="windows",je[je.macos=4]="macos",je[je.linux=5]="linux",je[je.other=100]="other",(je=le=le||{})[je.unknown=100]="unknown",je[je.normal=0]="normal",je[je.weak=1]="weak",je[je.disconnected=2]="disconnected";var be,_e,Oe,Ee,Se,Re,Pe,xe,Te,je=new J({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",ce.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e),this.refreshNetworkStatusToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var e={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},t=Object.keys(e).find((function(t){return e[t].test(navigator.userAgent)}));return t?ue[t]:ue.other},refreshNetworkTypeToBean:function(e){var t=this,n=e.config;n&&("function"==typeof n.getNetworkType?n.getNetworkType:Ce)((function(n){ce[n]||(n=ce.unknown),e.extendBean("netType",n),t.NetworkRefreshTimer=setTimeout((function(){t.refreshNetworkTypeToBean(e),clearTimeout(t.NetworkRefreshTimer)}),1e4)}))},refreshNetworkStatusToBean:function(e){var t,n=this,o=e.config;o&&null!=(t="function"==typeof o.getNetworkStatus?o.getNetworkStatus:t)&&t((function(t){void 0===le[t]&&(t=le.unknown),e.extendBean("netStatus",t),n.NetworkStatusRefreshTimer=setTimeout((function(){n.refreshNetworkStatusToBean(e),clearTimeout(n.NetworkStatusRefreshTimer)}),1e4)}))}}),Ce=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?ce.net4g:0<=n.indexOf("wifi")?ce.wifi:0<=n.indexOf("5g")?ce.net5g:0<=n.indexOf("6g")?ce.net6g:0<=n.indexOf("3g")?ce.net3g:0<=n.indexOf("2g")?ce.net2g:ce.unknown))},Le=window.WebSocket,ke=[],qe={construct:function(e,t){var n=new e(t[0],t[1]);return n.originSend=n.send,n.addEventListener("error",(function(e){var t=(e=(null==e?void 0:e.currentTarget)||{}).url,n=e.readyState;null!=ke&&ke.forEach((function(e){null!=(e=e.onErr)&&e({msg:"无法获知具体错误信息，需在浏览器控制台查看！",readyState:n,connectUrl:t})}))})),Object.defineProperty(n,"send",{get:function(){return function(e){null!=(t=n.originSend)&&t.call(n,e);var t=n.readyState,o=(e=WebSocket.OPEN,WebSocket.CLOSED),i=WebSocket.CONNECTING,a=WebSocket.CLOSING;if(t!==e){var s={readyState:t,connectUrl:n.url};switch(t){case o:ke.forEach((function(e){null!=(e=e.sendErr)&&e(r({msg:"消息发送失败，连接已关闭！"},s))}));break;case i:ke.forEach((function(e){(0,e.sendErr)(r({msg:"消息发送失败，正在连接中！"},s))}));break;case a:ke.forEach((function(e){(0,e.sendErr)(r({msg:"消息发送失败，连接正在关闭！"},s))}))}}}}}),n}},Ie=new J({name:"onError"}),Ne=Ie=new J({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(e){function t(e){e=e&&N(e.reason),s.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:T.PROMISE_ERROR})}function n(e){if(e=(null==e?void 0:e.target)||(null==e?void 0:e.srcElement)){var t=e.src||e.href;if(e=e.tagName,"string"==typeof t&&e&&!(-1<window.location.href.indexOf(t))){var n={msg:e+" load fail: "+t,level:T.INFO};if(/\.js$/.test(t))n.level=T.SCRIPT_ERROR;else if(/\.css$/.test(t))n.level=T.CSS_ERROR;else switch(e.toLowerCase()){case"script":n.level=T.SCRIPT_ERROR;break;case"link":n.level=T.CSS_ERROR;break;case"img":n.level=T.IMAGE_ERROR;break;case"audio":case"video":n.level=T.MEDIA_ERROR;break;default:return}s.publishErrorLog(n)}}}var o,r,a,s=this,c=window.onerror;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.publishErrorLog({msg:(N(e[0])||"")+" @ ("+(N(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+N(e[4]||""),level:T.ERROR}),null!=c&&c.call.apply(c,i([window],e))},window.addEventListener("unhandledrejection",t),window.document.addEventListener("error",n,!0),e.lifeCycle.on("destroy",(function(){0===Ie.countInstance()&&(window.document.removeEventListener("unhandledrejection",t),window.document.removeEventListener("error",n,!0))})),e.config.websocketHack&&(e={key:e.config.id+"-"+this.name,onErr:function(e){var t;null!=(t=s.publishWsErrorLog)&&t.call(s,e)},sendErr:function(e){var t;null!=(t=s.publishWsErrorLog)&&t.call(s,e)}},this.hackWebsocketConfig=e,e=this.hackWebsocketConfig,window.Proxy)&&window.WebSocket&&(o=window.WebSocket,window&&!o.isHack&&(r=new Proxy(WebSocket,qe),o.isHack=!0,window.WebSocket=r),a=e,ke.find((function(e){return e.key===a.key}))||a&&ke.push(a))},publishErrorLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},publishWsErrorLog:function(e){var t=e.connectUrl,n=e.msg;e=e.readyState,this.publishErrorLog({msg:"WEBSOCKET_ERROR: \n              connect: "+t+"\n              readyState: "+e+"\n              msg: "+n,level:T.WEBSOCKET_ERROR})},destroy:function(){var e,t;this.option.publishErrorLog=function(){},this.option.hackWebsocketConfig&&(e=this.option.hackWebsocketConfig,window.WebSocket=Le,-1!==(t=ke.findIndex((function(t){return t.key===e.key}))))&&ke.splice(t,1)}}),Ae=(new J({name:"pagePerformance"}),3),De=new J({name:"pagePerformance",onNewAegis:function(e){S()&&(be?this.publish(be,e):this.startCalcPerformance(e))},publish:function(e,t){var n=this;t.sendPipeline([function(e,o){var r,i=[];for(r in e)i.push(r+"="+e[r]);var a,s=n.$getConfig(t);if(s)return a=-1===t.config.performanceUrl.indexOf("?")?"?":"&","function"==typeof s.urlHandler?o({url:t.config.performanceUrl+a+i.join("&")+"&from="+(encodeURIComponent(s.urlHandler())||window.location.href),beanFilter:["from"],type:j.PERFORMANCE,log:e}):o({url:t.config.performanceUrl+a+i.join("&"),type:j.PERFORMANCE,log:e})}],j.PERFORMANCE)(e)},startCalcPerformance:function(e){var t=this;try{this.getFirstScreenTiming(e,(function(n){var o=performance.timing;o&&(be={dnsLookup:we(o.domainLookupEnd-o.domainLookupStart),tcp:we(o.connectEnd-o.connectStart),ssl:we(0===o.secureConnectionStart?0:o.requestStart-o.secureConnectionStart),ttfb:we(o.responseStart-o.requestStart),contentDownload:we(o.responseEnd-o.responseStart),domParse:we(o.domInteractive-o.domLoading,0,3e4,1070),resourceDownload:we(o.loadEventStart-o.domInteractive,0,3e4,1070),firstScreenTiming:we(Math.floor(n),0,6e4)},(o=e.config).extraPerformanceData&&"{}"!==JSON.stringify(o.extraPerformanceData)&&(o=(n=o.extraPerformanceData).engineInit,n=n.bundleLoad,be=r(r({},be),{engineInit:we(o,0,1e4),bundleLoad:we(n,0,1e4)})),t.publish(be,e))}))}catch(e){}},getFirstScreenTiming:function(e,t){e.lifeCycle.on("destroy",(function(){c&&clearTimeout(c)}));var n=this,o=["script","style","link","br"],r=[],i={},a=new MutationObserver((function(e){var t={roots:[],rootsDomNum:[],time:performance.now()};e.forEach((function(e){e&&e.addedNodes&&e.addedNodes.forEach&&e.addedNodes.forEach((function(e){1===e.nodeType&&e.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")?(Object.prototype.hasOwnProperty.apply(i,[t.time])||(i[t.time]=[]),i[t.time].push(e)):1!==e.nodeType||-1!==o.indexOf(e.nodeName.toLocaleLowerCase())||n.isEleInArray(e,t.roots)||e.hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(t.roots.push(e),t.rootsDomNum.push(n.walkAndCount(e)||0))}))})),t.roots.length&&r.push(t)})),s=(a.observe(document,{childList:!0,subtree:!0}),function(o){(o=void 0===o?0:o)||(u=0,(f=Object.keys(i)).length?(o=Math.max.apply(null,f),("object"!=typeof(null==(f=e.config)?void 0:f.pagePerformance)||null!=(f=e.config.pagePerformance)&&f.firstScreenInfo)&&(e.firstScreenInfo={element:null==(f=i[o])?void 0:f[0],timing:o,markDoms:i})):r.forEach((function(t){for(var r,i=0;i<t.roots.length;i++)t.rootsDomNum[i]>u&&n.isInFirstScreen(t.roots[i])&&(u=t.rootsDomNum[i],o=t.time,"object"!=typeof(null==(r=e.config)?void 0:r.pagePerformance)||null!=(r=e.config.pagePerformance)&&r.firstScreenInfo)&&(e.firstScreenInfo={element:t.roots[i],timing:o})})),r.length=0,Object.keys(i).forEach((function(e){i[e]=i[e].map((function(e){var t={tagName:e.tagName},n=e.attributes;if(!n)return e;for(var o=0;o<n.length;o++){var r=n[o];r.name&&(t[r.name]=e.getAttribute(r.name))}return t}))})));var u,l=(f=performance.timing).domInteractive-f.domLoading,f=f.loadEventStart-f.domInteractive,p=o;c=null;for(var d=0,m=[l,f,p];d<m.length;d++)if(m[d]<=0&&0<Ae){c=setTimeout((function(){return s(p)}),3e3);break}c?--Ae:(a.disconnect(),null!=t&&t(o))}),c=setTimeout((function(){return s()}),3e3)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){var t,n;return!(!e||"function"!=typeof e.getBoundingClientRect)&&(e=e.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth,0<=e.left)&&e.left<n&&0<=e.top&&e.top<t&&0<e.width&&0<e.height},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var o=0;o<n.length;o++)t+=this.walkAndCount(n[o])}return t}});function Me(){Se=[],Oe=-1,_e=null,Ge(addEventListener)}function Be(e,t){_e||(_e=t,Oe=e,Ee=new Date,Ge(removeEventListener),Ue())}function Ue(){var e;0<=Oe&&Oe<Ee-Pe&&(e={entryType:"first-input",name:_e.type,target:_e.target,cancelable:_e.cancelable,startTime:_e.timeStamp,processingStart:_e.timeStamp+Oe},Se.forEach((function(t){t(e)})),Se=[])}function Ge(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,xe,Re)}))}function Fe(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}}function We(e,t){try{var n;if(PerformanceObserver.supportedEntryTypes.includes(e)&&("first-input"!==e||"PerformanceEventTiming"in self))return(n=new PerformanceObserver((function(e){return e.getEntries().map(t)}))).observe({type:e,buffered:!0}),n}catch(e){}}function He(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)}function $e(e,t,n){var o;return function(){0<=t.value&&(n||Ye.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(o||0),t.delta||void 0===o)&&(o=t.value,e(t))}}function Je(){Ke((function(e){e=e.timeStamp,Ze=e}),!0)}function Ve(){return Ze<0&&((Ze=self.webVitals.firstHiddenTime)===1/0&&Je(),He((function(){setTimeout((function(){Ze="hidden"===document.visibilityState?0:1/0,Je()}),0)}))),{get timeStamp(){return Ze}}}function Qe(e){var t=e.name;e=e.value,et[t]=e}Re={passive:!0,capture:!0},Pe=new Date,xe=function(e){var t,n,o,r;function i(){Be(n,o),r()}function a(){r()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,o=e,r=function(){removeEventListener("pointerup",i,Re),removeEventListener("pointercancel",a,Re)},addEventListener("pointerup",i,Re),addEventListener("pointercancel",a,Re)):Be(t,e))},Te="hidden"===document.visibilityState?0:1/0,addEventListener("visibilitychange",(function e(t){"hidden"===document.visibilityState&&(Te=t.timeStamp,removeEventListener("visibilitychange",e,!0))}),!0),Me(),self.webVitals={firstInputPolyfill:function(e){Se.push(e),Ue()},resetFirstInputPolyfill:Me,get firstHiddenTime(){return Te}};var ze,Xe,Ke=function(e,t){function n(o){"pagehide"!==o.type&&"hidden"!==document.visibilityState||(e(o),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Ye=new("function"==typeof WeakSet?WeakSet:Set),Ze=-1,et=(new J({name:"webVitals"}),{FCP:-1,LCP:-1,FID:-1,CLS:-1}),tt=new J({name:"webVitals",onNewAegis:function(e){if(S()&&"function"==typeof window.PerformanceObserver&&"function"==typeof performance.getEntriesByName)try{v=Qe,w=Ve(),b=Fe("FCP"),_=performance.getEntriesByName("first-contentful-paint")[0],O=_?null:We("paint",x),(_||O)&&(y=$e(v,b,void 0),_&&x(_),He((function(e){b=Fe("FCP"),y=$e(v,b,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){b.value=performance.now()-e.timeStamp,Ye.add(b),y()}))}))}))),f=Qe,m=Ve(),g=Fe("LCP"),(h=We("largest-contentful-paint",P))&&(p=$e(f,g,void 0),d=function(){Ye.has(g)||(h.takeRecords().map(P),h.disconnect(),Ye.add(g),p())},["keydown","click"].forEach((function(e){addEventListener(e,d,{once:!0,capture:!0})})),Ke(d,!0),He((function(e){g=Fe("LCP"),p=$e(f,g,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){g.value=performance.now()-e.timeStamp,Ye.add(g),p()}))}))}))),a=Qe,s=Ve(),c=Fe("FID"),u=We("first-input",E),l=$e(a,c,void 0),u&&Ke((function(){u.takeRecords().map(E),u.disconnect()}),!0),u||window.webVitals.firstInputPolyfill(E),He((function(){c=Fe("FID"),l=$e(a,c,void 0),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(E)})),n=Qe,r=Fe("CLS",0),(i=We("layout-shift",t))&&(o=$e(n,r,void 0),Ke((function(){i.takeRecords().map(t),o()})),He((function(){r=Fe("CLS",0),o=$e(n,r,void 0)}))),R(this.publish.bind(this,e),!0)}catch(e){}function t(e){e.hadRecentInput||(r.value+=e.value,r.entries.push(e),o())}var n,o,r,i,a,s,c,u,l,f,p,d,m,g,h,v,y,w,b,_,O;function E(e){e.startTime<s.timeStamp&&(c.value=e.processingStart-e.startTime,c.entries.push(e),Ye.add(c),l())}function P(e){var t=e.startTime;t<m.timeStamp&&(g.value=t,g.entries.push(e)),p()}function x(e){"first-contentful-paint"===e.name&&(O&&O.disconnect(),e.startTime<w.timeStamp)&&(b.value=e.startTime,b.entries.push(e),Ye.add(b),y())}},publish:function(e){var t;null!=(t=e.sendPipeline)&&t.call(e,[function(t,n){var o,r=[];for(o in t)r.push(o+"="+t[o]);var i=-1===e.config.performanceUrl.indexOf("?")?"?":"&";n({url:e.config.webVitalsUrl+i+r.join("&"),type:j.VITALS,log:t,sendBeacon:!0})}],j.VITALS)(et)},destroy:function(){this.option.publish=function(){}}}),nt=0,ot=(o(Xe=at,$=ze=$),Xe.prototype=null===$?Object.create($):(st.prototype=$.prototype,new st),at.prototype.getBean=function(e){var t=this;return void 0===e&&(e=[]),""+Object.getOwnPropertyNames(this.bean).filter((function(t){return-1===e.indexOf(t)})).map((function(e){return"from"===e?"from="+t.getCurrentPageUrl():e+"="+t.bean[e]})).join("&")},at.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href;return e=(e="function"==typeof this.config.urlHandler?this.config.urlHandler():e).slice(0,2048),encodeURIComponent(e)},at.prototype.ready=function(){var e=this;(function t(){var n,o,r,i;e.reportRequestQueue.length&&(n=e.reportRequestQueue.splice(0,1)[0],o=n.options,r=n.success,i=n.fail,e.$request(o,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return null==r?void 0:r.apply(o,e)}finally{t()}}),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return null==i?void 0:i.apply(o,e)}finally{t()}})))})(),this.isReportReady=!0},at.prototype.request=function(e,t,n){this.config.reportImmediately||this.isReportReady?this.$request(e,t,n):this.reportRequestQueue.push({options:e,success:t,fail:n})},at.prototype.$request=function(e,t,n){var o,r,i,a;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)return a=e.url,!1!==e.addBean&&(a=a+(-1===a.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=a,a=e.method||"get",(e=(r=this.config.onBeforeRequest)?r(e,this):e)?e.url?void((null!=e&&e.sendBeacon||this.sendNow)&&"function"==typeof(null===navigator||void 0===navigator?void 0:navigator.sendBeacon)?navigator.sendBeacon(e.url,e.data):((o=new XMLHttpRequest).sendByAegis=!0,o.addEventListener("readystatechange",(function(){4===o.readyState&&(400<=o.status||0===o.status?null!=n&&n(o.response):null!=t&&t(o.response))})),"get"===a.toLocaleLowerCase()?(o.open("get",(r=e.url,i=e.data,"string"!=typeof r?"":"object"==typeof i&&i?(a=Object.getOwnPropertyNames(i).map((function(e){var t=i[e];return e+"="+("string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t)))})).join("&").replace(/eval/gi,"evaI"),r+(-1===r.indexOf("?")?"?":"&")+a):r)),o.send()):(o.open("post",e.url),e.contentType&&o.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),o.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},at.useAsyncPlugin=function(e,t){var n,o=void 0===(n=(t=void 0===t?{}:t).exportsConstructor)?"aegis-plugin-"+nt:n,r=void 0===(n=t.onAegisInit)?function(){}:n,i=void 0===(n=t.onAegisInitAndPluginLoaded)?function(){}:n;if(nt+=1,"string"!=typeof e)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof r||"function"!=typeof i)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new J({name:"asyncPlugin",onNewAegis:function(t){try{r(t),at.asyncPlugin[e]?i(t,window[at.asyncPlugin[e]]):(n=e,a=o,s=function(n){n||(at.asyncPlugin[e]=o,n=window[o],i(t,n))},c=document.createElement("script"),u=document.head,"function"==typeof a&&(s=a,a=""),c.src=n,c.setAttribute("name",a),c.name=a,c.setAttribute("crossorigin","anonymous"),c.crossorigin="anonymous",c.defer=!0,c.hasLoaded=!1,c.onreadystatechange=function(){c.hasLoaded||c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(c.hasLoaded=!0,"function"==typeof s&&s(!1),setTimeout((function(){u.contains(c)&&u.removeChild(c)})))},c.onload=c.onreadystatechange,c.onerror=function(){"function"==typeof s&&s(!0),setTimeout((function(){u.contains(c)&&u.removeChild(c)}))},"complete"===document.readyState?u.appendChild(c):window.addEventListener("load",(function(){u.appendChild(c)})))}catch(n){console.log("error on below is caused by "+e+" "),console.error(n)}var n,a,s,c,u}}))},at.prototype.publishPluginsLogs=function(){var e=at.installedPlugins.find((function(e){return"reportAssetSpeed"===e.name}));null!=e&&e.option.collectNotReportedLog(this)},at.prototype.uploadLogs=function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={}),null!=(n=this.lifeCycle)&&n.emit("uploadLogs",e,t)},at.sessionID="session-"+Date.now(),at.asyncPlugin={},at.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js"},at),rt=new J({name:"offlineLog"}),it=($=rt=new J({name:"offlineLog",onNewAegis:function(e){!function(e,t){function n(e){u=e}function o(e){s=s.concat(e)}function i(e,t){c={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}}var s=[],c=null,u=null;ot.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",o),e.lifeCycle.on("uploadLogs",i),e.lifeCycle.on("onConfigChange",n)},onAegisInitAndPluginLoaded:function(e,l){var f,p,d,m,g,h,v=void 0===(v=t.dbConfig)?{}:v,y=void 0===(y=t.url)?ot.urls.aegisCollect:y,w=void 0===(w=t.offlineLogExp)?3:w,b=t.id,_=t.uin;null!=(f=e.lifeCycle)&&f.remove("beforeWrite",o),null!=(f=e.lifeCycle)&&f.remove("uploadLogs",i),null!=(f=e.lifeCycle)&&f.remove("onConfigChange",n),y=Object.assign({lookupUrl:y+"/offlineAuto?id="+b,preservedDay:w,id:b,uin:_,aid:(null==(f=e.bean)?void 0:f.aid)||"",beforeRequest:e.config.beforeRequest,afterRequest:e.config.afterRequest},v,{sessionId:ot.sessionID});try{var O=new l(y);s.forEach((function(e){O.add(r(r({},e),{level:e.level===T.INFO_ALL?T.INFO:e.level}))})),null!=(p=e.lifeCycle)&&p.on("beforeWrite",(function(e){(e=void 0===e?[]:e).forEach((function(e){O.add(r(r({},e),{level:e.level===T.INFO_ALL?T.INFO:e.level}))}))})),null!=(d=e.lifeCycle)&&d.on("uploadLogs",(function(n,o){var r;void 0===n&&(n={}),void 0===o&&(o={}),O.uploadLogs(Object.assign({id:t.id,uin:t.uin,aid:null==(r=e.bean)?void 0:r.aid},n),o)})),null!=(m=e.lifeCycle)&&m.on("onConfigChange",(function(e){O.setConfig(e)})),null!=(g=e.lifeCycle)&&g.on("destroy",(function(){0===rt.countInstance()&&(s.length=0,"function"==typeof((c=null)==O?void 0:O.destroy))&&O.destroy()})),O.on("PERREVENT",(function(n){e.sendPipeline([function(e,n){o={msg:N(e),level:T.INFO};var o=(o=Array.isArray(o)?o:[o]).map((function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return a(n)+"["+t+"]="+(void 0===e[n]?"":a(e[n]))})).join("&")})).join("&")+(o.length?"&count="+o.length:"");n({type:j.OFFLINE,data:o,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:t.url+"?id=893&sessionId="+ot.sessionID+"&uin="+t.uin+"&from="+t.id+"&count=1&version=1.38.53",log:e})}],j.OFFLINE)(n)})),u&&(O.setConfig(u),u=null),c&&(null!=(h=e.lifeCycle)&&h.emit("uploadLogs",c.conds,c.params),c=null),e.flog=O}catch(e){console.log(e)}}})}(ot.urls.flog,e.config)}}),new J({name:"spa"}),new J({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv),window.addEventListener("hashchange",this.sendPv)},wr:function(e){var t=history[e],n="__"+e+"__hasWrittenByTamSpa";return"function"==typeof t&&!history[n]&&(Object.defineProperty(history,n,{value:!0,enumerable:!1}),function(){var n=t.apply(this,arguments),o=null;return"function"==typeof Event?o=new Event(e):(o=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(o),n})},sendPv:function(){var e=this;setTimeout((function(){var t=location.href,n=location.pathname+location.hash;e.$walk((function(e){var o=e.config.pvUrl;o&&n&&n!==e.originFireUrl&&(e.sendPipeline([function(e,n){n({url:o+"?from="+encodeURIComponent(t),beanFilter:["from"],type:j.PV})}],j.PV)(null),e.originFireUrl=n)}))}),0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}}));function at(e){var t,n,o,i,a,s=ze.call(this,e)||this;s.sendNow=!1,s.isReportReady=!1,s.reportRequestQueue=[],s.speedLogPipeline=O([v(s),(i=s.config,a={},function(e,t){var n,o;i.speedSample?(o="object"==typeof i.repeat?i.repeat:{repeat:i.repeat},n=+o.speed||+o.repeat||5,Array.isArray(e)?(o=e.filter((function(e){var t=!a[e.url]||a[e.url]<n;return a[e.url]=1+~~a[e.url],t}))).length&&t(o):(!a[e.url]||a[e.url]<n)&&(a[e.url]=1+~~a[e.url],t(e))):t(e)}),(o=s,function(e,t){Ce((function(n){o.extendBean("netType",n),t(e)}))}),function(e,t){null!=(n=s.lifeCycle)&&n.emit("beforeReportSpeed",e);var n,o=s.config.beforeReportSpeed;if((e="function"==typeof o?e.filter((function(e){return!1!==o(e)})):e).length)return t(e)},function(e){return s.sendPipeline([function(e,t){var n,o,i,a;t({type:j.SPEED,url:""+s.config.speedUrl,method:"post",data:(t=e,n=r(r({},s.bean),{from:s.getCurrentPageUrl()}),i={fetch:[],static:[],bridge:[]},a=new FormData,Array.isArray(t)?t.forEach((function(e){var t=z(e);i[e.type].push(t)})):(o=z(t),i[t.type].push(o)),a.append("payload",A(r({duration:i},n))),a),log:e})}],j.SPEED)(e)}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!=(t=document.cookie.match(/\buin=\D+(\d*)/))?t:[])[1]||(null!=(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))?n:[])[1]||""),s.init(e),s.extendBean("sessionId",at.sessionID),s.extendBean("from",s.getCurrentPageUrl()),"undefined"!=typeof document&&s.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&s.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&s.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&s.extendBean("ext3",encodeURIComponent(e.ext3))}catch(e){console.warn(e),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),s.sendSDKError(e)}return s}function st(){this.constructor=Xe}new J({name:"ie"}),new J({name:"onClose"});var ct=new J({name:"onClose",onNewAegis:function(){var e,t=this;Z.desktop()?(e=window.onunload,window.onunload=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];t.publishNotReportedLog(),null!=e&&e.call.apply(e,i([window],n))}):R(this.publishNotReportedLog.bind(this),!0)},publishNotReportedLog:function(){var e=this;this.$walk((function(t){t.sendNow=!0,t.publishPluginsLogs(),e.publishThrottlePipeLogs(t)}))},publishThrottlePipeLogs:function(e){null!=e&&e.speedLogPipeline([]),null!=e&&e.eventPipeline([]),null!=e&&e.customTimePipeline([]),null!=e&&e.normalLogPipeline([])}});return new J({name:"aid"}),ot.use(Ne),ot.use(he),ot.use(K),ot.use(De),ot.use(tt),ot.use(V),ot.use(je),ot.use($),ot.use(it),ot.use(ct),ot.use(ye),ot}()}));class dn{constructor(e={}){this.userid=Jt();const{aegisOptions:t={}}=e,n=rn(en,t,"onBeforeRequest");n.uin||(n.uin=this.userid),this.aegis=new pn(n)}setUid(e){this.aegis.setConfig({uin:e})}reportEvent(e,t={}){if(!e||"string"!=typeof e)return;const n=e.replace(/\./g,"_"),[o,r,...i]=Object.keys(t),a=Qt(t,o),s=Qt(t,r),c=i.map(e=>Qt(t,e)).filter(e=>e).join("&");this.aegis.reportEvent({name:n,ext1:a,ext2:s,ext3:c})}reportTime(e){if(void 0===e.name)return;let{duration:t}=e;void 0===t&&(t=Date.now()-window.performance.timing.navigationStart),t=Math.min(6e4,Math.max(0,t)),this.aegis.reportTime(Object.assign(Object.assign({},e),{duration:t}))}log(e){this.aegis.info(e)}error(e){this.aegis.error(e)}time(e){this.aegis.time(e)}timeEnd(e){this.aegis.timeEnd(e)}}const mn=q&&window.weLibReportConfig||{},gn=q?new dn(mn):null,hn=q?new fn(mn):null;var vn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};function yn(e,t){const{page:n=location.href,block:o="",action:r="",tgameid:i="",pos:a="",ext:s="",ext1:c="",ext2:u="",ext3:l=""}=e,f=vn(e,["page","block","action","tgameid","pos","ext","ext1","ext2","ext3"]);hn.reportEvent("web_aio",{page:n,action:r,block:o,tgameid:i,pos:a,ext:s,ext1:c,ext2:u,ext3:l,extra:JSON.stringify(f)},t)}var wn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const bn={inserted(e,t){On(e,t)},mounted(e,t){On(e,t)},unbind(e){En(e)},unmounted(e){En(e)}},_n=new WeakMap;function On(e,t){const{arg:n,value:o={}}=t,{realTime:r=!1}=o,i=wn(o,["realTime"]);n&&(_n.set(e,()=>{yn(Object.assign(Object.assign({},i),{action:"wr-click",block:n}),{realTimeAnalysis:r})}),e.addEventListener("click",_n.get(e)))}function En(e){const t=_n.get(e);e&&t&&(e.removeEventListener("click",t),_n.delete(e))}var Sn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const Rn={inserted(e,t){xn(e,t)},mounted(e,t){xn(e,t)},unbind(e){Tn(e)},unmounted(e){Tn(e)}},Pn=new WeakMap;function xn(e,t){const{arg:n,value:o={}}=t,{delay:r=0,threshold:i=0,repeated:a=!1,callback:s,realTime:c=!1}=o,u=Sn(o,["delay","threshold","repeated","callback","realTime"]),l="function"==typeof s;(n||l)&&(Pn.set(e,{observer:new IntersectionObserver(([{isIntersecting:e,target:t}],o)=>{const i=Pn.get(t);i&&(e?i.timer=setTimeout(()=>{l?s():yn(Object.assign(Object.assign({},u),{action:"wr-expose",block:n}),{realTimeAnalysis:c}),delete i.timer,!a&&o.disconnect()},r):i.timer&&(clearTimeout(i.timer),delete i.timer))},{threshold:i})}),Pn.get(e).observer.observe(e))}function Tn(e){const t=Pn.get(e);t&&(t.timer&&clearTimeout(t.timer),t.observer.disconnect(),Pn.delete(e))}var jn=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n};const Cn=Ht,Ln={visited(){},clicked(){}},kn={reportSpeed(){}},qn={config(){},cgiInit(){}};var In=Object.freeze({__proto__:null,init:function(e){const t=e.main||"",n=e.sub||"",o=e.gameId||e.game_id||0,r=e.qosId||8866,i=e.keys||[];return function(e,a={},s={}){const c={},u=[];let l=!1;const f=Array.isArray(e)?e:[e];for(let e=0;e<f.length;e++)if(f[e]||0===f[e]){let t=i[e]||`val${e}`;t="gameid"===t||"game_id"===t?"tgameid":t,"from"===t.toLowerCase()&&(l=!0),c[t]=f[e],u.push(f[e])}Object.keys(a).forEach(e=>{const t="gameid"===e||"game_id"===e?"tgameid":e;"from"===t.toLowerCase()&&(l=!0),c[t]=a[e]}),N.get("tgp_id")&&(c.tgpid=N.get("tgp_id")),N.get("tgp_user_type")&&(c.utype=N.get("tgp_user_type")),N.get("region")&&(c.region=N.get("region")),c.ctype=1;const p=C?1:0;if(c.isclient=p,!l){const e=window.location.search||"";let t=Lt(e,{ignoreQueryPrefix:!0}).from||"";("string"!=typeof t||t.match(/[^\dA-Za-z.\-_]/))&&(t="unsafe"),C&&!t&&(t="client.wegame"),c.from=t}if(Bt(r,o,t,n,c),hn){const e=`v0_${t}_${n}`,{tgpid:o,isclient:r,ctype:i,region:a,from:u}=c,l=jn(c,["tgpid","isclient","ctype","region","from"]);hn.reportEvent(e,Object.assign(Object.assign({page:`${t}_${n}`},l),{efrom:u}),Object.assign({immediate:!0},s))}}},performance:function(){},setConfig:()=>{},tqos:Cn,tcss:Ln,timing:kn,cgi:qn,emonitor:{},emonitorIns:{},Report:fn,Perf:dn,report:hn,perf:gn,reportAIO:yn,vWrClick:bn,vWrExpose:Rn}),Nn=i((function(e,t){function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0});var o=n(a),r=n(N);function i(e,t,n){var o=Math.floor(1e4*Math.random()),r=document.createElement("script");return r.charset=t||"UTF-8",r.id=o,document.getElementsByTagName("head")[0].appendChild(r),r.src=e,"function"==typeof n&&("onload"in r?r.onload=n:"onreadystatechange"in r&&(r.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||n()})),r}function s(e,t){void 0===t&&(t={});try{return window.external.callcpp(e,JSON.stringify(t)),!0}catch(e){return!1}}function c(e){var t=a.pageHost;return"plat.tgp.qq.com"!==t&&"game.tgp.qq.com"!==t?e.replace(/\/\/(oss|forum|rail|webd|oper-promot|im|wpicupload|iso)\.tgp\.qq\.com/,"//"+t+"/api/$1").replace(/\/\/api\.(pallas)\.tgp\.qq\.com/,"//"+t+"/api/$1").replace(/\/\/middle\.tgp\.qq\.com/,"//"+t+"/api/middle").replace(/\/\/qt\.qq\.com/,"//"+t+"/api/qt").replace(/\/\/plat\.tgp\.qq\.com/,"//"+t).replace(/\/\/game\.tgp\.qq\.com/,"//"+t):e}function u(e){var t=document.referrer,n={},o=null;if(a.isInClient||!sessionStorage)return e?n[e]||"":n;o=sessionStorage.getItem("custom_json");var r=sessionStorage.getItem("last_referrer");if(o)try{(o=JSON.parse(o)).path&&(o.path===t||o.path===location.href&&!t||t===location.href&&o.path===r)&&(n=o)}catch(e){}return e?n[e]||"":n}function l(e,t,n){void 0===t&&(t=document.location.href);var o=t.match(/\/mars_vars(.+)/i),r="";o&&o.length>1&&(r=o[1]);var i=new RegExp("/"+e+"-([^/]+)","im"),a="",s=r.match(i);s&&s.length>1&&(a=s[1]),a=a.replace(/</g,"");var c=new RegExp("[?&#]"+e+"=[^&#?]*","igm"),l=t.match(c);if(!l)return"from"!==e||n?a:u("from")||a;for(var f=l[0],p=f.indexOf("="),d=f.substr(p+1,f.length);d.indexOf("<")>=0;)d=d.replace("<","");return d.indexOf("#")>0&&(p=d.indexOf("#"),d=d.substr(0,p)),"from"!==e||d||n||(d=u("from")),d||a}var f=["lol.qq.com","cf.qq.com","dnf.qq.com","x5.qq.com","speed.qq.com","tps.qq.com","bns.qq.com","poe.qq.com","fo4.qq.com","nz.qq.com","nba2k.qq.com","wuxia.qq.com"];function p(e){if(!e)return!1;var t=null;try{t=new URL(e)}catch(e){}return!!t&&f.some((function(e){return e===t.hostname.split(".").slice(-3).join(".")}))}var d="https://";o.isBrowser&&(d="https:"===window.location.protocol?"https://":"http://");var m={qtreq:function(e){it.baseRequest({method:"get",url:c("//qt.qq.com/lua/tgp_live_svr/"+e.cmd),params:{p:JSON.stringify(e.data||{})}}).then((function(t){e.callback(t)})).catch((function(t){e.callback(null)}))},get_lives_detail:function(e){m.qtreq({desc:"查某直播房间详细信息接口",cmd:"get_lives_detail",data:{live_ids:e.liveId},callback:function(t){t&&1===t.result?e.succ(t.data[0]):e.fail(t)}})},openLivePlayer:function(e,t,n){m.get_lives_detail({liveId:e,fail:function(t){console.log("打开播放器时，拉取直播详情失败。liveId: "+e+", err: "+t)},succ:function(e){window.tgpThirdPlayer&&window.tgpThirdPlayer.getPlayer()&&window.tgpThirdPlayer.getPlayer().stop();var o="",i=0,a=0,s=r.get("language");if(3==e.live_type){var u;e.detail?("string"==typeof e.detail&&(e.detail=JSON.parse(e.detail)),"string"==typeof e.detail.extra_info&&(e.detail.extra_info=JSON.parse(e.detail.extra_info)),u=e.detail.extra_info):("string"==typeof e.extra_info&&(e.extra_info=JSON.parse(e.extra_info)),u=e.extra_info);var l=e.gid,f=u.room_id,p=u.subroom_id;o=c(d+"plat.tgp.qq.com/tgpforum/video/index.html#!/live/room/"+l+"/"+f+"/"+p+"?from="+t),window.screen.height>900?(i=1028,a=900):(i=1034,a=626)}else if(6==e.live_type){l=e.gid,f=e.room_identify;if("string"==typeof e.extra_info&&(e.extra_info=JSON.parse(e.extra_info)),e.extra_info&&e.extra_info.qt_main_game_id)var m=e.extra_info.qt_main_game_id;else m=20003;var g=22;0!==t.indexOf("live-center")&&"nav-dropbox-follow"!=t||(g=9),o=c(d+"plat.tgp.qq.com/video/self-room/client_player.html?game_id="+m+"&room_id="+f+"&gid="+l+"&live_id="+e.live_id+"&from=wegame&source_type= "+g+"&language="+s+"&recoId="+n),i=1280,a=706}else o=c(d+"plat.tgp.qq.com/video/live-player/room.html?liveid="+e.live_id+"&from="+t+"&recoId="+n),i=1280,a=706;if(/\bxTools\.exe/i.test(navigator.userAgent)||/\BattleCare\.exe/i.test(navigator.userAgent))return O.openJdqsWindow(o,"直播",i,a),!0;O.openWindow({url:o,width:i,height:a})}})}},g="https://";o.isBrowser&&(g="https:"===window.location.protocol?"https://":"http://");var h=["tgp_id","tgp_ticket"],v=h.concat(["tgp_biz_ticket","tgp_env","tgp_user_type","region","client_type"]);function y(e,t){void 0===t&&(t=""),console.warn("%c"+e,"color:orange;font-size:1.5em;",t)}function w(e,t){void 0===t&&(t=window.__WEGAME_WEB_SDK_INJECTIONS__.WEGAME_DOMAIN),"string"==typeof t&&(t=[t]),t.forEach((function(t){v.forEach((function(n){null!=e[n]&&(document.cookie=n+"="+e[n]+";path=/;domain="+t)}))}))}function b(e){return h.every((function(t){return!!e[t]}))}function _(e){return void 0===e&&(e=r.get),v.reduce((function(t,n){return t[n]=e(n),t}),{})}var O={cbList:{},curJump:{mid:0,page:0},get:function(e){var t=O.cbList,n=O.status;window.top.location!==window.location||window.webBridgeFunc||(window.webBridgeFunc=function(e){var t,n,o=O.cbList;e&&((n=e.src)&&window.frames["tgpFrame_"+n]&&((t=window.frames["tgpFrame_"+n]).TGP||(t=t.contentWindow),t&&t.TGP.cbList&&t.TGP.cbList["cb_"+e.seq_num]&&(o=t.TGP.cbList)),0==e.retCode?o["cb_"+e.seq_num]&&o["cb_"+e.seq_num](e):o["err_"+e.seq_num]&&o["err_"+e.seq_num](e),delete o["cb_"+e.seq_num],delete o["err_"+e.seq_num])}),e.seq||(e.seq=Date.now()+Math.floor(Math.random()*Date.now()+1)),t["cb_"+e.seq]||("function"==typeof e.success?t["cb_"+e.seq]=e.success:"string"==typeof e.success&&window[e.success]&&(t["cb_"+e.seq]=window[e.success])),t["err_"+e.seq]||("function"==typeof e.fail?t["err_"+e.seq]=function(n){delete t["cb_"+n.seq],delete t["err_"+n.seq],delete t["evt_"+n.seq],e.fail(n)}:"string"==typeof e.fail&&window[e.fail]&&(t["err_"+e.seq]=function(n){delete t["cb_"+n.seq],delete t["err_"+n.seq],delete t[n.event+"_"+n.app],window[e.fail](n)}));var o={dest:(isNaN(e.app)?"0":e.app)+"",seq_num:e.seq+"",callback_func:"webBridgeFunc",data:e.data||{}},r=null;try{r=window.parent&&window.parent.TGP&&window.parent.TGP.status}catch(e){console.log(e)}isNaN(e.src)?n&&n.curMod?o.src=n.curMod+"":r?(n=r,o.src=n.curMod?n.curMod+"":"0"):o.src="0":o.src=e.src+"",e.timeout&&(o.timeout=e.timeout+"");try{return window.external.callcpp(e.cmd,JSON.stringify(o)),0}catch(n){return delete t["cb_"+o.seq],delete t["err_"+o.seq],delete t["evt_"+o.seq],"function"==typeof e.fail&&e.fail({retCode:-9999,msg:"web侧调用callcpp失败，请确认是在正确的客户端环境内打开。",data:{e:n,params:e.data}}),-9999}},listen:function(e){var t,n,o=O.cbList,r="register_event";window.top.location!=window.location||window.webEventProxy||(window.webEventProxy=function(e){var n,o,r,i=O.cbList;o=e.src,t=e.data,window.frames["tgpFrame_"+o]?((n=window.frames["tgpFrame_"+o]).TGP||(n=n.contentWindow),r=t.event?t.event+"_"+o:"",n&&n.TGP.cbList&&n.TGP.cbList[r]&&(i=n.TGP.cbList)):r=t.event?t.event+"_"+o:"",i[r]&&i[r](e)}),e.seq||(e.seq=Date.now()+Math.floor(Math.random()*Date.now()+1)),e.src=e.src||0,o[n=e.event+"_"+e.src]||("function"==typeof e.callback?o[n]=e.callback:"string"==typeof e.callback&&window[e.callback]&&(o[n]=window[e.callback])),e.event_type&&2===e.event_type&&(r="unregister_event"),e.cmd=r,e.data=e.data||{},e.data.event_name=e.event,e.data.event_callback="webEventProxy",O.get(e)},jump:function(e){var t,n=O.status,o={TGP:O};try{if(null==window.top.TGP||null==window.top.TGP.status)return void(window.top.location.href=e.page)}catch(t){e.page.indexOf(g)<0&&(e.page=g+e.page.replace("//",""));var r=(new Date).getTime();return void window.top.postMessage(JSON.stringify({action:"jump",url:e.page+(-1===e.page.indexOf("?")?"?t="+r:"&t="+r)}),"*")}if(top.location===self.location){if("jumpView"===e.module);else if(!isNaN(e.app))if(e.app!=n.curMod)O.get({app:0,src:n.curMod,cmd:"jc_set_app_status",data:{game_id:isNaN(e.app)?n.curMod:e.app},success:function(t){var n=O.mList[e.app].name;t=t.data;e.page?(O.curJump.mid=e.app,O.curJump.page=e.page,O.curJump.params=e.params||{},O.curJump.web_st=t.web_st,O.curJump.uin=t.uin,O[n+"_navmenu"]?O.web.jumpModuleURI(O.curJump):(confUrl=g+"cdn.tgp.qq.com/"+n+"/conf/"+n+"_page_map.js?t="+Date.now(),i(confUrl,"UTF-8",window.tgp_jumpModuleURI))):O.web.jumpModulePage({mid:t.mid,url:t.url,web_st:t.web_st||"",uin:t.uin||""})},fail:function(t){O.web.jumpModulePage({mid:e.app,url:c(g+"plat.tgp.qq.com/platform/frames/building.html")}),console.log("jump fail : "+JSON.stringify(t))}});else if(o[e.app]){if(t=o[e.app].name,O.curJump.mid=e.app,O.curJump.page=e.page,O.curJump.params=e.params||{},O[t+"_navmenu"])O.web.jumpModuleURI(O.curJump);else i(g+"cdn.tgp.qq.com/"+t+"/conf/"+t+"_page_map.js?t="+Date.now(),"UTF-8",window.tgp_jumpModuleURI)}}else top.TGP.jump(e)},back:function(){try{if(null==top.TGP||null==top.TGP.status)return void window.history.go(-1)}catch(e){return void window.history.go(-1)}if(top.location==self.location){var e,t,n=O.status,o=n.refList;t=o.length,e=0==t?{mid:"55555",url:g+"plat.tgp.qq.com/center/index.html"}:o.pop(),n.curMod!=e.mid?O.get({app:0,src:0,cmd:"jc_set_app_status",data:{game_id:e.mid},success:function(t){e.web_st=t.web_st,e.uin=t.uin,setTimeout((function(){O.web.setMainFrame(e)}),100)},fail:function(e){console.log("goBack fail : "+JSON.stringify(e))}}):O.web.setMainFrame(e)}else top.TGP.back()},openVideo:function(e){y("TGP.openVideo","废弃方法，请替换为 TGP.openWindow，使用方法一样。"),O.openWindow(e)},openWindow:function(e){var t={type:"open_video",qblink:!0};for(var n in e)t[n]=e[n];return O.get({app:0,cmd:"open_inner_link",data:t,fail:function(){}})},openJdqsWindow:function(e,t,n,o){return s("X_JS_SDK",{module:"view_mgr",cmd:"open_popup_web_wnd",callback:"",seq_id:100,data:{id:1,width:n,height:o,title:t,url:e}})},set_wegame_cookie:function(e){y("TGP.set_wegame_cookie","请使用 setLoginCookie 替代"),O.setLoginCookie(e)},setLoginCookie:function(e,t){var n=_();if(!b(n)||t){var o=_((function(e){return l(e)}));if(b(o))return w(o),void setTimeout((function(){e&&e(o)}),0);var r=setTimeout((function(){e&&e(null)}),1e3),i="0";try{top.TGP&&top.TGP.status&&(i=top.TGP.status.curMod)}catch(e){}O.get({src:i,app:"0",cmd:"m_get_client_info",timeout:1e3,success:function(t){clearTimeout(r),t&&t.data?(w(t.data),e&&e(t.data)):e&&e(null)},fail:function(){clearTimeout(r),e&&e(null)}})}else setTimeout((function(){e&&e(n)}),0)},storage:{set:function(e){O.get({app:0,cmd:"jc_plugin_set_cfg",data:{module_id:e.module_id+""||"0",expire_time:e.expire_time||1e6,datas:e.datas},success:function(){},fail:function(){}})},get:function(e,t){O.get({app:0,cmd:"jc_plugin_get_cfg",data:{module_id:e.module_id+""||"0",keys:e.keys},success:function(e){"function"==typeof t&&t(e)},fail:function(e){"function"==typeof t&&t(e)}})},del:function(e){O.get({app:0,cmd:"jc_plugin_del_cfg",data:{module_id:e.module_id+""||"0",keys:e.keys},success:function(){},fail:function(){}})}},render:function(){},log:function(e){var t=0;if("string"==typeof e&&e.constructor==String&&(e={text:"[WEBLOG] "+e}),e.level=e.level||"3",o.isWeGame){try{window.top.TGP&&window.top.TGP.status&&(t=window.top.TGP.status.curMod)}catch(e){}e.filter=e.filter?t+"_"+e.filter:t,O.get({src:"0",app:"0",cmd:"tx_log",data:{level:e.level,filter:e.filter,text:e.text},success:function(e){console.log("log fail : "+JSON.stringify(e))},fail:function(e){console.log("WEB log fail : "+JSON.stringify(e))}})}else"undefined"!=typeof console&&"function"==typeof console.log&&console.log(e.text)},action:function(e,t,n){var o=arguments.length;if(0===o||1===o&&"function"==typeof e)return!document.__attach_tgp_action&&(document.addEventListener("click",(function(t){var n=t.target,o=n.dataset.tgpaction,r=n.dataset.windowtitle;if(o||(n=n.closest("[data-tgpaction]")),!n)return!1;o=n.dataset.tgpaction,r=n.dataset.windowtitle;try{var i=JSON.parse(o);if(/\bxTools\.exe/i.test(navigator.userAgent)||/\BattleCare\.exe/i.test(navigator.userAgent)){var a=c(window.location.protocol+"//plat.tgp.qq.com/video/zone/template-video.html"),s=c(window.location.protocol+"//plat.tgp.qq.com/video/video-player/index.html?gid="+i[1].appId+"&vid="+i[1].vid+"&from="+a);return O.openJdqsWindow(s,"视频",1080,630),document.__attach_tgp_action=!0,!0}O.action(i[0],i[1],r),"function"==typeof e&&e.call(n,i[0],i[1])}catch(t){console.warn("%cTGP.action","color:red;font-size:2em;","data-tgpaction设置的参数错误，请检查!")}}),!1),document.__attach_tgp_action=!0,!0);if(e*=1,t=t||{},isNaN(e))return console.error("TGP.action(actionId, params)的第一个参数actionId必须是Number");switch(e){case 100:R("os",t);break;case 101:R("tgp",t);break;case 102:R("multi_web",t);break;case 103:var r=[];for(var i in t){var a=t[i];r.push(i+"="+encodeURIComponent(a))}P(d=g+location.hostname+"/helper/pop-video-player/index.html?"+r.join("&"),t.width,t.height);break;case 105:P(t.url,t.width||800,t.height||600);break;case 110:if(!("vid"in t))return;"catagory"in t||(t.catagory=1);var s=t.appId||0,u=t.vid,l=t.from||encodeURIComponent(location.protocol+"//"+location.host+location.pathname)||"",f=c(g+"plat.tgp.qq.com/video/video-player/index.html?"),d=["gid="+s,"vid="+u],h=1080,v=630;switch(1*t.catagory){case 0:d.push("sourcetype=1");break;case 999:d.push("sourcetype=2");break;case 8:return void R("new",{url:location.origin+"/platform/feeds/detail.html?id="+u,use_ptlogin:"1"})}d.push("from="+l),P(d=f+d.join("&"),h,v,n);break;case 120:var y="";l="";"string"==typeof t?y=t:(y=t.liveId,l=t.from||""),m.openLivePlayer(y,l);break;case 121:var w=t.gameId,b=t.roomId,_=t.subRoomId,E=t.from||"";d=c(g+"plat.tgp.qq.com/tgpforum/video/index.html#!/live/room/"+w+"/"+b+"/"+_+"?from="+E);window.screen.height>900?(h=1028,v=900):(h=1034,v=626),P(d,h,v);break;case 122:s=t.gameId;var S=t.roomId;P(d=c(g+"plat.tgp.qq.com/live/selfroom/selfroom.html?game_id="+s+"&room_id="+S),1280,707);break;case 200:O.jump(t);break;case 301:x("jc_start_game",t)}function R(e,t){void 0===t&&(t={});var n=t.url,o=t.title,r=t.use_ptlogin,i=t.use_oauth,a=t.game_id,s=t.client_id,u=t.state,l="0";p(n)&&(l="1"),void 0!==r&&(l=r);var f={type:"open_web",browser:e,tgp_browser_type:"QBLink",url:c(n),title:o,use_ptlogin:l};"1"===i&&a&&s&&(f.use_oauth=i,f.game_id=a,f.client_id=s,u&&(f.state=u)),O.get({app:0,cmd:"open_inner_link",data:f,fail:function(){window.open(c(t.url),"TGPWindow")}})}function P(e,t,n,o){O.openWindow({url:e,width:t,height:n,title:o})}function x(e,t,n){O.get({app:0,cmd:e,data:t,fail:n||function(){}})}},monitorReport:function(e){var t,n=O.status;e&&!isNaN(e.key)&&(t={app_id:isNaN(e.app)?n.curMod:e.app,report_id:1*e.key,value:isNaN(e.value)?-1:1*e.value},O.get({app:0,cmd:"tgp_monitor_report",data:t,success:function(){},fail:function(){}}))},jumpMMOGDetail:function(e){return e&&e.params.game_id?16!=+e.page&&-1===e.page.indexOf("MMOG_detail.html")?O.jump(e):e.params?void O.get({app:"0",cmd:"m_query_game_info_by_id",data:{game_id_count:1,game_id_list:[e.params.game_id]},success:function(t){t&&t.data&&t.data.length>0&&1==+t.data[0].game_main_type&&(e.page=20),O.jump(e)},fail:function(){O.jump(e)}}):O.jump(e):O.jump(e)}};o.isBrowser&&(window.TGP=O),o.isWeGame&&window.addEventListener("message",(function(e){e&&e.data&&w(e.data)}),!1);var E={seq:1,executors:[]},S={},R=function(){};function P(e,t,n){E.executors.push({seq:++E.seq,fn:n||R}),s("call_service",{cmd:e,data:t,callback:"call_service_callback",custom_data:{seq:E.seq}})}function x(e,t){var n=!!S[e];S[e]=(S[e]||[]).concat(t),n||s("listen_broadcast",{cmd:e})}function T(e,t){s("send_broadcast",{cmd:e,data:t||{}})}function j(e,t){S[e]&&(S[e]=void 0!==t?S[e].filter((function(e){return e===t})):[])}function C(e,t){if("undefined"!=typeof window){var n=window[e];window[e]="function"==typeof n?function(){for(var e=[],o=arguments.length;o--;)e[o]=arguments[o];n.apply(window,e),t.apply(window,e)}:t}}C("on_comm_center_call_back",(function(e,t,n){if(0!==n.length)try{var o=t&&t.length?JSON.parse(t):{},r=~~JSON.parse(n).seq;E.executors=E.executors.filter((function(e){var t=e.seq===r;return t&&e.fn.call(null,o),!t}))}catch(e){}})),C("on_comm_center_broadcast",(function(e,t){var n=S[e];if(n&&n.length){var o=t&&t.length?JSON.parse(t):{};n.forEach((function(e){e(o)}))}}));var L=P,k=x,q=T,I=j,A=Object.freeze({call:P,listen:x,broadcast:T,unlisten:j,call_service:L,listen_broadcast:k,send_broadcast:q,remove_listen:I}),D=null,M=null,B=null;var U=Object.freeze({isWeGameX:function(){return a.isOversea},isOversea:function(){return a.isOversea},queryTgpIsNetBar:function(e,t){return new Promise((function(n,o){return void 0!==D&&null!=D&&void 0!==B&&null!=B?(e&&e({isNetBar:D}),e&&e({bar_id:B}),void n({isNetBar:D,bar_id:B})):top&&top.TGP&&top.TGP.status&&top.TGP.status.isNetbar&&top.TGP.status.barID?(D=top.TGP.status.isNetbar,B=top.TGP.status.barID,e&&e({isNetBar:D}),e&&e({bar_id:B}),void n({isNetBar:D,bar_id:B})):void(O&&O.get?O.get({app:"0",cmd:"m_get_client_info",success:function(r){r&&0==r.retCode&&r.data?(r=r.data,D=r.is_netbar,B=r.bar_id,e&&e({isNetBar:D}),n({isNetBar:D,bar_id:B})):(t&&t(r),o(r))},fail:function(e){t&&t(e),o(e)}}):(console.log("queryTgpIsNetBar: TGP error"),t&&t(),o()))}))},queryTgpLanguage:function(e,t){return new Promise((function(n,o){return void 0!==M&&null!=M?(e&&e({language:M}),void n({language:M})):top&&top.TGP&&top.TGP.status&&top.TGP.status.language?(M=top.TGP.status.language,e&&e({language:M}),void n({language:M})):void(A&&P?P("i_service_get_client_env",{},(function(r){r&&r.language?(M=r.language,e&&e({language:M}),n({language:M})):(t&&t(r),o(r))})):(console.log("queryTgpLanguage: comm_center error"),t&&t(),o()))}))}});function G(e,t){var n={method:e,data:t};try{var o=JSON.stringify(n);window.external.callcpp("RailCrossJavascriptEvent",o)}catch(e){}}var F,W=Object.freeze({railCrossCloseWebWindow:function(){G("RailCrossMethodCloseWebWindow","")},crossInvoke:function(e,t){if(void 0===t&&(t={}),null==e||""===e)return!1;G(e,t)}}),H=null;function $(e){var t={};if(e&&0===e.retCode&&e.data){if(t=e.data,void 0!==e.data.is_wow64&&(t.isClientCanGetCpuBits=!0,!0===e.data.is_wow64&&(t.userClientCpuBits=64)),e.data.sys_name&&e.data.sys_name.length){var n=e.data.sys_name.split("-");n.length>1&&(t.isClientCanGetSysVersion=!0,t.isClientCanGetCpuBits=!0,t.userClientSysVersion=n[0],t.userClientCpuBits=n[n.length-1])}}else{var o=navigator.userAgent.match(/windows nt ([\d.]+)/i),r=navigator.userAgent.match(/(wow64|win64)/i);o&&(t.isClientCanGetSysVersion=!0,t.userClientSysVersion={"4.0":"winnt4.0","5.0":"win2000",5.1:"winxp",5.2:"server2003","6.0":"vista",6.1:"win7",6.2:"win8",6.3:"win8",6.4:"win10","10.0":"win10"}[o[1]]),r?(t.isClientCanGetCpuBits=!0,t.userClientCpuBits="64"):o&&(t.isClientCanGetCpuBits=!0,t.userClientCpuBits="32")}return t}function J(){return o.isWeGameIndependent||o.isWeGameMainTop?H||(H=new Promise((function(e){var t=setTimeout((function(){e($())}),1e3);O.get({app:"0",cmd:"m_get_client_info",data:{},success:function(n){void 0===n&&(n={}),clearTimeout(t),e($(n))},fail:function(){return clearTimeout(t),Promise.resolve($())}})}))):Promise.resolve($())}function V(e){document.cookie="language="+e+";path=/;domain="+(window.location.hostname.indexOf("tgp.qq.com")>=0?"tgp.qq.com":window.location.hostname)}var Q=Object.freeze({getClientInfo:J,callRailCpp:function(e,t,n,r){return new Promise((function(i){o.isInClient?(t.func_name=e,O.get({app:"888",src:"50000013",cmd:"rail_web_req",timeout:2e3,data:t,success:function(e){"function"==typeof n&&n(e),i(e)},fail:function(e){"function"==typeof r&&r(e),i({})}})):i({})}))},getLanguage:function(){if(F)return F;var e=l("language")||l("lang");if(e)return V(e),F=Promise.resolve(e);var t=r.get("language");return F=t?Promise.resolve(t):J().then((function(e){if(null==e)return"zh_CN";var t=e.language||"zh_CN";return V(t),t}))},setLanguage:function(e){V(e),F=Promise.resolve(e)}});t.tgp=O,t.env=U,t.cross=W,t.service=A,t.live=m,t.client=Q})),An=r(Nn),Dn=(Nn.tgp,Nn.env,Nn.cross,Nn.service,Nn.live,Nn.client,r(i((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n,o=["qq.com","wegame.com","wegame.com.cn","tencent.com"],r="";function i(e){"string"==typeof e&&(e={url:e});var t=e.url,i=e.appid,s=void 0===i?50000014:i,c=e.newWindow,u=void 0!==c&&c,l=e.checkExternal,f=void 0===l||l,p=e.withPtlogin,d=void 0!==p&&p,m=t?function(e){(n=n||document.createElement("a")).href=e,!/^(https?:)?\/\//.test(e)&&r&&(n.host=r);var t=n.href,o=new URLSearchParams(n.search);return{url:t,params:Array.from(o.entries()).reduce((function(e,t){return e[t[0]]=t[1],e}),{}),host:n.host,pathname:n.pathname,hash:n.hash}}(t):{host:location.host,url:""},g=m.host,h=m.url;if(a.isWeGame)if(u){var v=f&&(y=g,!o.some((function(e){if(y===e)return!0;var t="."+e;return y.slice(-t.length)===t})))?"https://"+window.location.host+"/external-link/?target="+encodeURIComponent(h):h;Nn.tgp.action(102,{url:v,use_ptlogin:d?"1":"0"},"")}else{var y;a.isWeGameMain?Nn.tgp.jump({app:""+s,page:h}):Nn.service.call("i_service_open_page",{page_info:{id:""+s,url:h}},(function(){}))}else{if(!h)return;if(!u)return void(window.location.href=h);var w=window.open();w&&(w.opener=null,w.location.href=h)}}i.setRedirectHost=function(e){r=e,window.FEEDS_REDIRECT_HOST=e},t.default=i})))),Mn=i((function(e,t){var n,r=o&&o.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setupOptions=t.getLoginUser=void 0;var s=i(N),c={checkLoginUrl:"/api/forum/lua/tgpforum_auth_svr/checklogin"},u=function(e){function t(){var t=e.call(this,"exception model")||this;return t.error="exception model",t.exception=!0,t}return r(t,e),t}(Error);t.getLoginUser=function(e,t){if(a.isWeGameMain)try{if(window.top.window.TGP.status)if(!!window.top.window.TGP.status.exception)return Promise.reject(new u)}catch(e){}else if(a.isWeGame){var n=sessionStorage.getItem("wg-abnormal_model");if(n)try{if(JSON.parse(n).is_svr_exception_mode)return Promise.reject(new u)}catch(e){}}var o={agent_client_type:1,t:Date.now()};return e&&(o.from_src=e),it.baseRequest({url:c.checkLoginUrl,method:"get",withCredentials:a.isBrowser,params:o,cookies:t}).then((function(e){if(1!==e.result||!e.data)throw e;var t=e.data;return a.isBrowser&&(s.default.set("client_type",1..toString()),s.default.set("region",t.personal_home_region||"")),t}))},t.setupOptions=function(e){return Object.assign(c,e)}}));r(Mn);Mn.setupOptions,Mn.getLoginUser;var Bn,Un=(Bn=se)&&Bn.default||Bn,Gn=i((function(e,t){var n,r=o&&o.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),i=o&&o.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},s=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Auth=t.OnlySupportInBrowserError=void 0;var c,u,l=s(Un),f=s(ce);var p=function(e){function t(t){return e.call(this,"Method "+(t?"":'"'+t+'" ')+"only support in browser.")||this}return r(t,e),t}(Error);function d(){if(!a.isBrowser)throw new p;return u||(e=["/middle/login/login.sdk.js"],window.Vue||e.unshift("https://wegame.gtimg.com/g.55555-r.c4663/lib/vue/2.6.10/vue.min.js"),u=f.default(e,{returnPromise:!0,async:!1}).then((function(){var e;return e=window.WegameLogin||window.WeGameLogin,c=e.default?e.default:e})));var e}t.OnlySupportInBrowserError=p;var m=null,g=function(){function e(){this.options={},this.emitter=l.default(),this.options={}}return e.getLoginUser=function(e){return a.isBrowser?m||(m=Mn.getLoginUser(null,e)):Mn.getLoginUser(null,e)},e.getLoginUserTgpId=function(t){return e.getLoginUser(t).then((function(e){return e.tgpid?e.tgpid.toString():""}))},e.checkLogin=function(t){return e.getLoginUser(t).then((function(){return!0})).catch((function(){return!1}))},e.prototype.emit=function(e,t){this.emitter.emit(e,t)},e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e.prototype.setOptions=function(e){var t=this;return void 0===e&&(e={}),this.options=i(i({},this.options),{options:e}),d().then((function(){return c.setOptions(t.options)}))},e.prototype.login=function(e){var t=this;return d().then((function(){e?c.mount(e,Object.assign({},t.options,{popup:!1})):c.popup(),c.onReady((function(){return t.emit("ready")})),c.onLogin((function(e){return t.emit("login",e)})),c.onLogout((function(){return t.emit("logout")}))}))},e.prototype.logout=function(){return d().then((function(){return c.logout()}))},e.prototype.cancel=function(){return d().then((function(){return c.popdown()}))},e.prototype.checkAndLogin=function(t){var n=this;return e.getLoginUser().catch((function(){n.login(t)}))},e}();t.Auth=g}));r(Gn);Gn.Auth,Gn.OnlySupportInBrowserError;var Fn=i((function(e,t){var n=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.queryTgpId=t.checkAndLogin=t.checkLogin=t.isTourist=t.setOption=t.loginInSite=t.getLoginUser=t.isLogin=t.getTgpId=t.cancel=t.logout=t.login=t.off=t.on=t.Auth=void 0;var r=n(N);Object.defineProperty(t,"Auth",{enumerable:!0,get:function(){return Gn.Auth}});var i=new Gn.Auth;function s(e){return e?i.setOptions({s_url:location.protocol+"//"+location.host+"/rail/logincallback.html",pt_no_auth:1,target:"self",reflush:!0}):i.setOptions({s_url:location.href,pt_no_auth:1}),i.login(e)}function c(e){if("string"==typeof e||e instanceof HTMLElement||!e)return s(e);var t=e.domAppendTo,n=e.disableLoginInClient,o=void 0!==n&&n,r=e.fallback;return a.isWeGame||!o?s(t):r?Promise.resolve(r()):void 0}function u(){return i.cancel()}a.isBrowser&&(window.LoginedCallback=function(){h().then((function(){i.emit("login")}))},window.ptlogin2_onClose=function(){u()},window.UnloginCallback=function(){i.emit("logout")}),t.on=function(e,t){i.on(e,t)},t.off=function(e,t){i.off(e,t)},t.login=c,t.logout=function(){return i.logout()},t.cancel=u;var l=["undefined","0",void 0,null];function f(e){var t=a.isBrowser?r.default.get("tgp_id"):null==e?void 0:e.tgp_id;return l.indexOf(t)>=0?"":t}function p(e){return!!f(e)}function d(e){return Gn.Auth.getLoginUser(e)}function m(e){var t=f(e);return a.isBrowser?t&&a.isWeGame?Promise.resolve({ID:t}):new Promise((function(n){if(a.isWeGame)Nn.tgp.setLoginCookie((function(e){(null==e?void 0:e.tgp_id)?(null==e?void 0:e.tgp_id)&&(null==e?void 0:e.tgp_biz_ticket)&&n({ID:String(e.tgp_id)}):n({}),n({})}));else{if(t)return d(e).then((function(e){n(e.tgpid?{ID:e.tgpid}:{})})).catch((function(){n({})}));n({})}})):Promise.resolve(t?{ID:t}:{})}t.getTgpId=f,t.isLogin=p,t.getLoginUser=d,t.loginInSite=function(e){return c({disableLoginInClient:!0,fallback:e})},t.setOption=function(e,t){var n;i.setOptions(((n={})[e]=t,n))},t.isTourist=function(){return!!(a.isWeGame&&window.AbnormalModel&&window.AbnormalModel.checkSession().is_svr_exception_mode)||!p()},t.checkLogin=function(){return Gn.Auth.checkLogin()},t.checkAndLogin=function(e){return i.setOptions({s_url:location.href,pt_no_auth:1}),i.checkAndLogin(e)};var g=null;function h(e){return a.isBrowser?g||(g=m(e)):m(e)}t.queryTgpId=h})),Wn=r(Fn),Hn=Fn.queryTgpId,$n=Fn.checkAndLogin,Jn=Fn.checkLogin,Vn=Fn.isTourist,Qn=Fn.setOption,zn=Fn.loginInSite,Xn=Fn.getLoginUser,Kn=Fn.isLogin,Yn=Fn.getTgpId,Zn=Fn.cancel,eo=Fn.logout,to=Fn.login,no=Fn.off,oo=Fn.on,ro=Fn.Auth,io=Object.freeze({__proto__:null,default:Wn,__moduleExports:Fn,queryTgpId:Hn,checkAndLogin:$n,checkLogin:Jn,isTourist:Vn,setOption:Qn,loginInSite:zn,getLoginUser:Xn,isLogin:Kn,getTgpId:Yn,cancel:Zn,logout:eo,login:to,off:no,on:oo,Auth:ro});return"undefined"!=typeof window&&(window.WeLibBaseRequest=mt,window.WeLibReport=In),t(t({__VERSION__:"0.8.37"},ue),{},{env:I,baseRequest:mt,report:In,login:io,jsbridge:An,variableCase:Ke,redirect:Dn})}();
