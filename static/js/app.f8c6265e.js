import{j as Y,f as Z,V as J}from"./vendor.b66eaa45.js";import{onMounted as b,ref as g,nextTick as Q,defineComponent as X,computed as D,openBlock as L,createElementBlock as T,createElementVNode as t,normalizeClass as I,Fragment as x,renderList as ee,toDisplayString as c}from"https://wegame.gtimg.com/g.55555-r.c4663/lib/vue/3.4.31/dist/vue.runtime.esm-browser.prod.js";const oe=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function l(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=l(n);fetch(n.href,a)}};oe();var ne={homeTitle:"\u9996\u9875",storeTitle:"\u5546\u5E97",testTitle:"\u5148\u950B\u6D4B\u8BD5",clientTitle:"\u5BA2\u6237\u7AEF",wingsTitle:"\u7FFC\u8BA1\u5212",developerPlatform:"\u5F00\u53D1\u8005\u5E73\u53F0",developerFormalGame:"\u6B63\u5F0F\u53D1\u884C\u6E38\u620F",developerTestGame:"\u5148\u950B\u6D4B\u8BD5\u6E38\u620F",downloadPcClient:"\u4E0B\u8F7D\u5BA2\u6237\u7AEF",downloadMacClient:"\u4E0B\u8F7DMac\u7248",logout:"\u6CE8\u9500",changelog:"\u66F4\u65B0\u65E5\u5FD7",feedback:"\u5E2E\u52A9\u4E0E\u53CD\u9988",login:"\u767B\u5F55",macDownloadTips:"\u8BF7\u6839\u636EMac\u82AF\u7247\u9009\u62E9\u5BF9\u5E94\u7248\u672C",interVersion:"\u4E0B\u8F7D Intel \u7248",m1Version:"\u4E0B\u8F7D M1 \u7248",macVersionTips:"\u5DE6\u4E0A\u89D2\u82F9\u679C\u56FE\u6807-\u5173\u4E8E\u672C\u673A-\u5904\u7406\u5668",chipType:"\u53EF\u67E5\u770B\u82AF\u7247\u7C7B\u578B"},te={homeTitle:"\u9996\u9801",storeTitle:"\u5546\u5E97",testTitle:"\u5148\u92D2\u6E2C\u8A66",clientTitle:"\u5BA2\u6236\u7AEF",wingsTitle:"\u7FFC\u8A08\u5283",developerPlatform:"\u958B\u767C\u8005\u5E73\u53F0",developerFormalGame:"\u6B63\u5F0F\u767C\u884C\u904A\u6232",developerTestGame:"\u5148\u92D2\u6E2C\u8A66\u904A\u6232",downloadPcClient:"\u4E0B\u8F09\u5BA2\u6236\u7AEF",downloadMacClient:"\u4E0B\u8F09Mac\u7248",logout:"\u8A3B\u92B7",changelog:"\u66F4\u65B0\u65E5\u8A8C",feedback:"\u5E6B\u52A9\u8207\u53CD\u994B",login:"\u767B\u9304",macDownloadTips:"\u8ACB\u6839\u64DAMac\u82AF\u7247\u9078\u64C7\u5C0D\u61C9\u7248\u672C",interVersion:"\u4E0B\u8F09 Intel \u7248",m1Version:"\u4E0B\u8F09 M1 \u7248",macVersionTips:"\u5DE6\u4E0A\u89D2\u860B\u679C\u5716\u6A19-\u95DC\u65BC\u672C\u6A5F-\u8655\u7406\u5668",chipType:"\u53EF\u67E5\u770B\u82AF\u7247\u985E\u578B"},se={homeTitle:"Home",storeTitle:"Store",testTitle:"Test",clientTitle:"Client",wingsTitle:"Wings",developerPlatform:"WeGameDeveloper",developerFormalGame:"Game Publishing",developerTestGame:"Game Testing",downloadPcClient:"Download",downloadMacClient:"Download",logout:"Sign out",changelog:"Change Log",feedback:"Feedback",login:"Login",macDownloadTips:"Select the version proper for your Mac CPU.",interVersion:"Download Intel version",m1Version:"Download M1 version",macVersionTips:"Click the Apple icon on the top left corner - About This Mac - Processor",chipType:"You can find the processor type here"};const G={zh_CN:ne,zh_HK:te,en_US:se},S=Y.exports.get("language");function le({locale:e,fallbackLocale:o,messages:l}){let i=e;return{$t:n=>{const a=l[i],s=l[o];return a[n]||s[n]},set locale(n){i=n},get locale(){return i},install(n){n.config.globalProperties.$t=this.$t}}}const k=le({locale:S&&G[S]?S:"zh_CN",fallbackLocale:"zh_CN",messages:G}),ie="WIDGET_HEADER_UPDATE";function ae(){const e=[{name:k.$t("homeTitle"),id:"header-home",link:"/home",reg:/^\/home/},{name:k.$t("storeTitle"),id:"header-store",link:"/store",reg:/^\/(((store)|(rail))(\/(?!(wegame_test_index|launcher.html)).*)?)?$/},{name:k.$t("testTitle"),id:"header-test",link:"/rail/wegame_test_index.html",reg:/wegame_test_index/}];return b(()=>{e.some(o=>{o.reg.test(location.pathname)&&document.getElementById(o.id).classList.add("cur")}),window.addEventListener("message",({data:o})=>{if(o&&o.type===ie){const l=document.querySelector(".wgnav-item.cur");l&&l.classList.remove("cur");const i=document.getElementById(o.targetId);i&&i.classList.add("cur")}})}),{navs:e}}const N="wgheader--mini",R="wgnav-show",U="wgnav-hide";function re(){const e=g([]),o=()=>{e.value.indexOf(R)===-1?(e.value=e.value.filter(l=>l!==U),e.value.push(R)):(e.value=e.value.filter(l=>l!==R),e.value.push(U))};return b(()=>{window.addEventListener("scroll",()=>{const l=document.documentElement.scrollTop||document.body.scrollTop||window.scrollY;l>76&&e.value.indexOf(N)===-1?e.value.push(N):l<=76&&(e.value=e.value.filter(i=>i!==N))},{passive:!0})}),{classes:e,handleMobileNavClick:o}}const W={};function H(e){return W[e]===!0?Promise.resolve():new Promise((o,l)=>{const i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.onload=()=>{W[e]=!0,o(),n.onload=n.onerror=null},n.onerror=()=>{l(),n.onload=n.onerror=null},n.async=1,n.src=e,i.insertBefore(n,i.lastChild)})}const F="https://wegame.gtimg.com/g.55555-r.c4663/rail/images/avatar-60.e58e01c3.png";function ce({loginOptions:e,lang:o}){const l=g(!1),i=g(""),n=g(F),a=g("");let s;const _=()=>{s&&s.logout()},w=()=>{s&&s.popup()},C=d=>{l.value=!0,i.value=d.tgp_id,n.value=d.faceurl||F,a.value=d.nick},v=g(!1),h=()=>{v.value||(v.value=!0)},f=()=>{v.value&&(v.value=!1)},E=()=>{document.body.addEventListener("click",f),document.getElementById("wglogin-box").addEventListener("click",d=>{d.stopPropagation()})};return b(async()=>{var d,y;await H("//wegame.gtimg.com/g.55555-r.c4663/lib/vue/2.6.10/vue.min.js"),await H(`//${location.host}/middle/login/login.sdk.js`),!!((y=(d=window.WegameLogin)==null?void 0:d.default)==null?void 0:y.readyPromise)&&window.WegameLogin.default.onReady(()=>{window.postMessage({cmd:"updateWebStatus","widget-header-ready":1},"*"),window.addEventListener("message",p=>{if(p&&p.data=="wegame_login_finish"){let $=s.getUserInfo();C($)}}),s=window.WegameLogin.default,s.setOptions(e),o&&s.setLang(o),s.onLogout(()=>{l.value=!1,i.value=""}),s.onLogin(p=>{C(p)}),s.onCheckLogin(p=>{C(p),Q(E)})})}),{showMenuClass:v,handleClickLoginPopup:h,isLogin:l,tgpid:i,avatar:n,nick:a,login:w,logout:_}}function de(){const e=window.homeConfigRequester;if(e)return e;const o=Z({data_names:"wegame_home_configs"}).then(l=>(l==null?void 0:l.items)||[]).catch(()=>[]);return window.homeConfigRequester=o,o}function ue(){const e=g(null);return b(()=>{de().then(o=>{const l=o.reduce((n,a)=>(n[a.name]=JSON.parse(a.value),n),{}),i=sessionStorage.getItem("promote_id")||"";if(i&&l.promoters&&l.promoters[i]){const n=l.promoters[i];l.downloadUrl=n,l.new_downloads&&l.new_downloads.length&&l.new_downloads.forEach(a=>{a.type==="pc"&&(a.url=n)})}e.value=l})}),{configData:e}}var pe=(e,o)=>{const l=e.__vccOpts||e;for(const[i,n]of o)l[i]=n;return l};const ge=k.locale,j=k.$t;let A="",O=!1;const me=X({setup(){const{navs:e}=ae(),{classes:o,handleMobileNavClick:l}=re(),{tgpid:i,isLogin:n,login:a,logout:s,avatar:_,nick:w,showMenuClass:C,handleClickLoginPopup:v}=ce({loginOptions:{reflush:!0,popup:!0,biz:!0},lang:ge}),{configData:h}=ue(),f=g(!1),E=g(""),d=D(()=>/macintosh|mac os x/i.test(E.value)),y=D(()=>d.value?j("downloadMacClient"):j("downloadPcClient")),p=D(()=>{const r=h.value&&h.value.downloadUrl,u=h.value&&h.value.new_downloads||[];if(u.length){const P={};return u.forEach(M=>{M.type==="pc"?P.pc=M.url||r:(P.mac_intel=M.url.mac_intel||r,P.mac_m=M.url.mac_m||r)}),P}return{pc:r,mac_intel:r,mac_m:r}});let $;b(()=>{A=sessionStorage.getItem("promote_id")||"",O=sessionStorage.getItem("promote_in_client")==="1",$=WeLibReport.init({main:"fragments",sub:"wegame_header",keys:["block","action","ext1","ext2"]}),document.body.addEventListener("click",V),document.getElementById("header-mac-popup").addEventListener("click",r=>{r.stopPropagation()}),E.value=navigator.userAgent,d.value?m("show","mac-env"):m("show","pc-env")});const m=(r,u)=>{$([r,u])},q=()=>{a(),m("login","click")},z=()=>{s(),m("logout","click")},K=()=>{d.value?(setTimeout(()=>{f.value=!0},0),m("download-client","mac-click")):(O?window.open(`/store/launcher.html?promote=${A}&action=download`):B("pc"),m("download-client","pc-click"))},V=()=>{f.value=!1},B=r=>{const u=document.createElement("a");u.id="expertFile",u.href=p.value[r],document.body.appendChild(u),u.click(),document.body.removeChild(u),f.value=!1,m("to-download",r)};return{showMenuClass:C,handleClickLoginPopup:v,navs:e,classes:o,handleMobileNavClick:l,tgpid:i,avatar:_,nick:w,isLogin:n,handleLogin:q,handleLogout:z,clickDownload:K,closePopbox:V,downloadInstallPkg:B,downloadBtnText:y,downloadUrls:p,showPopbox:f,doReport:m,navLinkClick:(r,u)=>{r.id==="header-client"&&O&&(u.preventDefault(),window.open(`${r.link}?promote=${A}`))}}}}),ve={class:"pages"},we={class:"wgheader-inner"},he={class:"wgheader-hd"},fe={class:"wgheader-bd"},ke=t("span",{class:"wgnav-popup-btn-icon"},null,-1),_e=[ke],Ce={class:"wgnav-popup"},be={class:"wgnav"},Le=["onClick","id"],Te=["href","onClick"],Ee={class:"wgnav-item wgnav-item--dropmenu"},ye={href:"javascript:void(0);",class:"wgnav-link"},$e={class:"wgnav-dropmenu"},Pe={class:"wgnav-dropmenu-list"},Me={class:"wgnav-dropmenu-item"},De={class:"wgnav-dropmenu-item"},Ie={class:"wgheader-ft"},Se={class:"widget-feedback"},Ne=["title"],Re={class:"widget-feedback"},Ae=["title"],Oe=t("i",{class:"wgheader-download-row"},null,-1),Ve={class:"mac-popup-box"},Be={class:"mac-popup-tit"},Ge={class:"mac-popup-tips"},Ue={class:"mac-popup-tips-item"},We={class:"mac-popup-tips-item"},He=t("span",{class:"btn-wglogin"},null,-1),Fe={class:"btn-wglogin-text"},je=["src"],qe={class:"wgpopup"},ze={class:"wgpopup-inner"},Ke={class:"wgpopup-menu-item"},Ye={class:"wglogin-txt"};function Ze(e,o,l,i,n,a){return L(),T("div",ve,[t("div",{class:I(["widget-wgheader wgheader",e.classes])},[t("div",we,[t("div",he,[t("a",{href:"/home",onClick:o[0]||(o[0]=s=>e.doReport("icon","click")),class:"wgheader-logo"},"WeGame")]),t("div",fe,[t("div",{class:"wgnav-popup-btn",onClick:o[1]||(o[1]=(...s)=>e.handleMobileNavClick&&e.handleMobileNavClick(...s))},_e),t("div",Ce,[t("ul",be,[(L(!0),T(x,null,ee(e.navs,(s,_)=>(L(),T("li",{class:"wgnav-item",onClick:w=>e.doReport(s.id,"click"),id:s.id,key:_},[t("a",{href:s.link,class:"wgnav-link",onClick:w=>e.navLinkClick(s,w)},c(s.name),9,Te)],8,Le))),128)),t("li",Ee,[t("a",ye,c(e.$t("developerPlatform")),1),t("div",$e,[t("ul",Pe,[t("li",Me,[t("a",{href:"https://developer.wegame.com",onClick:o[2]||(o[2]=s=>e.doReport("developer-index","click")),target:"_blank",class:"wgnav-dropmenu-link"},c(e.$t("developerFormalGame")),1)]),t("li",De,[t("a",{href:"https://developer.wegame.com/service/test-area.html",onClick:o[3]||(o[3]=s=>e.doReport("developer-test","click")),target:"_blank",class:"wgnav-dropmenu-link"},c(e.$t("developerTestGame")),1)])])])])])])]),t("div",Ie,[t("div",Se,[t("a",{href:"/client/changelog",onClick:o[4]||(o[4]=s=>e.doReport("changelog","click")),class:"widget-feedback-btn btn-version",title:e.$t("changelog")},null,8,Ne)]),t("div",Re,[t("a",{href:"/feedback",onClick:o[5]||(o[5]=s=>e.doReport("feedback","click")),class:"widget-feedback-btn btn-feedback",title:e.$t("feedback")},null,8,Ae)]),t("a",{href:"javascript:void(0)",onClick:o[6]||(o[6]=(...s)=>e.clickDownload&&e.clickDownload(...s)),class:"wgheader-download"},[Oe,t("span",null,c(e.downloadBtnText),1)]),t("div",{id:"header-mac-popup",class:I(["mac-popup mac-popup--bottom",{show:e.showPopbox}])},[t("div",Ve,[t("h3",Be,c(e.$t("macDownloadTips")),1),t("div",{class:"mac-popup-button",onClick:o[7]||(o[7]=s=>e.downloadInstallPkg("mac_intel"))},[t("span",null,c(e.$t("interVersion")),1)]),t("div",{class:"mac-popup-button",onClick:o[8]||(o[8]=s=>e.downloadInstallPkg("mac_m"))},[t("span",null,c(e.$t("m1Version")),1)]),t("p",Ge,[t("span",Ue,c(e.$t("macVersionTips")),1),t("span",We,c(e.$t("chipType")),1)])])],2),e.isLogin?(L(),T("div",{key:1,class:I(["wglogin wglogin-user",{"show-menu":e.showMenuClass}]),id:"wglogin-box"},[t("p",{class:"wglogin-figure",onClick:o[10]||(o[10]=(...s)=>e.handleClickLoginPopup&&e.handleClickLoginPopup(...s))},[t("img",{src:e.avatar},null,8,je)]),t("div",qe,[t("div",ze,[t("p",Ke,[t("span",Ye,c(e.nick),1),t("span",{class:"wglogin-btn",onClick:o[11]||(o[11]=(...s)=>e.handleLogout&&e.handleLogout(...s))},c(e.$t("logout")),1)])])])],2)):(L(),T("div",{key:0,class:"wglogin",onClick:o[9]||(o[9]=(...s)=>e.handleLogin&&e.handleLogin(...s))},[He,t("span",Fe,c(e.$t("login")),1)]))])])],2)])}var Je=pe(me,[["render",Ze]]);J(Je,({app:e})=>{e.use(k)},{useHead:!1,rootContainer:"#widget-header"});
