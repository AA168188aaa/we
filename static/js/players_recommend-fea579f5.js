import"./day-6b123b17.js";import{defineComponent as q,ref as c,reactive as z,computed as w,onMounted as F,onUnmounted as x,openBlock as o,createElementBlock as r,Fragment as b,createElementVNode as s,unref as m,normalizeStyle as H,createCommentVNode as L,createBlock as v,createVNode as u,withCtx as E,renderList as U,createTextVNode as j,toDisplayString as K,createApp as Z}from"https://wegame.gtimg.com/g.55555-r.c4663/lib/vue/3.4.31/dist/vue.runtime.esm-browser.prod.js";import{u as J,r as A,g as Q,a as D,b as X,P as Y,_ as ee,c as te,d as se,e as oe,f as ae,i as ne}from"./page-skeleton-9f5a1121.js";/* empty css              */import{m as le,G as ie}from"./index-d0ff06a1.js";import{r as ce}from"./page-name-cce4340b.js";import{m as re,f as ue}from"./index-8c5d872e.js";import{$ as de,t as me}from"./page-duration-a38fd991.js";import"./index-39e3f628.js";const pe="https://wegame.gtimg.com/g.55555-r.c4663/store/assets/new-detailstwo-ee430344.png",ge="https://wegame.gtimg.com/g.55555-r.c4663/store/assets/logo-title-dark-930a4b6d.png",_e="https://wegame.gtimg.com/g.55555-r.c4663/store/assets/logo-title-684cf847.png";const ve={class:"we-frame-inner page-pcgame"},fe={class:"conttype-kv"},he={class:"conttype-kv-box"},ye=s("div",{class:"conttype-kv-pic"},[s("img",{src:pe,alt:""})],-1),ke=s("div",{class:"conttype-kv-mask"},null,-1),we={class:"page-scroll-wrap"},be={class:"section-conttypedetail"},Le={class:"section-contty-infos"},Ee={key:0,class:"we-image we-image--square section-contty-infos-logo"},Ce=["alt"],Me={key:1,class:"we-image we-image--square section-contty-infos-logo"},Se=["alt"],Pe={class:"buptui-list"},f=window.WEGAME.env.isWeGameMain,$e=window.WEGAME.report.report,C=10,Ne=500,G="playersrec-nav-status",Ve=q({__name:"App",setup(h){const n=c(null),y=c([]),M=c(null),l=z({cur:0,total:0}),S=w(()=>l.cur*C<l.total),T=w(()=>n.value?.map(e=>e.cid)||[]),P=c(!1),d=c(!1),B=()=>f?document.querySelector("#scroll-element"):window,k=c(0),$=w(()=>k.value>0?1:0);let i=null,p=null;const N=de(()=>{k.value=i?.scrollTop||0,k.value>Ne?i?.classList.add(G):i?.classList.remove(G)},100,{leading:!1});F(()=>{f&&(i=document.querySelector("#scroll-element"),i?.addEventListener("scroll",N),O()),me(({duration:e,scrollTop:a,type:t})=>{$e?.reportEvent("page_duration",{block:"players_recommend",duration:e,scroll_top:a,type:t},{sendBeacon:!0})})}),x(()=>{f&&(i?.removeEventListener("scroll",N),p?.disconnect())}),R(),J(),A(["pv"]);let g={};function V(e){if(e.content_list.length){const a=e.content_list.filter(t=>!g[t.cid]&&!T.value.includes(t.cid));y.value=[...y.value,...a],g=e.content_list.reduce((t,_)=>(g[_.cid]=1,t),g)}e.total_size&&(l.total=e.total_size),l.cur+=1,d.value=!1}async function R(){d.value=!0;const[e,a,t]=await Promise.all([Q(),D(l.cur,C),X()]);P.value=!0,n.value=e,M.value=t,V(a)}async function W(){if(!S.value)return;d.value=!0;const e=await D(l.cur,C);V(e),A(["load_more",l.cur])}function I(e){const a=e.target,{classList:t}=document.documentElement;if(!(!t.contains("theme-cn-light")||e.oldValue===a.className)){if(a.classList.contains("mini-menu")){t.remove("menu-light"),t.add("menu-dark");return}t.remove("menu-dark"),t.add("menu-light")}}function O(){p||(p=new MutationObserver(e=>e.forEach(I)),p.observe(document.body,{attributeFilter:["class"],attributeOldValue:!0}))}return(e,a)=>(o(),r(b,null,[s("div",ve,[s("div",fe,[s("div",he,[ye,ke,m(f)?(o(),r("div",{key:0,class:"conttype-kv-clientbg",style:H("opacity:"+$.value)},null,4)):L("",!0)])]),s("div",we,[s("div",be,[s("div",Le,[$.value===1?(o(),r("div",Ee,[s("img",{src:ge,alt:e.$t("title"),class:"we-image-figure"},null,8,Ce)])):(o(),r("div",Me,[s("img",{src:_e,alt:e.$t("title"),class:"we-image-figure"},null,8,Se)]))]),P.value?(o(),r(b,{key:1},[u(ee,{items:n.value},null,8,["items"]),u(te,{"rank-data":M.value},null,8,["rank-data"]),u(m(ce),{class:"panel-buptuilist",title:e.$t("feedsListTitle")},{default:E(()=>[s("div",Pe,[u(m(le),{width:1e3,"col-gap":20,"row-gap":20,cols:2,virtualize:!0,"scroll-container":B,onReachBottom:W},{default:E(()=>[(o(!0),r(b,null,U(y.value,(t,_)=>(o(),v(se,{key:t.cid,item:t,index:_},null,8,["item","index"]))),128))]),_:1}),d.value?(o(),v(m(re),{key:0})):L("",!0),!S.value&&!d.value?(o(),v(m(ue),{key:1},{description:E(()=>[j(K(e.$t("noMore")),1)]),_:1})):L("",!0)])]),_:1},8,["title"])],64)):(o(),v(Y,{key:0}))])]),u(oe)]),u(ie,{"is-show-cart":!1})],64))}});ae().then(h=>{const n=Z(Ve);n.use(h),n.provide(ne,h),n.mount("#app")});
