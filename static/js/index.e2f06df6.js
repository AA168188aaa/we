!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},r=e.parcelRequireb99d;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){let r=n[e];delete n[e];let o={id:e,exports:{}};return t[e]=o,r.call(o.exports,o,o.exports),o.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequireb99d=r),r.register("3bIuT",(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(e.exports,"__esModule",{value:!0});var o=n(r("42BWz")),i=n(r("2RLKw")),a=r("6flZ4"),s=n(r("4WS9t")),c=n(r("hxvOi"));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function m(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function v(){return(e=i.get("uin")||i.get("pt2gguin")||i.get("uin_cookie")||"")?String(e).replace(/^o0*/g,""):0;var e}var b,w,S=!!a.isBrowser&&"https:"===location.protocol;b=S?"https://web1.ied-tqos-s.qq.com:8001":"http://ied-tqosweb.qq.com:8001",w=S?"https://tgp.ied-tqos-s.qq.com:8001":"http://ied-tqos-tgp.qq.com:8001";var O=null;if(a.isBrowser)try{O=parent.TGP.status}catch(e){}function x(){var e=-1,t=0,n=0;O&&O.isNetbar>-1&&(e=O.isNetbar,O.uin&&(t=O.uin,n=O.ver.toString())),t=t||v()||0,0===Number(t)&&(t=i.get("tgp_id")?1e11+Number(i.get("tgp_id")):0);var r=0,o=0;return n&&(o=n.substr(0,4),r=n.substr(4,4)),void 0===e&&(window.tqosNetbarFlag=-1),{tqosNetbarFlag:e,uid:t,ver_high:o,ver_low:r}}function E(){var e=Number(new Date).toString();return{timestamp_high:e.substr(0,8),timestemp_low:e.substr(8)}}function I(e,t,n,r,o){var i=x(),a=i.tqosNetbarFlag,s=i.ver_high,c=i.ver_low,u=i.uid,p=E(),l=[s,c,p.timestamp_high,p.timestemp_low,e,a,t],f=["","",u,n,r];j(o,f,5);var d='{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":'.concat(e,',"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":').concat(l.length,',"IntList":[').concat(l.join(","),'],"StrNum":').concat(f.length,',"StrList":["').concat(f.join('","'),'"]}}}]}}}'),h="".concat(w,"/?tqos=").concat(encodeURIComponent(d));(new Image).src=h}function P(e){return e.replace(/[^\x00-\xff]/g,"***").length}function R(e,t,n,r){if(!(n>r))if(P(String(e))<128)t.push(e);else{var o=function(e,t){var n="",r=e.length;if(P(e)<=t)return e;for(var o=0,i=0;o<r;o++){var a=e.charAt(o);if(/[\x00-\xff]/.test(a)?i++:i+=3,!(i<=t))return n;n+=a}}(e=String(e).replace(/\{/g,"｛").replace(/\}/g,"｝"),126);t.push(o),R(e=e.slice(o.length,e.length),t,++n,r)}}function j(e,t,n){e&&("object"===u(e)&&(e="{".concat(Object.keys(e).map((function(t){return"'".concat(t,"':'").concat(e[t],"'")})).join(";"),"}")),R(e,t,0,n))}function A(e,t,n,r,o,i){var a=-1,s=0;O&&O.isNetbar>-1&&(a=O.isNetbar,O.uin&&(s=O.uin)),void 0!==s&&0!==Number(s)||(s=v()||0),void 0===a&&(window.tqosNetbarFlag=-1);for(var c=Date.parse(new Date).toString(),u=[0,0,c.substr(0,4),c.substr(4,4),e,a,t],p=["","",s,n,r],l=o.replace(/\"/g,"'").replace(/,/g,";"),f=0,d=l.length;f<d/127;f++){var h=l.slice(127*f,127*(f+1));p.push(h)}var y='{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":'.concat(e,',"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":').concat(u.length,',"IntList":[').concat(u.join(","),'],"StrNum":').concat(p.length,',"StrList":["').concat(p.join('","'),'"]}}}]}}}'),g="".concat(1===Number(i)?b:w,"/?tqos=").concat(encodeURIComponent(y));(new Image).src=g}var k=Object.freeze({__proto__:null,PV_REPORT_QOISID:8866,getClientInfo:x,getTimestamp:E,qosReport:I,qosPerformanceReport:function(e,t){var n=x(),r=n.uid,o=n.tqosNetbarFlag,i=n.ver_high,a=n.ver_low,s=E(),c=[i,a,s.timestamp_high,s.timestemp_low,7703,o],u=["","",r,e,"",window.__INITIAL_STATE__?"1":"0"];Object.keys(t).forEach((function(e){e<25&&(c[Number(e)+5]=t[e],delete t[e])})),j(t,u,4);var p='{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"Flag":1,"QosList":[{"QosID":'.concat(7703,',"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":').concat(c.length,',"IntList":[').concat(c.join(","),'],"StrNum":').concat(u.length,',"StrList":["').concat(u.join('","'),'"]}}}]}}}'),l="".concat(w,"/?tqos=").concat(encodeURIComponent(p));(new Image).src=l},qosCgiReport:function(e){var t=x(),n=t.uid,r=t.tqosNetbarFlag,o=t.ver_high,i=t.ver_low,a=E(),s=a.timestamp_high,c=a.timestemp_low,u=String(e.request_start),p=[o,i,s,c,5099,r,e.http_code,e.error_code,u.substr(0,8),u.substr(8),e.request_time],l=["","",n,e.api_url,e.refer_url,e.error_message],f='{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"Flag":1,"QosList":[{"QosID":'.concat(5099,',"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":').concat(p.length,',"IntList":[').concat(p.join(","),'],"StrNum":').concat(l.length,',"StrList":["').concat(l.join('","'),'"]}}}]}}}'),d="".concat(w,"/?tqos=").concat(encodeURIComponent(f));(new Image).src=d},$qosReportComm:function(e,t){var n=-1,r=0;O&&O.isNetbar>-1&&(n=O.isNetbar,O.uin&&(r=O.uin)),void 0===n&&(window.tqosNetbarFlag=-1);var o=Date.parse(new Date).toString(),i=[0,0,0,o.substr(0,4),o.substr(4,4),e,n];i.push(t);for(var a=2;a<arguments.length&&"string"!=typeof arguments[a];++a)i.push(arguments[a]);for(var s=["","",r];a<arguments.length;++a)s.push(arguments[a]);var c='{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":'.concat(e,',"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":').concat(i.length,',"IntList":[').concat(i.join(","),'],"StrNum":').concat(s.length,',"StrList":["').concat(s.join('","'),'"]}}}]}}}'),u="".concat(b,"/?tqos=").concat(encodeURIComponent(c)),p=new Image;p.src=u},$qosReportCommNew:function(e,t){var n=-1,r=0;O&&O.isNetbar>-1&&(n=O.isNetbar,O.uin&&(r=O.uin)),void 0!==r&&0!==Number(r)||(r=v()||0),void 0===n&&(window.tqosNetbarFlag=-1);var o=Date.parse(new Date).toString(),i=[0,0,0,o.substr(0,4),o.substr(4,4),e,n];i.push(t);for(var a=2;a<arguments.length&&"string"!=typeof arguments[a];++a)i.push(arguments[a]);for(var s=["","",r];a<arguments.length;++a)s.push(arguments[a]);var c='{"Head":{"Cmd":5},"Body":{"QOSRep":{"BusinessID":1,"QosNum":1,"QosList":[{"QosID":'.concat(e,',"QosVal":0,"AppendDescFlag":2,"AppendDesc":{"Comm":{"IntNum":').concat(i.length,',"IntList":[').concat(i.join(","),'],"StrNum":').concat(s.length,',"StrList":["').concat(s.join('","'),'"]}}}]}}}'),u="".concat(w,"/?tqos=").concat(encodeURIComponent(c)),p=new Image;p.src=u},$qosReportCommOldEx:function(e,t,n,r,o){A(e,t,n,r,o,1)},$qosReportCommNewEx:function(e,t,n,r,o){A(e,t,n,r,o,2)}});var T=!!a.isBrowser&&"https:"===location.protocol,C=!1;function N(e){if(C)return e();!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.src=e,n.type="text/javascript",n.onload=n.onerror=n.onreadystatechange=function(){/loaded|complete|undefined/.test(n.readyState)&&(n.onload=n.onerror=n.onreadystatechange=null,n.parentNode.removeChild(n),n=null,t())},r.parentNode.insertBefore(n,r)}(T?"//pingjs.qq.com/tcss.ping.https.js":"//pingjs.qq.com/tcss.ping.js",(function(){C=!0,e()}))}var _=a.isBrowser?location.pathname.replace(/\/store\/\d{1,}/,"/store/detail"):"";function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.repeatApplay="true",e.virtualDomain="wegamecn.qq.com",e.virtualURL="/".concat(location.hostname).concat(_);try{N((function(){"function"==typeof pgvMain&&pgvMain(e)}))}catch(e){}}function D(e){var t={hottag:e,virtualDomain:"wegamecn.qq.com"};t.virtualURL="/".concat(location.hostname).concat(_);try{N((function(){"function"==typeof pgvSendClick&&pgvSendClick(t)}))}catch(e){}}var U,q=Object.freeze({__proto__:null,visited:L,clicked:D});function F(){return i.get("tgp_id")||""}function B(){return i.get("tgp_user_type")||""}function M(){return(i.get("puin")||i.get("p_uin")||"").replace(/^o0*/g,"")}function W(){try{return top.TGP&&top.TGP.status&&top.TGP.status.ver?function(e){var t=Number(e);if(!e||!t)return"0";var n=[(4278190080&t)>>24];return n.push((16711680&t)>>16),n.push(65535&t),n.join(".")}(top.TGP.status.ver):"0"}catch(e){return"0"}}function H(e){if(e&&e.from)return e.from;var t=o.parse(window.location.search,{ignoreQueryPrefix:!0}).from||function(e){if(!e||a.isWeGame||!sessionStorage)return"";var t=document.referrer,n=sessionStorage.getItem("last_referrer"),r=sessionStorage.getItem("custom_json"),o={};if(r)try{(r=JSON.parse(r)).path&&(r.path===t||r.path===location.href&&!t||t===location.href&&r.path===n)&&(o=r)}catch(e){}return o[e]||""}("from");return t.match(/[^\dA-Za-z.\-_]/)&&(t="unsafe"),a.isWeGame&&!t&&(t="client.wegame"),t}function G(){var e="";try{var t=sessionStorage.getItem("user_path_track");if(t){var n=JSON.parse(t);Array.isArray(n)&&n.length&&(e=t)}}catch(e){}return e}function V(e,t){return t&&e&&void 0!==e[t]?"".concat(t,"=").concat(e[t]):""}function Q(e){if(!e)return e;var t,n=e.match(/from=([^&]*)/),r=n&&n[1]||"";return r?(r=decodeURIComponent(r),t=r,(U=U||document.createElement("a")).href=t,U.search="",U.hash="",r=U.href,r=encodeURIComponent(r),e.replace(/(from=)([^&]*)/gi,"from=".concat(r))):e}var J,$,X={appkey:"0WEB0A20294YU9L9",strictMode:!1},K={id:"jyMsoCbcSuYHtDaOKe",reportApiSpeed:!0,reportAssetSpeed:!0,offlineLog:!0,onBeforeRequest:function(e){var t=e.url;return y({},e,{url:Q(e.url),ourl:t})}},z=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e);var n=t.beaconOptions,r=void 0===n?{}:n,o=t.namespace;this.prefix=o||"",this.clientVersion=W(),this.userid=F(),this.userQQ=M(),this.userType=B(),this.userid&&(X.openid=this.userid),"function"==typeof s&&!1!==r&&(this.beacon=new s(y({},X,{},r)))}return f(e,[{key:"setOpenId",value:function(e){this.beacon&&this.beacon.setOpenId(e)}},{key:"reportEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.immediate,o=void 0!==r&&r,i=n.sendBeacon,a=void 0!==i&&i;if(e&&"string"==typeof e){var s=H(t),c=G(),u=y({},t,{clientver:this.clientVersion,uid:this.userid,utype:this.userType,qq:this.userQQ,from:s}),p=this.prefix?"".concat(this.prefix,"_").concat(e):e;p=p.replace(/\./g,"_");var l=o?"onDirectUserAction":"onUserAction";l=a?"onSendBeacon":l,this.beacon&&this.beacon[l]&&this.beacon[l](p,y({},u,{track:c}))}}}]),e}(),Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e);var n=t.aegisOptions,r=void 0===n?{}:n,o=t.namespace;if(this.prefix=o||"",this.userid=F(),this.userid&&(K.uin=this.userid),"function"==typeof c&&!1!==r){var i=K.onBeforeRequest,a=g(K,["onBeforeRequest"]),s=r.onBeforeRequest,u=g(r,["onBeforeRequest"]),l=function(e){try{return[i,s].reduce((function(e,t){return"function"==typeof t?t(e):e}),e)}catch(t){return e}};this.aegis=new c(y({},a,{},u,{onBeforeRequest:l}))}}return f(e,[{key:"setUid",value:function(e){this.aegis&&this.aegis.setConfig({uin:e})}},{key:"reportEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&"string"==typeof e){var n=this.prefix?"".concat(this.prefix,"_").concat(e):e;n=n.replace(/\./g,"_");var r=Object.keys(t),o=m(r),i=o[0],a=o[1],s=o.slice(2),c=V(t,i),u=V(t,a),p=s.map((function(e){return V(t,e)})).filter((function(e){return e})).join("&");this.aegis&&this.aegis.reportEvent({name:n,ext1:c,ext2:u,ext3:p})}}},{key:"reportTime",value:function(e){this.aegis&&void 0!==e.name&&void 0!==e.duration&&(e.duration=Math.max(0,e.duration),e.duration=Math.min(6e4,e.duration),this.aegis.reportTime(e))}},{key:"log",value:function(e){if(this.aegis){var t=this.prefix?"".concat(this.prefix," ").concat(e):e;this.aegis.info(t)}}},{key:"error",value:function(e){this.aegis&&this.aegis.error(e)}},{key:"time",value:function(e){if(this.aegis){var t=this.prefix?"".concat(this.prefix,"-").concat(e):e;this.aegis.time(t)}}},{key:"timeEnd",value:function(e){if(this.aegis){var t=this.prefix?"".concat(this.prefix,"-").concat(e):e;this.aegis.timeEnd(t)}}}]),e}(),Z={customPath:"",cgiSampleRate:.05,cgiDelay:1e3,cgiErrorCode:[],cgiErrorMessage:[],timingSampleRate:.3,timingDelay:3e3};if(a.isBrowser){L({statIframe:!0});var ee=window.weLibReportConfig||{};$=new Y(ee),J=new z(ee)}var te=k,ne=q,re=z,oe=$;e.exports.Report=re,e.exports.cgi={config:function(){},cgiInit:function(){}},e.exports.emonitor={},e.exports.emonitorIns={},e.exports.init=function(e){var t=e.main||"",n=e.sub||"",r=e.gameId||e.game_id||0,s=e.qosId||8866,c=e.keys||[];return function(e,u){var p={},l=[],f=!1;u=u||{},e=Array.isArray(e)?e:[e];for(var d=0;d<e.length;d++)if(e[d]||0===e[d]){var h=c[d]||"val".concat(d);"from"===(h="gameid"===h||"game_id"===h?"tgameid":h).toLowerCase()&&(f=!0),p[h]=e[d],l.push(e[d])}for(var y in u)if({}.hasOwnProperty.call(u,y)){var m="gameid"===y||"game_id"===y?"tgameid":y;"from"===m.toLowerCase()&&(f=!0),p[m]=u[y]}i.get("tgp_id")&&(p.tgpid=i.get("tgp_id")),i.get("tgp_user_type")&&(p.utype=i.get("tgp_user_type")),i.get("region")&&(p.region=i.get("region")),p.ctype=1;var v=a.isWeGame?1:0;if(p.isclient=v,!f){var b=window.location.href.split("?")[1]||"",w=o.parse(b).from||"";w.match(/[^\dA-Za-z.\-_]/)&&(w="unsafe"),a.isWeGame&&!w&&(w="client.wegame"),p.from=w}if(I(s,r,t,n,p),D([t.toUpperCase(),n.toUpperCase()].concat(l).join(".")),J){var S="v0_".concat(t,"_").concat(n),O=g(p,["tgpid","isclient","ctype","region"]);J.reportEvent(S,O,{immediate:!0})}}},e.exports.perf=oe,e.exports.performance=function(){},e.exports.setConfig=function(e){return Object.assign(Z,e),Z},e.exports.tcls={visited:function(){},clicked:function(){}},e.exports.tcss=ne,e.exports.timing={reportSpeed:function(){}},e.exports.tqos=te})),r.register("42BWz",(function(e,t){"use strict";var n=r("5h0hF"),o=r("6g9Xd"),i=r("4HxSr");e.exports={formats:i,parse:o,stringify:n}})),r.register("5h0hF",(function(e,t){"use strict";var n=r("3o4O2"),o=r("5yPBx"),i=r("4HxSr"),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=Array.prototype.push,p=function(e,t){u.apply(e,c(t)?t:[t])},l=Date.prototype.toISOString,f=i.default,d={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:f,formatter:i.formatters[f],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},h=function e(t,r,i,a,s,u,l,f,h,y,g,m,v,b,w){var S,O=t;if(w.has(t))throw new RangeError("Cyclic object value");if("function"==typeof l?O=l(r,O):O instanceof Date?O=y(O):"comma"===i&&c(O)&&(O=o.maybeMap(O,(function(e){return e instanceof Date?y(e):e}))),null===O){if(a)return u&&!v?u(r,d.encoder,b,"key",g):r;O=""}if("string"==typeof(S=O)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||o.isBuffer(O))return u?[m(v?r:u(r,d.encoder,b,"key",g))+"="+m(u(O,d.encoder,b,"value",g))]:[m(r)+"="+m(String(O))];var x,E=[];if(void 0===O)return E;if("comma"===i&&c(O))x=[{value:O.length>0?O.join(",")||null:void 0}];else if(c(l))x=l;else{var I=Object.keys(O);x=f?I.sort(f):I}for(var P=0;P<x.length;++P){var R=x[P],j="object"==typeof R&&void 0!==R.value?R.value:O[R];if(!s||null!==j){var A=c(O)?"function"==typeof i?i(r,R):r:r+(h?"."+R:"["+R+"]");w.set(t,!0);var k=n();p(E,e(j,A,i,a,s,u,l,f,h,y,g,m,v,b,k))}}return E};e.exports=function(e,t){var r,o=e,u=function(e){if(!e)return d;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||d.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=i.formatters[n],o=d.filter;return("function"==typeof e.filter||c(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:d.addQueryPrefix,allowDots:void 0===e.allowDots?d.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:d.charsetSentinel,delimiter:void 0===e.delimiter?d.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:d.encode,encoder:"function"==typeof e.encoder?e.encoder:d.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:d.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:d.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:d.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:d.strictNullHandling}}(t);"function"==typeof u.filter?o=(0,u.filter)("",o):c(u.filter)&&(r=u.filter);var l,f=[];if("object"!=typeof o||null===o)return"";l=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var y=s[l];r||(r=Object.keys(o)),u.sort&&r.sort(u.sort);for(var g=n(),m=0;m<r.length;++m){var v=r[m];u.skipNulls&&null===o[v]||p(f,h(o[v],v,y,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var b=f.join(u.delimiter),w=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),b.length>0?w+b:""}})),r.register("3o4O2",(function(e,t){"use strict";var n=r("77mur"),o=r("3BWBS"),i=r("4KKrV"),a=n("%TypeError%"),s=n("%WeakMap%",!0),c=n("%Map%",!0),u=o("WeakMap.prototype.get",!0),p=o("WeakMap.prototype.set",!0),l=o("WeakMap.prototype.has",!0),f=o("Map.prototype.get",!0),d=o("Map.prototype.set",!0),h=o("Map.prototype.has",!0),y=function(e,t){for(var n,r=e;null!==(n=r.next);r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n};e.exports=function(){var e,t,n,r={assert:function(e){if(!r.has(e))throw new a("Side channel does not contain "+i(e))},get:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(e)return u(e,r)}else if(c){if(t)return f(t,r)}else if(n)return function(e,t){var n=y(e,t);return n&&n.value}(n,r)},has:function(r){if(s&&r&&("object"==typeof r||"function"==typeof r)){if(e)return l(e,r)}else if(c){if(t)return h(t,r)}else if(n)return function(e,t){return!!y(e,t)}(n,r);return!1},set:function(r,o){s&&r&&("object"==typeof r||"function"==typeof r)?(e||(e=new s),p(e,r,o)):c?(t||(t=new c),d(t,r,o)):(n||(n={key:{},next:null}),function(e,t,n){var r=y(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}}(n,r,o))}};return r}})),r.register("77mur",(function(e,t){"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new a},p=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,l=r("7ijZC")(),f=Object.getPrototypeOf||function(e){return e.__proto__},d={},h="undefined"==typeof Uint8Array?n:f(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":l?f([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":d,"%AsyncGenerator%":d,"%AsyncGeneratorFunction%":d,"%AsyncIteratorPrototype%":d,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":d,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":l?f(f([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&l?f((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&l?f((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":l?f(""[Symbol.iterator]()):n,"%Symbol%":l?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":p,"%TypedArray%":h,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(n=f(o.prototype))}return y[t]=n,n},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=r("6VSgS"),b=r("1TGJu"),w=v.call(Function.call,Array.prototype.concat),S=v.call(Function.apply,Array.prototype.splice),O=v.call(Function.call,String.prototype.replace),x=v.call(Function.call,String.prototype.slice),E=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,I=/\\(\\)?/g,P=function(e){var t=x(e,0,1),n=x(e,-1);if("%"===t&&"%"!==n)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var r=[];return O(e,E,(function(e,t,n,o){r[r.length]=n?O(o,I,"$1"):t||e})),r},R=function(e,t){var n,r=e;if(b(m,r)&&(r="%"+(n=m[r])[0]+"%"),b(y,r)){var i=y[r];if(i===d&&(i=g(r)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var n=P(e),r=n.length>0?n[0]:"",i=R("%"+r+"%",t),s=i.name,u=i.value,p=!1,l=i.alias;l&&(r=l[0],S(n,w([0,1],l)));for(var f=1,d=!0;f<n.length;f+=1){var h=n[f],g=x(h,0,1),m=x(h,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new o("property names with quotes must have matching quotes");if("constructor"!==h&&d||(p=!0),b(y,s="%"+(r+="."+h)+"%"))u=y[s];else if(null!=u){if(!(h in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&f+1>=n.length){var v=c(u,h);u=(d=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[h]}else d=b(u,h),u=u[h];d&&!p&&(y[s]=u)}}return u}})),r.register("7ijZC",(function(e,t){"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r("2m1wO");e.exports=function(){return"function"==typeof n&&("function"==typeof Symbol&&("symbol"==typeof n("foo")&&("symbol"==typeof Symbol("bar")&&o())))}})),r.register("2m1wO",(function(e,t){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}})),r.register("6VSgS",(function(e,t){"use strict";var n=r("5BZsH");e.exports=Function.prototype.bind||n})),r.register("5BZsH",(function(e,t){"use strict";var n="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,o=Object.prototype.toString,i="[object Function]";e.exports=function(e){var t=this;if("function"!=typeof t||o.call(t)!==i)throw new TypeError(n+t);for(var a,s=r.call(arguments,1),c=function(){if(this instanceof a){var n=t.apply(this,s.concat(r.call(arguments)));return Object(n)===n?n:this}return t.apply(e,s.concat(r.call(arguments)))},u=Math.max(0,t.length-s.length),p=[],l=0;l<u;l++)p.push("$"+l);if(a=Function("binder","return function ("+p.join(",")+"){ return binder.apply(this,arguments); }")(c),t.prototype){var f=function(){};f.prototype=t.prototype,a.prototype=new f,f.prototype=null}return a}})),r.register("1TGJu",(function(e,t){"use strict";var n=r("6VSgS");e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)})),r.register("3BWBS",(function(e,t){"use strict";var n=r("77mur"),o=r("4Uipw"),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}})),r.register("4Uipw",(function(e,t){"use strict";var n=r("6VSgS"),o=r("77mur"),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),c=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),p=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,a,arguments);if(c&&u){var r=c(t,"length");r.configurable&&u(t,"length",{value:1+p(0,e.length-(arguments.length-1))})}return t};var l=function(){return s(n,i,arguments)};u?u(e.exports,"apply",{value:l}):e.exports.apply=l})),r.register("4KKrV",(function(e,t){var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&c&&"function"==typeof c.get?c.get:null,p=s&&Set.prototype.forEach,l="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,d="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,y=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,v="function"==typeof BigInt?BigInt.prototype.valueOf:null,b=Object.getOwnPropertySymbols,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,S="function"==typeof Symbol&&"object"==typeof Symbol.iterator,O=Object.prototype.propertyIsEnumerable,x=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),E=r("6HlN5").custom,I=E&&k(E)?E:null,P="function"==typeof Symbol&&void 0!==Symbol.toStringTag?Symbol.toStringTag:null;function R(e,t,n){var r="double"===(n.quoteStyle||t)?'"':"'";return r+e+r}function j(e){return String(e).replace(/"/g,"&quot;")}function A(e){return!("[object Array]"!==N(e)||P&&"object"==typeof e&&P in e)}function k(e){if(S)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!w)return!1;try{return w.call(e),!0}catch(e){}return!1}e.exports=function e(t,n,r,o){var s=n||{};if(C(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(C(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!C(s,"customInspect")||s.customInspect;if("boolean"!=typeof c)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(C(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return L(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var y=void 0===s.depth?5:s.depth;if(void 0===r&&(r=0),r>=y&&y>0&&"object"==typeof t)return A(t)?"[Array]":"[Object]";var b,O=function(e,t){var n;if("\t"===e.indent)n="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;n=Array(e.indent+1).join(" ")}return{base:n,prev:Array(t+1).join(n)}}(s,r);if(void 0===o)o=[];else if(_(o,t)>=0)return"[Circular]";function E(t,n,i){if(n&&(o=o.slice()).push(n),i){var a={depth:s.depth};return C(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,r+1,o)}return e(t,s,r+1,o)}if("function"==typeof t){var T=function(e){if(e.name)return e.name;var t=m.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),D=M(t,E);return"[Function"+(T?": "+T:" (anonymous)")+"]"+(D.length>0?" { "+D.join(", ")+" }":"")}if(k(t)){var W=S?String(t).replace(/^(Symbol\(.*\))_[^)]*$/,"$1"):w.call(t);return"object"!=typeof t||S?W:U(W)}if((b=t)&&"object"==typeof b&&("undefined"!=typeof HTMLElement&&b instanceof HTMLElement||"string"==typeof b.nodeName&&"function"==typeof b.getAttribute)){for(var H="<"+String(t.nodeName).toLowerCase(),G=t.attributes||[],V=0;V<G.length;V++)H+=" "+G[V].name+"="+R(j(G[V].value),"double",s);return H+=">",t.childNodes&&t.childNodes.length&&(H+="..."),H+="</"+String(t.nodeName).toLowerCase()+">"}if(A(t)){if(0===t.length)return"[]";var Q=M(t,E);return O&&!function(e){for(var t=0;t<e.length;t++)if(_(e[t],"\n")>=0)return!1;return!0}(Q)?"["+B(Q,O)+"]":"[ "+Q.join(", ")+" ]"}if(function(e){return!("[object Error]"!==N(e)||P&&"object"==typeof e&&P in e)}(t)){var J=M(t,E);return 0===J.length?"["+String(t)+"]":"{ ["+String(t)+"] "+J.join(", ")+" }"}if("object"==typeof t&&c){if(I&&"function"==typeof t[I])return t[I]();if("function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var $=[];return a.call(t,(function(e,n){$.push(E(n,t,!0)+" => "+E(e,t))})),F("Map",i.call(t),$,O)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var X=[];return p.call(t,(function(e){X.push(E(e,t))})),F("Set",u.call(t),X,O)}if(function(e){if(!l||!e||"object"!=typeof e)return!1;try{l.call(e,l);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return q("WeakMap");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{l.call(e,l)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return q("WeakSet");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{return d.call(e),!0}catch(e){}return!1}(t))return q("WeakRef");if(function(e){return!("[object Number]"!==N(e)||P&&"object"==typeof e&&P in e)}(t))return U(E(Number(t)));if(function(e){if(!e||"object"!=typeof e||!v)return!1;try{return v.call(e),!0}catch(e){}return!1}(t))return U(E(v.call(t)));if(function(e){return!("[object Boolean]"!==N(e)||P&&"object"==typeof e&&P in e)}(t))return U(h.call(t));if(function(e){return!("[object String]"!==N(e)||P&&"object"==typeof e&&P in e)}(t))return U(E(String(t)));if(!function(e){return!("[object Date]"!==N(e)||P&&"object"==typeof e&&P in e)}(t)&&!function(e){return!("[object RegExp]"!==N(e)||P&&"object"==typeof e&&P in e)}(t)){var K=M(t,E),z=x?x(t)===Object.prototype:t instanceof Object||t.constructor===Object,Y=t instanceof Object?"":"null prototype",Z=!z&&P&&Object(t)===t&&P in t?N(t).slice(8,-1):Y?"Object":"",ee=(z||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(Z||Y?"["+[].concat(Z||[],Y||[]).join(": ")+"] ":"");return 0===K.length?ee+"{}":O?ee+"{"+B(K,O)+"}":ee+"{ "+K.join(", ")+" }"}return String(t)};var T=Object.prototype.hasOwnProperty||function(e){return e in this};function C(e,t){return T.call(e,t)}function N(e){return y.call(e)}function _(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function L(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return L(e.slice(0,t.maxStringLength),t)+r}return R(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,D),"single",t)}function D(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function U(e){return"Object("+e+")"}function q(e){return e+" { ? }"}function F(e,t,n,r){return e+" ("+t+") {"+(r?B(n,r):n.join(", "))+"}"}function B(e,t){if(0===e.length)return"";var n="\n"+t.prev+t.base;return n+e.join(","+n)+"\n"+t.prev}function M(e,t){var n=A(e),r=[];if(n){r.length=e.length;for(var o=0;o<e.length;o++)r[o]=C(e,o)?t(e[o],e):""}var i,a="function"==typeof b?b(e):[];if(S){i={};for(var s=0;s<a.length;s++)i["$"+a[s]]=a[s]}for(var c in e)C(e,c)&&(n&&String(Number(c))===c&&c<e.length||S&&i["$"+c]instanceof Symbol||(/[^\w$]/.test(c)?r.push(t(c,e)+": "+t(e[c],e)):r.push(c+": "+t(e[c],e))));if("function"==typeof b)for(var u=0;u<a.length;u++)O.call(e,a[u])&&r.push("["+t(a[u])+"]: "+t(e[a[u]],e));return r}})),r.register("6HlN5",(function(e,t){})),r.register("5yPBx",(function(e,t){"use strict";var n=r("4HxSr"),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],a=o.obj[o.prop],s=Object.keys(a),c=0;c<s.length;++c){var u=s[c],p=a[u];"object"==typeof p&&null!==p&&-1===n.indexOf(p)&&(t.push({obj:a,prop:u}),n.push(p))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<s.length;++u){var p=s.charCodeAt(u);45===p||46===p||95===p||126===p||p>=48&&p<=57||p>=65&&p<=90||p>=97&&p<=122||i===n.RFC1738&&(40===p||41===p)?c+=s.charAt(u):p<128?c+=a[p]:p<2048?c+=a[192|p>>6]+a[128|63&p]:p<55296||p>=57344?c+=a[224|p>>12]+a[128|p>>6&63]+a[128|63&p]:(u+=1,p=65536+((1023&p)<<10|1023&s.charCodeAt(u)),c+=a[240|p>>18]+a[128|p>>12&63]+a[128|p>>6&63]+a[128|63&p])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(i(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!o.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var a=t;return i(t)&&!i(n)&&(a=s(t,r)),i(t)&&i(n)?(n.forEach((function(n,i){if(o.call(t,i)){var a=t[i];a&&"object"==typeof a&&n&&"object"==typeof n?t[i]=e(a,n,r):t.push(n)}else t[i]=n})),t):Object.keys(n).reduce((function(t,i){var a=n[i];return o.call(t,i)?t[i]=e(t[i],a,r):t[i]=a,t}),a)}}})),r.register("4HxSr",(function(e,t){"use strict";var n=String.prototype.replace,r=/%20/g,o="RFC1738",i="RFC3986";e.exports={default:i,formatters:{RFC1738:function(e){return n.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:o,RFC3986:i}})),r.register("6g9Xd",(function(e,t){"use strict";var n=r("5yPBx"),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(i),u=s?i.slice(0,s.index):i,p=[];if(u){if(!n.plainObjects&&o.call(Object.prototype,u)&&!n.allowPrototypes)return;p.push(u)}for(var l=0;n.depth>0&&null!==(s=a.exec(i))&&l<n.depth;){if(l+=1,!n.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;p.push(s[1])}return s&&p.push("["+i.slice(s.index)+"]"),function(e,t,n,r){for(var o=r?t:c(t,n),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&n.parseArrays)a=[].concat(o);else{a=n.plainObjects?Object.create(null):{};var u="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,p=parseInt(u,10);n.parseArrays||""!==u?!isNaN(p)&&s!==u&&String(p)===u&&p>=0&&n.parseArrays&&p<=n.arrayLimit?(a=[])[p]=o:a[u]=o:a={0:o}}o=a}return o}(p,t,n,r)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var p="string"==typeof e?function(e,t){var r,u={},p=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,f=p.split(t.delimiter,l),d=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<f.length;++r)0===f[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[r]?h="utf-8":"utf8=%26%2310003%3B"===f[r]&&(h="iso-8859-1"),d=r,r=f.length);for(r=0;r<f.length;++r)if(r!==d){var y,g,m=f[r],v=m.indexOf("]="),b=-1===v?m.indexOf("="):v+1;-1===b?(y=t.decoder(m,a.decoder,h,"key"),g=t.strictNullHandling?null:""):(y=t.decoder(m.slice(0,b),a.decoder,h,"key"),g=n.maybeMap(c(m.slice(b+1),t),(function(e){return t.decoder(e,a.decoder,h,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(u,y)?u[y]=n.combine(u[y],g):u[y]=g}return u}(e,r):e,l=r.plainObjects?Object.create(null):{},f=Object.keys(p),d=0;d<f.length;++d){var h=f[d],y=u(h,p[h],r,"string"==typeof e);l=n.merge(l,y,r)}return!0===r.allowSparse?l:n.compact(l)}})),r.register("2RLKw",(function(e,t){!function(t){var n;if("function"==typeof define&&define.amd&&(define(t),n=!0),"object"==typeof e.exports&&(e.exports=t(),n=!0),!n){var r=window.Cookies,o=window.Cookies=t();o.noConflict=function(){return window.Cookies=r,o}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(s[0]);if(c=(r.read||r)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[u]=c,e===u)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}))})),r.register("6flZ4",(function(t,n){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.pageHost=t.exports.isWeGameX=t.exports.isMainland=t.exports.isOversea=t.exports.isProduction=t.exports.isPreRelease=t.exports.isTest=t.exports.isDevelopment=t.exports.isTgpIndependent=t.exports.isWeGameIndependent=t.exports.isTgpCross=t.exports.isWeGameCross=t.exports.isTgpFrame=t.exports.isWeGameFrame=t.exports.isTgpMainTop=t.exports.isWeGameMainTop=t.exports.isTgpMain=t.exports.isWeGameMain=t.exports.isTgp=t.exports.isWeGame=t.exports.isInClient=t.exports.isServer=t.exports.isBrowser=void 0,t.exports.isBrowser="undefined"!=typeof window&&"undefined"!=typeof document,t.exports.isServer=!t.exports.isBrowser&&void 0!==e;var r=function(e){try{return e()}catch(e){return!1}};t.exports.isInClient=t.exports.isBrowser&&window.external&&"function"==typeof window.external.callcpp&&r((function(){return window.top.location.href,!0})),t.exports.isWeGame=t.exports.isInClient,t.exports.isTgp=t.exports.isInClient,t.exports.isWeGameMain=t.exports.isWeGame&&r((function(){return void 0!==window.top.TGP.status})),t.exports.isTgpMain=t.exports.isWeGameMain,t.exports.isWeGameMainTop=t.exports.isWeGameMain&&r((function(){return window.top===window.parent&&window.top!==window})),t.exports.isTgpMainTop=t.exports.isWeGameMainTop,t.exports.isWeGameFrame=t.exports.isWeGameMain&&r((function(){return window.top===window})),t.exports.isTgpFrame=t.exports.isWeGameFrame,t.exports.isWeGameCross=t.exports.isWeGame&&r((function(){return/clienttype=cross/.test(window.location.href)})),t.exports.isTgpCross=t.exports.isWeGameCross,t.exports.isWeGameIndependent=t.exports.isWeGame&&!t.exports.isWeGameMain&&!t.exports.isWeGameCross,t.exports.isTgpIndependent=t.exports.isWeGameIndependent;var o=function(){try{return"production"}catch(e){return"production"}}();t.exports.isDevelopment="development"===o,t.exports.isTest="test"===o,t.exports.isPreRelease="pre-release"===o||"prerelease"===o,t.exports.isProduction=!t.exports.isDevelopment&&!t.exports.isTest&&!t.exports.isPreRelease,t.exports.isOversea=!1,t.exports.isMainland=!t.exports.isOversea,t.exports.isWeGameX=t.exports.isOversea,t.exports.pageHost=t.exports.isBrowser?window.location.host:void 0})),r.register("4WS9t",(function(e,t){var n,r;n=e.exports,r=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function r(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i}var o="__BEACON_deviceId",i="last_report_time",a="sending_event_ids",s="beacon_config",c="beacon_config_request_time",u=function(){function e(){var e=this;this.emit=function(t,n){if(e){var r,o=e.__EventsList[t];if(null==o?void 0:o.length){o=o.slice();for(var i=0;i<o.length;i++){r=o[i];try{var a=r.callback.apply(e,[n]);if(1===r.type&&e.remove(t,r.callback),!1===a)break}catch(e){throw e}}}return e}},this.__EventsList={}}return e.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},e.prototype.on=function(e,t,n){if(void 0===n&&(n=0),this){var r=this.__EventsList[e];if(r||(r=this.__EventsList[e]=[]),-1===this.indexOf(r,t)){var o={name:e,type:n||0,callback:t};return r.push(o),this}return this}},e.prototype.one=function(e,t){this.on(e,t,1)},e.prototype.remove=function(e,t){if(this){var n=this.__EventsList[e];if(!n)return null;if(!t){try{delete this.__EventsList[e]}catch(e){}return null}if(n.length){var r=this.indexOf(n,t);n.splice(r,1)}return this}},e}();function p(e,t){for(var n={},r=0,o=Object.keys(e);r<o.length;r++){var i=o[r],a=e[i];if("string"==typeof a)n[l(i)]=l(a);else{if(t)throw new Error("value mast be string  !!!!");n[l(String(i))]=l(String(a))}}return n}function l(e){if("string"!=typeof e)return e;try{return e.replace(new RegExp("\\|","g"),"%7C").replace(new RegExp("\\&","g"),"%26").replace(new RegExp("\\=","g"),"%3D").replace(new RegExp("\\+","g"),"%2B")}catch(e){return""}}function f(e){return String(e.A99)+String(e.A100)}var d=function(){},h=function(){function e(e){var n=this;this.lifeCycle=new u,this.uploadJobQueue=[],this.additionalParams={},this.delayTime=0,this._normalLogPipeline=function(e){if(!e||!e.reduce||!e.length)throw new TypeError("createPipeline 方法需要传入至少有一个 pipe 的数组");return 1===e.length?function(t,n){e[0](t,n||d)}:e.reduce((function(e,t){return function(n,r){return void 0===r&&(r=d),e(n,(function(e){return null==t?void 0:t(e,r)}))}}))}([function(e){n.send({url:n.strategy.getUploadUrl(),data:e,method:"post",contentType:"application/json;charset=UTF-8"},(function(){var t=n.config.onReportSuccess;"function"==typeof t&&t(JSON.stringify(e.events))}),(function(){var t=n.config.onReportFail;"function"==typeof t&&t(JSON.stringify(e.events))}))}]),function(e,t){if(!e)throw t instanceof Error?t:new Error(t)}(Boolean(e.appkey),"appkey must be initial"),this.config=t({},e)}return e.prototype.onUserAction=function(e,t){this.preReport(e,t,!1)},e.prototype.onDirectUserAction=function(e,t){this.preReport(e,t,!0)},e.prototype.preReport=function(e,t,n){e?this.strategy.isEventUpOnOff()&&(this.strategy.isBlackEvent(e)||this.strategy.isSampleEvent(e)||this.onReport(e,t,n)):this.errorReport.reportError("602"," no eventCode")},e.prototype.addAdditionalParams=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this.additionalParams[r]=e[r]}},e.prototype.setChannelId=function(e){this.commonInfo.channelID=String(e)},e.prototype.setOpenId=function(e){this.commonInfo.openid=String(e)},e.prototype.setUnionid=function(e){this.commonInfo.unid=String(e)},e.prototype.getDeviceId=function(){return this.commonInfo.deviceId},e.prototype.getCommonInfo=function(){return this.commonInfo},e.prototype.removeSendingId=function(e){try{var t=JSON.parse(this.storage.getItem(a)),n=t.indexOf(e);-1!=n&&(t.splice(n,1),this.storage.setItem(a,JSON.stringify(t)))}catch(e){}},e}(),y=function(){function e(e,t,n,r){this.requestParams={},this.network=r,this.requestParams.attaid="00400014144",this.requestParams.token="6478159937",this.requestParams.product_id=e.appkey,this.requestParams.platform=n,this.requestParams.uin=t.deviceId,this.requestParams.model="",this.requestParams.os=n,this.requestParams.app_version=e.appVersion,this.requestParams.sdk_version=t.sdkVersion,this.requestParams.error_stack=""}return e.prototype.reportError=function(e,t){this.requestParams._dc=Math.random(),this.requestParams.error_msg=t,this.requestParams.error_code=e,this.network.get("https://h.trace.qq.com/kv",{params:this.requestParams}).catch((function(e){}))},e}(),g=function(){function e(e,t,n,r){this.strategy={isEventUpOnOff:!0,httpsUploadUrl:"https://otheve.beacon.qq.com/analytics/v2_upload",requestInterval:30,blacklist:[],samplelist:[]},this.realSample={},this.appkey="",this.appkey=e.appkey,this.storage=n;try{var o=JSON.parse(this.storage.getItem(s));o&&this.processData(o)}catch(e){}this.needRequestConfig()&&this.requestConfig(e.appVersion,t,r)}return e.prototype.requestConfig=function(e,t,n){var r=this;this.storage.setItem(c,Date.now().toString()),n.post("https://oth.str.beacon.qq.com/trpc.beacon.configserver.BeaconConfigService/QueryConfig",{platformId:"undefined"==typeof wx?"3":"4",mainAppKey:this.appkey,appVersion:e,sdkVersion:t.sdkVersion,osVersion:t.userAgent,model:"",packageName:"",params:{A3:t.deviceId}}).then((function(e){if(0==e.data.ret)try{var t=JSON.parse(e.data.beaconConfig);t&&(r.processData(t),r.storage.setItem(s,e.data.beaconConfig))}catch(e){}else r.processData(null),r.storage.setItem(s,"")})).catch((function(e){}))},e.prototype.processData=function(e){var t,n,r,o,i;this.strategy.isEventUpOnOff=null!==(t=null==e?void 0:e.isEventUpOnOff)&&void 0!==t?t:this.strategy.isEventUpOnOff,this.strategy.httpsUploadUrl=null!==(n=null==e?void 0:e.httpsUploadUrl)&&void 0!==n?n:this.strategy.httpsUploadUrl,this.strategy.requestInterval=null!==(r=null==e?void 0:e.requestInterval)&&void 0!==r?r:this.strategy.requestInterval,this.strategy.blacklist=null!==(o=null==e?void 0:e.blacklist)&&void 0!==o?o:this.strategy.blacklist,this.strategy.samplelist=null!==(i=null==e?void 0:e.samplelist)&&void 0!==i?i:this.strategy.samplelist;for(var a=0,s=this.strategy.samplelist;a<s.length;a++){var c=s[a].split(",");2==c.length&&(this.realSample[c[0]]=c[1])}},e.prototype.needRequestConfig=function(){var e=Number(this.storage.getItem(c));return Date.now()-e>60*this.strategy.requestInterval*1e3},e.prototype.getUploadUrl=function(){return this.strategy.httpsUploadUrl+"?appkey="+this.appkey},e.prototype.isBlackEvent=function(e){return-1!=this.strategy.blacklist.indexOf(e)},e.prototype.isEventUpOnOff=function(){return this.strategy.isEventUpOnOff},e.prototype.isSampleEvent=function(e){return!!Object.prototype.hasOwnProperty.call(this.realSample,e)&&this.realSample[e]<Math.floor(Math.random()*Math.floor(1e4))},e}(),m="session_storage_key",v=function(){function e(e,t,n){this.beacon=n,this.storage=e,this.duration=t,this.appkey=n.config.appkey}return e.prototype.getSession=function(){var e=this.storage.getItem(m);if(!e)return this.createSession();var t=JSON.parse(e)||{sessionId:void 0,sessionStart:void 0};if(!t.sessionId||!t.sessionStart)return this.createSession();var n=Number(this.storage.getItem(i));return Date.now()-n>this.duration?this.createSession():{sessionId:t.sessionId,sessionStart:t.sessionStart}},e.prototype.createSession=function(){var e=Date.now(),t={sessionId:this.appkey+"_"+e.toString(),sessionStart:e};this.storage.setItem(m,JSON.stringify(t)),this.storage.setItem(i,e.toString());var n="is_new_user",r=this.storage.getItem(n);return this.beacon.onDirectUserAction("rqd_applaunched",{A21:r?"N":"Y"}),this.storage.setItem(n,JSON.stringify(!1)),t},e}();function b(){var e=navigator.userAgent,t=e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1,n=e.indexOf("Edge")>-1&&!t,r=e.indexOf("Trident")>-1&&e.indexOf("rv:11.0")>-1;if(t){new RegExp("MSIE (\\d+\\.\\d+);").test(e);var o=parseFloat(RegExp.$1);return 7==o?7:8==o?8:9==o?9:10==o?10:6}return n?-2:r?11:-1}var w=function(){return(w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function S(e){var t=new Image(1,1),n=w({attaid:"0f400053130",token:"6552374442",comps:"@tencent/tvf-indexed-db",version:"1.0.2",ua:navigator.userAgent,url:location.href,_dc:Math.random()},e),r=Object.keys(n).map((function(e){return e+"="+encodeURIComponent(n[e])})).join("&");t.src="https://h.trace.qq.com/kv?"+r}var O,x,E,I,P,R,j=function(){function e(e,t){void 0===t&&(t={}),this.reportOptions={},this.config=e,this.reportOptions=t}return e.canUseDB=function(){return!!(null===window||void 0===window?void 0:window.indexedDB)},e.prototype.openDB=function(){var t=this;return new Promise((function(n,r){if(!e.canUseDB())return r({message:"当前不支持 indexeddb"});var o=t.config,i=o.name,a=o.version,s=o.stores,c=indexedDB.open(i,a);c.onsuccess=function(){t.db=c.result,n(),S(w({result:1,func:"open",params:JSON.stringify(t.config)},t.reportOptions))},c.onerror=function(e){var n,o;r(e),S(w({result:0,func:"open",params:JSON.stringify(t.config),error_msg:null===(o=null===(n=e.target)||void 0===n?void 0:n.error)||void 0===o?void 0:o.message},t.reportOptions))},c.onupgradeneeded=function(){t.db=c.result;try{null==s||s.forEach((function(e){t.createStore(e)}))}catch(e){S(w({result:0,func:"open",params:JSON.stringify(t.config),error_msg:e.message},t.reportOptions)),r(e)}}}))},e.prototype.useStore=function(e){return this.storeName=e,this},e.prototype.deleteDB=function(){var e=this;return this.closeDB(),new Promise((function(t,n){var r=indexedDB.deleteDatabase(e.config.name);r.onsuccess=function(){return t()},r.onerror=n}))},e.prototype.closeDB=function(){var e;null===(e=this.db)||void 0===e||e.close(),this.db=null},e.prototype.getStoreCount=function(){var e=this;return new Promise((function(t,n){var r=e.getStore("readonly").count();r.onsuccess=function(){return t(r.result)},r.onerror=n}))},e.prototype.clearStore=function(){var e=this;return new Promise((function(t,n){var r=e.getStore("readwrite").clear();r.onsuccess=function(){return t()},r.onerror=n}))},e.prototype.add=function(e,t){var n=this;return new Promise((function(r,o){var i=n.getStore("readwrite").add(e,t);i.onsuccess=function(){r(i.result)},i.onerror=o}))},e.prototype.put=function(e,t){var n=this;return new Promise((function(r,o){var i=n.getStore("readwrite").put(e,t);i.onsuccess=function(){r(i.result)},i.onerror=o}))},e.prototype.getStoreAllData=function(){var e=this;return new Promise((function(t,n){var r=e.getStore("readonly").openCursor(),o=[];r.onsuccess=function(){var e;if(null===(e=r.result)||void 0===e?void 0:e.value){var n=r.result.value;o.push(n),r.result.continue()}else t(o)},r.onerror=n}))},e.prototype.getDataRangeByIndex=function(e,t,n,r,o){var i=this;return new Promise((function(a,s){var c=i.getStore().index(e),u=IDBKeyRange.bound(t,n,r,o),p=[],l=c.openCursor(u);l.onsuccess=function(){var e;(null===(e=null==l?void 0:l.result)||void 0===e?void 0:e.value)?(p.push(null==l?void 0:l.result.value),null==l||l.result.continue()):a(p)},l.onerror=s}))},e.prototype.removeDataByIndex=function(e,t,n,r,o){var i=this;return new Promise((function(a,s){var c=i.getStore("readwrite").index(e),u=IDBKeyRange.bound(t,n,r,o),p=c.openCursor(u),l=0;p.onsuccess=function(e){var t=e.target.result;t?(l+=1,t.delete(),t.continue()):a(l)},p.onerror=s}))},e.prototype.createStore=function(e){var t=e.name,n=e.indexes,r=void 0===n?[]:n,o=e.options;if(this.db){this.db.objectStoreNames.contains(t)&&this.db.deleteObjectStore(t);var i=this.db.createObjectStore(t,o);r.forEach((function(e){i.createIndex(e.indexName,e.keyPath,e.options)}))}},e.prototype.getStore=function(e){var t;return void 0===e&&(e="readonly"),null===(t=this.db)||void 0===t?void 0:t.transaction(this.storeName,e).objectStore(this.storeName)},e}(),A="event_table_v3",k="eventId",T=function(){function e(e){this.isReady=!1,this.taskQueue=Promise.resolve(),this.db=new j({name:"Beacon_"+e+"_V3",version:1,stores:[{name:A,options:{keyPath:k},indexes:[{indexName:k,keyPath:k,options:{unique:!0}}]}]}),this.open()}return e.prototype.setItem=function(e,t){var n=this;return this.readyExec((function(){return n.db.add({eventId:e,value:t})}))},e.prototype.getItem=function(e){return n(this,void 0,void 0,(function(){var t=this;return r(this,(function(n){return[2,this.readyExec((function(){return t.db.getDataRangeByIndex(k,e,e)}))]}))}))},e.prototype.removeItem=function(e){var t=this;return this.readyExec((function(){return t.db.removeDataByIndex(k,e,e)}))},e.prototype.updateItem=function(e,t){var n=this;return this.readyExec((function(){return n.db.put({eventId:e,value:t})}))},e.prototype.iterate=function(e){var t=this;return this.readyExec((function(){return t.db.getStoreAllData().then((function(t){t.forEach((function(t){e(t.value)}))}))}))},e.prototype.open=function(){return n(this,void 0,void 0,(function(){var e=this;return r(this,(function(t){switch(t.label){case 0:return this.taskQueue=this.taskQueue.then((function(){return e.db.openDB()})),[4,this.taskQueue];case 1:return t.sent(),this.isReady=!0,this.db.useStore(A),[2]}}))}))},e.prototype.readyExec=function(e){return this.isReady?e():(this.taskQueue=this.taskQueue.then((function(){return e()})),this.taskQueue)},e}(),C=function(){function e(e){this.keyObject={},this.storage=e}return e.prototype.removeItem=function(e){this.storage.removeItem(e),delete this.keyObject[e]},e.prototype.setItem=function(e,t){var n=JSON.stringify(t);this.storage.setItem(e,n),this.keyObject[e]=t},e.prototype.iterate=function(e){for(var t=Object.keys(this.keyObject),n=0;n<t.length;n++){var r=this.storage.getItem(t[n]);e(JSON.parse(r))}},e}(),N=function(){function e(e,t){var n=b();this.store=n>0?new C(t):new T(e)}return e.prototype.insertEvent=function(e,t){return n(this,void 0,void 0,(function(){var n,o;return r(this,(function(r){switch(r.label){case 0:n=f(e.mapValue),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.store.setItem(n,e)];case 2:return[2,r.sent()];case 3:return o=r.sent(),t&&t(o,e),[2,Promise.reject()];case 4:return[2]}}))}))},e.prototype.getEvents=function(){return n(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:e=[],t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.store.iterate((function(t){e.push(t)}))];case 2:case 3:return t.sent(),[2,Promise.all(e)];case 4:return[2]}}))}))},e.prototype.removeEvent=function(e){return n(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:t=f(e.mapValue),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.store.removeItem(t)];case 2:return[2,n.sent()];case 3:return n.sent(),[2,Promise.reject()];case 4:return[2]}}))}))},e}(),_=function(){return(_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function L(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function D(e,t){var n=[null,void 0,"",NaN].includes(e);if(t.isSkipEmpty&&n)return null;var r=!t.isSkipEmpty&&n?"":e;try{return t.encode?encodeURIComponent(r):r}catch(e){return null}}function U(e,t){void 0===t&&(t={encode:!0,isSkipEmpty:!1});var n=e.url,r=e.query,o=void 0===r?{}:r,i=e.hash,a=n.split("#"),s=a[0],c=a[1],u=void 0===c?"":c,p=s.split("?")[0],l=[],f=D(i||u,t),d=_(_({},function(e){var t=e.split("#"),n=t[0],r=t[1],o=void 0===r?"":r,i=n.split("?"),a=i[0],s=i[1],c=void 0===s?"":s,u=L(o),p=Object.create(null);return c.split("&").forEach((function(e){var t=e.split("="),n=t[0],r=t[1],o=void 0===r?"":r,i=L(n),a=L(o);null===i||null===a||""===i&&""===a||p[i]||(p[i]=a)})),{url:a,query:p,hash:u}}(n).query),o);return Object.keys(d).forEach((function(e){var n=D(e,t),r=D(d[e],t);null!==n&&null!==r&&l.push(n+"="+r)})),p+(l.length?"?"+l.join("&"):"")+(f?"#"+f:"")}function q(e,t){return new Promise((function(n,r){if(t&&document.querySelectorAll("script[data-tag="+t+"]").length)return n();var o=document.createElement("script"),i=_({type:"text/javascript",charset:"utf-8"},e);Object.keys(i).forEach((function(e){return function(e,t,n){if(e)return void 0===n?e.getAttribute(t):e.setAttribute(t,n)}(o,e,i[e])})),t&&(o.dataset.tag=t),o.onload=function(){return n()},o.onreadystatechange=function(){var e=o.readyState;["complete","loaded"].includes(e)&&(o.onreadystatechange=null,n())},o.onerror=r,document.body.appendChild(o)}))}(R=O||(O={}))[R.equal=0]="equal",R[R.low=-1]="low",R[R.high=1]="high",x={func:"init",result:1},E=new Image(1,1),I=_({attaid:"0f400053130",token:"6552374442",comps:"@tencent/tvf-utils",version:"1.0.19",ua:navigator.userAgent,url:location.href,_dc:Math.random()},x),P=Object.keys(I).map((function(e){return e+"="+encodeURIComponent(I[e])})).join("&"),E.src="https://h.trace.qq.com/kv?"+P;var F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function B(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function M(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i}function W(e){var t=new Image(1,1),n=F({attaid:"0f400053130",token:"6552374442",comps:"@tencent/tvf-request",version:"1.1.4",ua:navigator.userAgent,url:location.href,_dc:Math.random()},e),r=Object.keys(n).map((function(e){return e+"="+encodeURIComponent(n[e])})).join("&");t.src="https://h.trace.qq.com/kv?"+r}var H=/^([a-z][a-z\d+\-.]*:)?\/\//i,G=Object.prototype.toString;function V(e){return B(this,void 0,void 0,(function(){var t;return M(this,(function(n){switch(n.label){case 0:if(window.fetch)return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q({src:e})];case 2:return n.sent(),[3,4];case 3:throw t=n.sent(),W({func:"loadPolyfill",result:0,params:e,error_msg:t.message}),new Error("加载 polyfill "+e+" 失败: "+t.message);case 4:return[2]}}))}))}var Q=function(){function e(){this.interceptors=[]}return e.prototype.use=function(e,t){return this.interceptors.push({resolved:e,rejected:t}),this.interceptors.length-1},e.prototype.traverse=function(e,t){void 0===t&&(t=!1);var n=Promise.resolve(e);return(t?Array.prototype.reduceRight:Array.prototype.reduce).call(this.interceptors,(function(e,t){if(t){var r=t.resolved,o=t.rejected;n=n.then(r,o)}return e}),""),n},e.prototype.eject=function(e){this.interceptors[e]&&(this.interceptors[e]=null)},e}(),J={defaults:{timeout:0,method:"GET",cache:"no-cache",mode:"cors",redirect:"follow",credentials:"same-origin"},headers:{common:{Accept:"application/json, text/plain, */*"},POST:{"Content-Type":"application/x-www-form-urlencoded"},PUT:{"Content-Type":"application/x-www-form-urlencoded"},PATCH:{"Content-Type":"application/x-www-form-urlencoded"}},baseURL:"",polyfillUrl:"https://vm.gtimg.cn/comps/script/fetch.min.js",interceptors:{request:new Q,response:new Q}};function $(e){return B(this,void 0,void 0,(function(){var t,n,r,o,i,a,s,c,u,p,l,f,d,h,y,g;return M(this,(function(m){switch(m.label){case 0:return t=J.baseURL,n=J.polyfillUrl,r=J.defaults,o=J.interceptors,[4,V(n)];case 1:return m.sent(),(i=F(F({},r),e)).headers||(i.headers=(v=i.method,b=J.headers[v]||{},F(F({},J.headers.common),b))),[4,o.request.traverse(i,!0)];case 2:if((a=m.sent())instanceof Error)throw a;return a.url=function(e,t){return!e||H.test(t)?t:e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}(t,a.url),s=a.url,c=a.timeout,u=a.params,p=a.method,l=["GET","DELETE","OPTIONS","HEAD"].includes(void 0===p?"GET":p)&&!!u,f=l?U({url:s,query:u}):s,d=[],c&&!a.signal&&(g=new Promise((function(e){h=setTimeout((function(){e(new Error("timeout"))}),c)})),d.push(g),y=new AbortController,a.signal=y.signal),d.push(fetch(f,a).catch((function(e){return e}))),[2,new Promise((function(e,t){Promise.race(d).then((function(e){return h&&clearTimeout(h),o.response.traverse(e)})).then((function(n){return n instanceof Error?(null==y||y.abort(),void t(n)):n.ok?e(n):void t(new Error(n.status+" "+n.statusText))}))}))]}var v,b}))}))}J.interceptors.request.use((function(e){return["Accept","Content-Type"].forEach((function(t){var n,r;return n=t,void((r=e.headers)&&Object.keys(r).forEach((function(e){e!==n&&e.toUpperCase()===n.toUpperCase()&&(r[n]=r[e],delete r[e])})))})),function(e){if("[object Object]"!==G.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}(e.body)&&(e.body=JSON.stringify(e.body),e.headers&&(e.headers["Content-Type"]="application/json;charset=utf-8")),e})),W({func:"init",result:1});var X=function(){function e(e){J.interceptors.request.use((function(n){var r=n.url,o=n.method,i=n.body,a=i;if(e.onReportBeforeSend){var s=e.onReportBeforeSend({url:r,method:o,data:i});a=(null==s?void 0:s.data)||null}if("GET"!==o&&!a)throw new Error("No data for sdk, cancel.");return t(t({},n),{body:a})}))}return e.prototype.get=function(e,o){return n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return[4,$(t({url:e},o))];case 1:return[4,(n=r.sent()).json()];case 2:return i=r.sent(),[2,Promise.resolve({data:i,status:n.status,statusText:n.statusText,headers:n.headers})]}}))}))},e.prototype.post=function(e,o,i){return n(this,void 0,void 0,(function(){var n,a;return r(this,(function(r){switch(r.label){case 0:return[4,$(t({url:e,body:o,method:"POST"},i))];case 1:return[4,(n=r.sent()).json()];case 2:return a=r.sent(),[2,Promise.resolve({data:a,status:n.status,statusText:n.statusText,headers:n.headers})]}}))}))},e}(),K=function(){function e(e){this.appkey=e}return e.prototype.getItem=function(e){try{return window.localStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.removeItem=function(e){try{window.localStorage.removeItem(this.getStoreKey(e))}catch(e){}},e.prototype.setItem=function(e,t){try{window.localStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.setSessionItem=function(e,t){try{window.sessionStorage.setItem(this.getStoreKey(e),t)}catch(e){}},e.prototype.getSessionItem=function(e){try{return window.sessionStorage.getItem(this.getStoreKey(e))}catch(e){return""}},e.prototype.getStoreKey=function(e){return"__BEACON_"+this.appkey+"_"+e},e.prototype.createDeviceId=function(){try{var e=window.localStorage.getItem(o);return e||(e=function(e){for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz0123456789",n="",r=0;r<32;r++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}(),window.localStorage.setItem(o,e)),e}catch(e){return""}},e}(),z="logid_start",Y="4.4.1-web";return function(n){function r(e){var t=n.call(this,e)||this;t.send=function(e,n,r){t.storage.setItem(i,Date.now().toString()),t.network.post(t.strategy.getUploadUrl(),e.data).then((function(r){var o;100==(null===(o=null==r?void 0:r.data)||void 0===o?void 0:o.result)?t.delayTime=1e3*r.data.delayTime:t.delayTime=0,n&&n(e.data),e.data.events.forEach((function(e){t.store.removeEvent(e).then((function(){t.removeSendingId(f(e.mapValue))}))}))})).catch((function(n){var o=e.data.events;t.errorReport.reportError(n.code?n.code.toString():"600",n.message),r&&r(e.data),o.forEach((function(e){t.store.insertEvent(e,(function(e,n){e&&t.errorReport.reportError("604","insertEvent fail!"),t.removeSendingId(f(n.mapValue))}))}))}))};var r=b();return t.isUnderIE8=r>0&&r<8,t.isUnderIE8||(t.isUnderIE=r>0,t.network=new X(e),t.storage=new K(e.appkey),t.initCommonInfo(e),t.store=new N(e.appkey,t.storage),t.errorReport=new y(t.config,t.commonInfo,"web",t.network),t.strategy=new g(t.config,t.commonInfo,t.storage,t.network),t.logidStartTime=t.storage.getItem(z),t.logidStartTime||(t.logidStartTime=Date.now().toString(),t.storage.setItem(z,t.logidStartTime)),t.initSession(e),t.onDirectUserAction("rqd_js_init",{}),setTimeout((function(){return t.lifeCycle.emit("init")}),0),t.initDelayTime=e.delay?e.delay:1e3,t.cycleTask(t.initDelayTime)),t}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(r,n),r.prototype.initSession=function(e){var t=18e5;e.sessionDuration&&e.sessionDuration>3e4&&(t=e.sessionDuration),this.beaconSession=new v(this.storage,t,this)},r.prototype.initCommonInfo=function(e){var t=Number(this.storage.getItem(i));try{var n=JSON.parse(this.storage.getItem(a));(Date.now()-t>3e4||!n)&&this.storage.setItem(a,JSON.stringify([]))}catch(e){}var r=[window.screen.width,window.screen.height];window.devicePixelRatio&&r.push(window.devicePixelRatio),this.commonInfo={deviceId:this.storage.createDeviceId(),language:navigator&&navigator.language||"zh_CN",query:window.location.search,userAgent:navigator.userAgent,pixel:r.join("*"),channelID:e.channelID?String(e.channelID):"",openid:e.openid?String(e.openid):"",unid:e.unionid?String(e.unionid):"",sdkVersion:Y},this.config.appVersion=e.versionCode?String(e.versionCode):"",this.config.strictMode=e.strictMode},r.prototype.cycleTask=function(e){var t=this;setTimeout((function(){t.store.getEvents().then((function(e){var n=[],r=JSON.parse(t.storage.getItem(a));r||(r=[]),e&&e.forEach((function(e){var t=f(e.mapValue);-1==r.indexOf(t)&&(n.push(e),r.push(t))})),0!=n.length&&(t.storage.setItem(a,JSON.stringify(r)),t._normalLogPipeline(t.assembleData(n)))})).catch((function(e){})),t.cycleTask(0==t.delayTime?t.initDelayTime:t.delayTime)}),e)},r.prototype.onReport=function(e,t,n){var r=this;if(this.isUnderIE8)this.errorReport.reportError("601","UnderIE8");else{var o=this.generateData(e,t,n);if(n&&0==this.delayTime)this._normalLogPipeline(this.assembleData(o));else{var i=o.shift();i&&this.store.insertEvent(i,(function(e){e&&r.errorReport.reportError("604","insertEvent fail!")}))}}},r.prototype.onSendBeacon=function(e,t){if(this.isUnderIE)this.errorReport.reportError("605","UnderIE");else{var n=this.assembleData(this.generateData(e,t,!0));"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(this.strategy.getUploadUrl(),JSON.stringify(n))}},r.prototype.generateData=function(e,n,r){var o=[],i="4.4.1-web_"+(r?"direct_log_id":"normal_log_id"),a=Number(this.storage.getItem(i));return a=a||1,n=t(t({},n),{A99:r?"Y":"N",A100:a.toString(),A72:Y,A88:this.logidStartTime}),a++,this.storage.setItem(i,a.toString()),o.push({eventCode:e,eventTime:Date.now().toString(),mapValue:p(n,this.config.strictMode)}),o},r.prototype.assembleData=function(e){var n=this.beaconSession.getSession();return{appVersion:this.config.appVersion?l(this.config.appVersion):"",sdkId:"js",sdkVersion:Y,mainAppKey:this.config.appkey,platformId:3,common:p(t(t({},this.additionalParams),{A2:this.commonInfo.deviceId,A8:this.commonInfo.openid,A12:this.commonInfo.language,A17:this.commonInfo.pixel,A23:this.commonInfo.channelID,A50:this.commonInfo.unid,A76:n.sessionId,A101:this.commonInfo.userAgent,A102:window.location.href,A104:document.referrer,A119:this.commonInfo.query}),!1),events:e}},r}(h)},"object"==typeof e.exports?e.exports=r():"function"==typeof define&&define.amd?define(r):(n="undefined"!=typeof globalThis?globalThis:n||self).BeaconAction=r()})),r.register("hxvOi",(function(e,t){var n,r;n=e.exports,r=function(){"use strict";function e(e){return(e=Array.isArray(e)?e:[e]).map((function(e,t){return Object.getOwnPropertyNames(e).map((function(n){return r(n)+"["+t+"]="+(void 0===e[n]?"":r(e[n]))})).join("&")})).join("&")+(e.length?"&count="+e.length:"")}var t,n=(o.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},o.prototype.on=function(e,t,n){if(void 0===n&&(n=0),this){var r=this.EventsList[e];return r||(this.EventsList[e]=[],r=this.EventsList[e]),-1!==this.indexOf(r,t)||r.push({name:e,type:n||0,callback:t}),this}},o.prototype.one=function(e,t){this.on(e,t,1)},o.prototype.remove=function(e,t){if(this){var n=this.EventsList[e];if(!n)return null;if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.EventsList[e]}catch(e){}return null}},o.prototype.clear=function(){this.EventsList={}},o),r=function(e){try{return encodeURIComponent(decodeURIComponent(e))}catch(t){return e}};function o(){var e=this;this.emit=function(t,n){if(e){var r;if(null!=(o=e.EventsList[t])&&o.length)for(var o=o.slice(),i=0;i<o.length;i++){r=o[i];try{var a=r.callback.apply(e,[n]);if(1===r.type&&e.remove(t,r.callback),!1===a)break}catch(e){throw e}}return e}},this.EventsList={}}function i(e,n){return"number"==typeof e||"string"==typeof e?e:n?t.string:t.number}function a(e,t){return"string"==typeof e?e.split("?")[t?1:0]||"":e}function s(e){return"string"==typeof e&&e.startsWith("//")?"undefined"!=typeof location&&"https:"===location.protocol:/^https/.test(e)}function c(){return void 0!==window.performance&&"function"==typeof performance.clearResourceTimings&&"function"==typeof performance.getEntriesByType&&"function"==typeof performance.now}function u(e){return d.some((function(t){return-1!==e.indexOf(t)}))}function p(e){if("string"==typeof e)return e;try{return(JSON.stringify(e,(t=[],n=[],function(e,r){if(r instanceof Error)return"Error.message: "+r.message+" \n  Error.stack: "+r.stack;if("object"==typeof r&&null!==r){var o=t.indexOf(r);if(-1!==o)return"[Circular "+n[o]+"]";t.push(r),n.push(e||"root")}return r}),4)||"undefined").replace(/"/gim,"")}catch(e){return"error happen when aegis stringify: \n "+e.message+" \n "+e.stack}var t,n}(Pe=t=t||{})[Pe.number=-1]="number",Pe.string="";var l,f,d=["application/octet-stream","application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/ogg","text/html","text/css","text/javascript","image","audio","video"],h=["ret","retcode","code"],y=function(e,t){var n;try{"string"==typeof e&&(e=JSON.parse(e)),"function"==typeof(null===(n=null==t?void 0:t.ret)||void 0===n?void 0:n.join)&&(h=[].concat(t.ret.map((function(e){return e.toLowerCase()}))));var r=Object.getOwnPropertyNames(e).filter((function(e){return-1!==h.indexOf(e.toLowerCase())}));return r.length?""+e[r[0]]:"unknown"}catch(e){return"unknown"}},g=function(e,t){void 0===t&&(t=3);var n,r,o,i="";return Array.isArray(e)?(i+="[",n=e.length,e.forEach((function(e,r){i+="object"==typeof e&&1<t?g(e,t-1):v(e),i+=r===n-1?"":","})),i+="]"):e instanceof Object?(i="{",r=Object.keys(e),o=r.length,r.forEach((function(n,a){"object"==typeof e[n]&&1<t?i+='"'+n+'":'+g(e[n],t-1):i+=m(n,e[n]),i+=a===o-1||a<o-1&&void 0===e[r[a+1]]?"":","})),i+="}"):i+=e,i},m=function(e,t){var n=typeof t,r="";return"string"==n||"object"==n?r+='"'+e+'":"'+t+'"':"function"==typeof t?r+='"'+e+'":"function '+t.name+'"':"symbol"==typeof t?r+='"'+e+'":"symbol"':"number"!=typeof t&&"boolean"!=n||(r+='"'+e+'": '+t),r},v=function(e){var t=typeof e;return""+("undefined"==t||"symbol"==t||"function"==t?"null":"string"==t||"object"==t?'"'+e+'"':e)},b=(O.prototype.sourceURL=function(){return this.data.responseURL},O.prototype.status=function(){return Number(this.data.status)},O.prototype.headers=function(){var e=this.data.getAllResponseHeaders().split("\n"),t={};return e.forEach((function(e){var n;e&&(e=(n=e.split(": "))[0],n=n[1].trim(),t[e]=n)})),t},O),w=(S.prototype.sourceURL=function(){return this.data.url},S.prototype.status=function(){return Number(this.data.status)},S.prototype.headers=function(){var e={};return this.data.headers.forEach((function(t,n){e[n]=t})),e},S);function S(e,t){this.type="fetch",this.data=e||{},this.data.response=t}function O(e){this.type="xhr",this.data=e}function x(e){return e.filter((function(t,n){return!e.find((function(e,r){return n!==r&&t.url===e.url&&200===t.status}))}))}function E(e){e.level===l.INFO_ALL&&(e.level=l.INFO)}function I(){}function P(e,t){Object.getOwnPropertyNames(e).forEach((function(n){"function"==typeof e[n]&&"constructor"!==n&&(t?t[n]=function(){}:e[n]=function(){})}))}(Ne=l=l||{}).INFO_ALL="-1",Ne.API_RESPONSE="1",Ne.INFO="2",Ne.ERROR="4",Ne.PROMISE_ERROR="8",Ne.AJAX_ERROR="16",Ne.SCRIPT_ERROR="32",Ne.IMAGE_ERROR="64",Ne.CSS_ERROR="128",Ne.CONSOLE_ERROR="256",Ne.MEDIA_ERROR="512",Ne.RET_ERROR="1024",Ne.REPORT="2048",Ne.PV="4096",Ne.EVENT="8192",(ye={})[ye.android=1]="android",ye[ye.ios=2]="ios",ye[ye.windows=3]="windows",ye[ye.macos=4]="macos",ye[ye.linux=5]="linux",ye[ye.devtools=6]="devtools",ye[ye.other=100]="other",(ve={})[ve.unknown=100]="unknown",ve[ve.wifi=1]="wifi",ve[ve.net2g=2]="net2g",ve[ve.net3g=3]="net3g",ve[ve.net4g=4]="net4g",ve[ve.net5g=5]="net5g",ve[ve.net6g=6]="net6g",(be=f=f||{}).LOG="log",be.SPEED="speed",be.PERFORMANCE="performance",be.OFFLINE="offline",be.WHITE_LIST="whiteList",be.VITALS="vitals",be.PV="pv",be.CUSTOM_PV="customPV",be.EVENT="event",be.CUSTOM="custom",be.SDK_ERROR="sdkError";var R=function(e,t){return function(n,r){var o=t.logCreated;return"function"!=typeof o?(e("beforeWrite",n),r(n)):(n=n.filter((function(e){return!1!==o(e)})),e("beforeWrite",n),r(n))}},j=function(e,t){var n,r=[],o=e.config;return e.lifeCycle.on("destroy",(function(){r.length=0})),function(e,i){if(r.push(e),t&&r.length>=t)return r=x(r),i(r.splice(0,r.length)),void(n&&clearTimeout(n));n&&clearTimeout(n),n=setTimeout((function(){n=null,0<(r=x(r)).length&&i(r.splice(0,r.length))}),o.delay)}},A=function(e,t){return Array.isArray(e)?t(e.map((function(e){return{msg:"string"==typeof e.msg?e.msg:[].concat(e.msg).map(p).join(" "),level:e.level,trace:e.trace}}))):t({msg:"string"==typeof e.msg?e.msg:p(e.msg),level:e.level,trace:e.trace})},k=function(e){var t,n=!1,r=!1,o=!1,i=[];return e.lifeCycle.on("onConfigChange",(function(){t&&clearTimeout(t),t=setTimeout((function(){var t;!o&&e.config&&(o=!0,(t=void 0===(t=e.config.whiteListUrl)?"":t)&&e.send({url:t,type:f.WHITE_LIST},(function(t){r=!0;try{var o=t.data||JSON.parse(t),a=o.retcode,s=o.result,c=void 0===s?{}:s;if(0===a){if(n=c.is_in_white_list,e.isWhiteList=n,c.shutdown)return void e.destroy();0<=c.rate&&c.rate<=1&&(e.config.random=c.rate)}e.isWhiteList&&i.length?N(e)(i.splice(0),(function(){})):!e.isWhiteList&&i.length&&(i.length=0);var u=e.config.onWhitelist;"function"==typeof u&&u(n)}catch(e){}}),(function(t){"403 forbidden"===t&&e.destroy(),r=!0})),o=!1)}),e.config.uin?50:500)})),e.lifeCycle.on("destroy",(function(){i.length=0})),function(e,t){n?t(e.concat(i.splice(0)).map((function(e){return E(e),e}))):(e=e.filter((function(e){return e.level!==l.INFO&&e.level!==l.API_RESPONSE?(E(e),!0):(r||(i.push(e),200<=i.length&&(i.length=200)),!1)}))).length&&t(e)}},T=function(e){return setTimeout((function(){var t;(t=void 0===(t=e.config.pvUrl)?"":t)&&e.send({url:t,type:f.PV},(function(){}),(function(t){"403 forbidden"===t&&e.destroy()}))}),100),function(e,t){t(e)}},C=function(e){var t={};return function(n,r){var o="number"==typeof e.repeat?e.repeat:5;if(0===o)return r(n);r(n.filter((function(e){return e.level!==l.ERROR&&e.level!==l.PROMISE_ERROR&&e.level!==l.AJAX_ERROR&&e.level!==l.SCRIPT_ERROR&&e.level!==l.IMAGE_ERROR&&e.level!==l.CSS_ERROR&&e.level!==l.MEDIA_ERROR||(t[e.msg]=t[e.msg]||0,t[e.msg]+=1,!(t[e.msg]>o))})))}},N=function(t){return function(n,r){t.send({url:t.config.url||"",data:e(n),method:"post",contentType:"application/x-www-form-urlencoded",type:f.LOG},(function(){var e=t.config.onReport;"function"==typeof e&&n.forEach((function(t){e(t)})),"function"==typeof r&&r([])}),(function(e){"403 forbidden"===e&&t.destroy()}))}},_=function(e){if(!e||!e.reduce||!e.length)throw new TypeError("createPipeline need at least one function param");return 1===e.length?function(t,n){e[0](t,n||I)}:e.reduce((function(e,t){return function(n,r){return void 0===r&&(r=I),e(n,(function(e){return null==t?void 0:t(e,r)}))}}))},L=(W.prototype.init=function(e){this.setConfig(e);for(var t=0;t<W.installedPlugins.length;t++)try{W.installedPlugins[t].patch(this)}catch(e){this.sendSDKError(e)}this.lifeCycle.emit("onInited")},W.prototype.setConfig=function(e){Object.assign(this.config,e);var t=(s=this.config).id,n=s.uin,r=s.version,o=s.ext1,i=s.ext2,a=s.ext3,s=(e=s.aid,this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==e);return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=r||"1.34.35",this.bean.aid=e||"",o&&(this.bean.ext1=o),i&&(this.bean.ext2=i),a&&(this.bean.ext3=a),s&&this.lifeCycle.emit("onConfigChange",this.config),this.config},W.use=function(e){-1===W.installedPlugins.indexOf(e)&&e.aegisPlugin&&W.installedPlugins.push(e)},W.unuse=function(e){-1!==(e=W.installedPlugins.indexOf(e))&&W.installedPlugins.splice(e,1)},W.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:l.INFO})},W.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:l.INFO_ALL})},W.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:l.REPORT})},W.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.normalLogPipeline({msg:e,level:l.ERROR})},W.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},W.prototype.reportPv=function(e){var t,n=this;e&&(console.warn("reportPv is deprecated, please use reportEvent"),t=""+Object.getOwnPropertyNames(this.bean).filter((function(e){return"id"!==e})).map((function(e){return e+"="+n.bean[e]})).join("&"),this.send({url:this.config.url+"/"+e+"?"+t,addBean:!1,type:f.CUSTOM_PV},(function(){}),(function(e){"403 forbidden"===e&&n.destroy()})))},W.prototype.reportEvent=function(e){e&&((e="string"==typeof e?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},W.prototype.reportTime=function(e,t){if("object"==typeof e)return this.reportT(e);"string"==typeof e?"number"==typeof t?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},W.prototype.reportT=function(e){var t=e.name,n=e.duration,r=void 0===(o=e.ext1)?"":o,o=void 0===(i=e.ext2)?"":i,i=void 0===(i=e.ext3)?"":i;if(e=e.from,"string"==typeof t&&"number"==typeof n&&"string"==typeof r&&"string"==typeof o&&"string"==typeof i){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,r,o,i,void 0===e?"":e);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},W.prototype.time=function(e){"string"==typeof e?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},W.prototype.timeEnd=function(e){"string"==typeof e?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},W.prototype.submitCustomTime=function(e,t,n,r,o,i){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:r||this.config.ext2,ext3:o||this.config.ext3,from:i||void 0})},W.prototype.extendBean=function(e,t){this.bean[e]=t},W.prototype.send=function(e,t,n){throw new Error('You need to override "send" method')},W.prototype.sendSDKError=function(e){this.send({url:this.config.url+"?id=1085&msg[0]="+encodeURIComponent(p(e))+"&level[0]=2&from="+this.config.id+"&count=1&version="+this.config.id+"(1.34.35)",addBean:!1,method:"get",type:f.SDK_ERROR})},W.prototype.destroy=function(e){void 0===e&&(e=!1);var t,n,r=W.instances.indexOf(this);-1!==r&&W.instances.splice(r,1);for(var o=W.installedPlugins.length-1;0<=o;o--)try{var i=W.installedPlugins[o];i.unpatch(this),0===i.countInstance()&&(i.uninstall(),W.unuse(i),i=null)}catch(e){this.sendSDKError(e)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach((function(e){n[e].writable&&(t[e]=null)})),Object.setPrototypeOf(this,null);else{for(var a=this;a.constructor!==Object&&P(a,this),a=Object.getPrototypeOf(a););0===W.instances.length&&(P(e=Object.getPrototypeOf(this).constructor),P(W))}},W.instances=[],W.LOG_TYPE=l,W.installedPlugins=[],W),D=(M.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},M.prototype.unpatch=function(e){-1!==(e=this.instances.indexOf(e))&&this.instances.splice(e,1)},M.prototype.countInstance=function(){return this.instances.length},M.prototype.uninstall=function(){var e;null===(e=null===(e=this.option)||void 0===e?void 0:e.destroy)||void 0===e||e.apply(this)},M.prototype.walk=function(e){var t=this;this.instances.forEach((function(n){var r=t.canUse(n);r&&e(n,r)}))},M.prototype.canUse=function(e){return!(!(e=this.getConfig(e))||"object"!=typeof e)||!!e},M.prototype.getConfig=function(e){return null===(e=e.config)||void 0===e?void 0:e[this.name]},M.prototype.exist=function(e){return-1===this.instances.indexOf(e)},M.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,null===(t=null===(t=this.option)||void 0===t?void 0:t.init)||void 0===t||t.call(this.option,this.getConfig(e)))},M.prototype.triggerOnNewAegis=function(e){var t;null===(t=null===(t=this.option)||void 0===t?void 0:t.onNewAegis)||void 0===t||t.call(this.option,e,this.getConfig(e))},M),U=new D({name:"aid",aid:"",init:function(e){try{var t=!0!==e&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch(e){}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),q=new D({name:"reportAssetSpeed"}),F=q=new D({name:"reportAssetSpeed",collectCur:0,ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;c()&&(this.collectSuccLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(e){this.$walk((function(t){t.speedLogPipeline(e)}))},collectSuccLog:function(e){function t(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];-1!==o.ASSETS_INITIATOR_TYPE.indexOf(r.initiatorType)&&-1===r.name.indexOf("cdn-go.cn/aegis/aegis-sdk")&&o.publish(o.generateLog(r,i))}}var n,r,o=this,i=e.config;"function"==typeof window.PerformanceObserver?(t(performance.getEntriesByType("resource")),(n=new window.PerformanceObserver((function(e){t(e.getEntries())}))).observe({entryTypes:["resource"]}),e.lifeCycle.on("destroy",(function(){0===q.countInstance()&&n.disconnect()}))):(r=setInterval((function(){var e=performance.getEntriesByType("resource"),n=e.slice(o.collectCur);o.collectCur=e.length,t(n)}),3e3),e.lifeCycle.on("destroy",(function(){0===q.countInstance()&&clearInterval(r)})))},collectFailLog:function(e){function t(e){var t,o;e&&(e=e.target||e.srcElement,t=(null==e?void 0:e.src)||(null==e?void 0:e.href),e=null==e?void 0:e.tagName,t&&"string"==typeof t&&("IMG"===e&&-1<window.location.href.indexOf(t)||(e="function"==typeof(null===(e=r.api)||void 0===e?void 0:e.resourceTypeHandler)?null===(o=r.api)||void 0===o?void 0:o.resourceTypeHandler(t):"",o=performance.getEntriesByType("resource").find((function(e){return e.name===t})),e={url:a(t),status:400,duration:Number(((null==o?void 0:o.duration)||0).toFixed(2)),method:"get",type:e||"static",isHttps:s(t),urlQuery:a(t,!0),domainLookup:0,connectTime:0},n.publish(e))))}var n=this,r=e.config;window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",(function(){0===q.countInstance()&&window.document.removeEventListener("error",t,!0)}))},generateLog:function(e,t){var n,r="function"==typeof(null===(n=t.api)||void 0===n?void 0:n.resourceTypeHandler)?null===(r=t.api)||void 0===r?void 0:r.resourceTypeHandler(e.name):"";return{url:a(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:r||"static",isHttps:s(e.name),urlQuery:a(e.name,!0),domainLookup:i(e.domainLookupEnd-e.domainLookupStart),connectTime:i(e.connectEnd-e.connectStart)}},destroy:function(){this.option.publish=function(){}}}),B=function(e,t){return(B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function M(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function W(e){var t,r,o=this;this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,hostUrl:"https://aegis.qq.com",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:""},this.isWhiteList=!1,this.lifeCycle=new n,this.bean={},this.normalLogPipeline=_([j(this,5),A,function(e,n){if("number"!=typeof t.config.random&&(console.warn("random必须为0~1的数字，如非数字，会使用1（不过滤）"),t.config.random=1),Math.random()<t.config.random)return n(e)},C((t=this).config),R(this.lifeCycle.emit,this.config),T(this),k(this),function(e,t){var n=JSON.parse(JSON.stringify(e));o.lifeCycle.emit("beforeReport",n);var r=o.config.beforeReport;if((e="function"==typeof r?e.filter((function(e){return!1!==r(e)})):e).length)return t(e)},N(this)]),this.eventPipeline=_([j(this,5),function(e){e=e.map((function(e,t){return{name:e.name,ext1:e.ext1||o.config.ext1||"",ext2:e.ext2||o.config.ext2||"",ext3:e.ext3||o.config.ext3||""}})),o.send({url:o.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(e)),type:f.EVENT},(function(){}),(function(e){"403 forbidden"===e&&o.destroy()}))}]),this.timeMap={},this.customTimePipeline=_([j(this,5),function(e){o.send({url:o.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:e})),type:f.CUSTOM},(function(){}),(function(e){"403 forbidden"===e&&o.destroy()}))}]),this.config=(r=this.config,void 0===(e=e.hostUrl)&&(e="https://aegis.qq.com"),r.url=r.url||e+"/collect",r.offlineUrl=r.offlineUrl||e+"/offline",r.whiteListUrl=r.whiteListUrl||e+"/collect/whitelist",r.pvUrl=r.pvUrl||e+"/collect/pv",r.eventUrl=r.eventUrl||e+"/collect/events",r.speedUrl=r.speedUrl||e+"/speed",r.customTimeUrl=r.customTimeUrl||e+"/speed/custom",r.performanceUrl=r.performanceUrl||e+"/speed/performance",r.webVitalsUrl=r.webVitalsUrl||e+"/speed/webvitals",r),W.instances.push(this)}var H=function(){return(H=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function G(e){if(X.find((function(t){return t.name===e.name})))throw new Error("name '"+e.name+"' is already in hackXHR option list");var t,n;X.push(e),!$&&window.XMLHttpRequest&&($=!0,t=window.XMLHttpRequest.prototype.send,n=window.XMLHttpRequest.prototype.open,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),!this.sendByAegis)for(var e=0;e<X.length;e++){var t=X[e];try{"function"==typeof t.open&&t.open(this)}catch(e){}}return n.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var e=0;e<X.length;e++){var n=X[e];try{"function"==typeof n.send&&n.send(this,arguments[0])}catch(e){}}return t.apply(this,arguments)})}function V(e){var t=X.findIndex((function(t){return t.name===e.name}));-1!==t&&X.splice(t,1)}var Q,J,$=!1,X=[],K=!1,z=[],Y=(new D({name:"reportApiSpeed"}),new D({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},overrideFetch:function(e){var n=this,r={name:this.name,then:function(r,o,i,c){var p,f,d,h={url:r.url,isHttps:s(r.url),method:(null==c?void 0:c.method)||"get",duration:o,type:"fetch",status:r.status};"fetch"!==(d="function"==typeof(null===(p=e.api)||void 0===p?void 0:p.resourceTypeHandler)?null===(f=e.api)||void 0===f?void 0:f.resourceTypeHandler(r.url):d)&&"static"!==d&&(f=r.headers?r.headers.get("content-type"):"",d=r.ok&&"string"==typeof f&&u(f)?"static":"fetch"),"fetch"===d?r.clone().text().then((function(t){var a,s,u,p,f="req url: "+i+" \n                                \nreq method: "+((null==c?void 0:c.method)||"get")+" \n                                \nreq param: "+g(null==c?void 0:c.body)+" \n                                \nres duration: "+o+" \n                                \nres status: "+r.status+" \n                                \nres data: "+t;n.publishNormalLog({msg:f,level:l.API_RESPONSE}),h.payload=new w(r,t),("function"==typeof(null===(a=e.api)||void 0===a?void 0:a.retCodeHandler)?(p=(u=e.api.retCodeHandler(t,r.url,r)).code,s=u.isErr,h.ret=p,s):(u=y(t,e.api),h.ret=u,t=(t=null===(s=e.api)||void 0===s?void 0:s.errCode)&&[].concat(t),p=(p=null===(s=e.api)||void 0===s?void 0:s.code)&&[].concat(p),t&&-1!==t.indexOf(u)||p&&-1===p.indexOf(u)||!t&&!p&&"0"!==u&&"unknown"!==u))&&n.publishNormalLog({msg:f,level:l.RET_ERROR})})):Object.assign(h,{type:"static",urlQuery:a(r.url,!0),domainLookup:t.number,connectTime:t.number}),n.publishSpeed(h)},catch:function(e,t,r,o){t={url:r,isHttps:s(r),method:(null==o?void 0:o.method)||"get",duration:t,type:"fetch",status:600},n.publishSpeed(t)}};this.hackFetchOptions=r,function(e){if(z.find((function(t){return t.name===e.name})))throw new Error("name '"+e.name+"' is already in hackFetch option list");var t;z.push(e),!K&&window.fetch&&(K=!0,t=window.fetch,window.fetch=function(e,n){void 0===n&&(n={});for(var r="string"==typeof e?e:e.url,o=0;o<z.length;o++){var i=z[o];try{"function"==typeof i.beforeFetch&&i.beforeFetch(r,n)}catch(e){}}var a=Date.now();return t(e,n).then((function(e){for(var t=0;t<z.length;t++){var o=z[t];try{"function"==typeof o.then&&o.then(e,Date.now()-a,r,n)}catch(e){}}return e})).catch((function(e){for(var t=0;t<z.length;t++){var o=z[t];try{"function"==typeof o.catch&&o.catch(e,Date.now()-a,r,n)}catch(e){}}throw e}))})}(this.hackFetchOptions)},getRequestType:function(e,t,n){var r,o="function"==typeof(null===(r=e.api)||void 0===r?void 0:r.resourceTypeHandler)?null===(o=e.api)||void 0===o?void 0:o.resourceTypeHandler(n):"";return"fetch"!==o&&"static"!==o&&(n=t.getResponseHeader("content-type"),o=400<=t.status||"string"!=typeof n||!u(n)?"fetch":"static"),o},overrideXhr:function(e){var n=this,r={name:this.name,send:function(r,o){var i=Date.now();r.addEventListener("loadend",(function(){var c,u,p,f=r.aegisUrl;if(f){var d=Date.now()-i,h={url:f,isHttps:s(f),status:r.status,method:r.aegisMethod||"get",type:"fetch",duration:d,payload:new b(r)};if("fetch"===n.getRequestType(e,r,f))try{var m,v,w,S,O,x="req url: "+f+" \n                                \nreq method: "+h.method+" \n                                \nreq param: "+g(o)+" \n                                \nres duration: "+d+" \n                                \nres status: "+h.status+" \n                                \nres data: "+g(r.response);n.publishNormalLog({msg:x,level:l.API_RESPONSE,trace:r.aegisTjgTrace}),("function"==typeof(null===(c=e.api)||void 0===c?void 0:c.retCodeHandler)?(O=(m=e.api.retCodeHandler(r.response,f,r)).code,v=m.isErr,h.ret=O,v):(w=y(r.response,e.api),h.ret=w,S=(S=null===(u=e.api)||void 0===u?void 0:u.errCode)&&[].concat(S),O=(O=null===(p=e.api)||void 0===p?void 0:p.code)&&[].concat(O),S&&-1!==S.indexOf(w)||O&&-1===O.indexOf(w)||!S&&!O&&"0"!==w&&"unknown"!==w))&&n.publishNormalLog({msg:x,level:l.RET_ERROR})}catch(e){h.ret="unknown"}else Object.assign(h,{type:"static",urlQuery:a(f,!0),domainLookup:t.number,connectTime:t.number});n.publishSpeed(h)}}))}};this.hackXHROptions=r,G(this.hackXHROptions)},publishSpeed:function(e){var t=this;e.url=a(e.url),this.$walk((function(n){var r=t.$getConfig(n);"fetch"===e.type&&r&&"function"==typeof r.urlHandler?n.speedLogPipeline(H(H({},e),{url:encodeURIComponent(r.urlHandler(e.url,e.payload))})):n.speedLogPipeline(e)}))},publishNormalLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},destroy:function(){var e,t;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&V(this.option.hackXHROptions),this.option.hackFetchOptions&&(e=this.option.hackFetchOptions,-1!==(t=z.findIndex((function(t){return t.name===e.name})))&&z.splice(t,1))}}));function Z(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}}function ee(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}}function te(e,t){function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)}function ne(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)}function re(e,t,n){var r;return function(){0<=t.value&&(n||we.has(t)||"hidden"===document.visibilityState)&&(t.delta=t.value-(r||0),!t.delta&&void 0!==r||(r=t.value,e(t)))}}function oe(){return"hidden"===document.visibilityState?0:1/0}function ie(){te((function(e){e=e.timeStamp,Se=e}),!0)}function ae(){return Se<0&&(Se=oe(),ie(),ne((function(){setTimeout((function(){Se=oe(),ie()}),0)}))),{get timeStamp(){return Se}}}function se(e,t){le||(le=t,fe=e,de=new Date,Ie(removeEventListener),Ee())}function ce(e){var t,n,r,o;function i(){se(n,r),o()}function a(){o()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,"pointerdown"==e.type?(n=t,r=e,o=function(){removeEventListener("pointerup",i,Oe),removeEventListener("pointercancel",a,Oe)},addEventListener("pointerup",i,Oe),addEventListener("pointercancel",a,Oe)):se(t,e))}function ue(e){if(e.payload){var t={};return Object.keys(e).forEach((function(n){"payload"!==n&&(t[n]=e[n])})),t}return e}(Pe=Q=Q||{})[Pe.unknown=100]="unknown",Pe[Pe.wifi=1]="wifi",Pe[Pe.net2g=2]="net2g",Pe[Pe.net3g=3]="net3g",Pe[Pe.net4g=4]="net4g",Pe[Pe.net5g=5]="net5g",Pe[Pe.net6g=6]="net6g",(Ne=J=J||{})[Ne.android=1]="android",Ne[Ne.ios=2]="ios",Ne[Ne.windows=3]="windows",Ne[Ne.macos=4]="macos",Ne[Ne.linux=5]="linux",Ne[Ne.other=100]="other";var pe,le,fe,de,he,ye=new D({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",Q.unknown),this.refreshNetworkTypeToBean(e)},getPlatform:function(){var e={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},t=Object.keys(e).find((function(t){return e[t].test(navigator.userAgent)}));return t?J[t]:J.other},refreshNetworkTypeToBean:function(e){var t=this,n=e.config;n&&("function"==typeof n.getNetworkType?n.getNetworkType:ge)((function(n){Q[n]||(n=Q.unknown),e.extendBean("netType",n),t.NetworkRefreshTimer=setTimeout((function(){t.refreshNetworkTypeToBean(e),clearTimeout(t.NetworkRefreshTimer)}),1e4)}))}}),ge=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((t=t=t||"unknown",0<=(t=String(t).toLowerCase()).indexOf("4g")?Q.net4g:0<=t.indexOf("wifi")?Q.wifi:0<=t.indexOf("5g")?Q.net5g:0<=t.indexOf("6g")?Q.net6g:0<=t.indexOf("3g")?Q.net3g:0<=t.indexOf("2g")?Q.net2g:Q.unknown))},me=new D({name:"onError"}),ve=me=new D({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(e){var t=this,n=window.onerror;function r(e){e=e&&p(e.reason),t.publishErrorLog({msg:"PROMISE_ERROR: "+e,level:l.PROMISE_ERROR})}function o(e){if(e=(null==e?void 0:e.target)||(null==e?void 0:e.srcElement)){var n=e.src||e.href;if(e=e.tagName,"string"==typeof n&&e){var r={msg:e+" load fail: "+n,level:l.INFO};switch(e.toLowerCase()){case"script":r.level=l.SCRIPT_ERROR;break;case"link":r.level=l.CSS_ERROR;break;case"img":if(-1<window.location.href.indexOf(n))return;r.level=l.IMAGE_ERROR;break;case"audio":case"video":r.level=l.MEDIA_ERROR;break;default:return}t.publishErrorLog(r)}}}window.onerror=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.publishErrorLog({msg:(p(e[0])||"")+" @ ("+(p(e[1])||"")+":"+(e[2]||0)+":"+(e[3]||0)+")\n          \n"+p(e[4]||""),level:l.ERROR}),null==n||n.call.apply(n,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}([window],e))},window.addEventListener("unhandledrejection",r),window.document.addEventListener("error",o,!0),e.lifeCycle.on("destroy",(function(){0===me.countInstance()&&(window.document.removeEventListener("unhandledrejection",r),window.document.removeEventListener("error",o,!0))}));var i=this;e={name:this.name,send:function(e,t){e.addEventListener("loadend",(function(){var n="";this.aegisTimeout?n="timeout":this.status<=0?n="failed":400<=this.status&&(n="error"),n&&i.publishErrorLog({msg:"AJAX_ERROR: request "+n+"\n                      \nres status: "+this.status+"\n                      \nres duration: "+(Date.now()-e.aegisXhrStartTime)+"\n                      \nreq url: "+this.aegisUrl+"\n                      \nreq method: "+this.aegisMethod+"\n                      \nreq body: "+g(t),level:l.AJAX_ERROR})})),e.addEventListener("timeout",(function(){e.aegisTimeout=!0}))}},this.hackXHROptions=e,G(this.hackXHROptions)},publishErrorLog:function(e){this.$walk((function(t){t.normalLogPipeline(e)}))},destroy:function(){this.option.publishErrorLog=function(){},this.option.hackXHROptions&&V(this.option.hackXHROptions)}}),be=(new D({name:"pagePerformance"}),new D({name:"pagePerformance",onNewAegis:function(e){var t=this;if(c())if(pe)this.publish(pe,e);else try{this.getFirstScreenTiming(e,(function(n){var r,o=performance.timing;o&&(r=o.loadEventStart-o.domInteractive,pe={dnsLookup:o.domainLookupEnd-o.domainLookupStart,tcp:o.connectEnd-o.connectStart,ssl:0===o.secureConnectionStart?0:o.requestStart-o.secureConnectionStart,ttfb:o.responseStart-o.requestStart,contentDownload:o.responseEnd-o.responseStart,domParse:o.domInteractive-o.domLoading,resourceDownload:r=r<0?1070:r,firstScreenTiming:Math.floor(n)},t.publish(pe,e))}))}catch(e){}},publish:function(e,t){var n,r=[];for(n in e)r.push(n+"="+e[n]);var o,i=this.$getConfig(t);i&&(o=-1===t.config.performanceUrl.indexOf("?")?"?":"&","function"==typeof i.urlHandler?t.send({url:t.config.performanceUrl+o+r.join("&")+"&from="+(encodeURIComponent(i.urlHandler())||window.location.href),beanFilter:["from"],type:f.PERFORMANCE}):t.send({url:t.config.performanceUrl+o+r.join("&"),type:f.PERFORMANCE}))},getFirstScreenTiming:function(e,t){var n=["script","style","link","br"],r=[],o=this,i={},a=new MutationObserver((function(e){var t={roots:[],rootsDomNum:[],time:performance.now()};e.forEach((function(e){e&&e.addedNodes&&e.addedNodes.forEach&&e.addedNodes.forEach((function(e){1===e.nodeType&&(e.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")||e.querySelector("[AEGIS-FIRST-SCREEN-TIMING]"))?(Object.prototype.hasOwnProperty.apply(i,[t.time])||(i[t.time]=[]),i[t.time].push(e)):1!==e.nodeType||-1!==n.indexOf(e.nodeName.toLocaleLowerCase())||o.isEleInArray(e,t.roots)||e.hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(t.roots.push(e),t.rootsDomNum.push(o.walkAndCount(e)||0))}))})),t.roots.length&&r.push(t)}));a.observe(document,{childList:!0,subtree:!0}),setTimeout((function(){a.disconnect();var n=0,s=0,c=Object.keys(i).filter((function(e){return i[+e].find((function(e){return o.isInFirstScreen(e)}))}));c.length?(s=Math.max.apply(null,c),e.firstScreenInfo={element:null===(c=i[s])||void 0===c?void 0:c[0],timing:s,markDoms:i}):r.forEach((function(t){for(var r=0;r<t.roots.length;r++)t.rootsDomNum[r]>n&&o.isInFirstScreen(t.roots[r])&&(n=t.rootsDomNum[r],s=t.time,e.firstScreenInfo={element:t.roots[r],timing:s})})),null==t||t(s)}),3e3)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(-1!==t.indexOf(e)||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(e){if(!e||"function"!=typeof e.getBoundingClientRect)return!1;var t=e.getBoundingClientRect(),n=window.innerHeight;return e=window.innerWidth,0<=t.left&&t.left<e&&0<=t.top&&t.top<n&&0<t.width&&0<t.height},walkAndCount:function(e){var t=0;if(e&&1===e.nodeType){t+=1;var n=e.children;if(null!=n&&n.length)for(var r=0;r<n.length;r++)t+=this.walkAndCount(n[r])}return t}})),we=new("function"==typeof WeakSet?WeakSet:Set),Se=-1,Oe={passive:!0,capture:!0},xe=new Date,Ee=function(){var e;0<=fe&&fe<de-xe&&(e={entryType:"first-input",name:le.type,target:le.target,cancelable:le.cancelable,startTime:le.timeStamp,processingStart:le.timeStamp+fe},he.forEach((function(t){t(e)})),he=[])},Ie=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ce,Oe)}))},Pe=(new D({name:"webVitals"}),new D({name:"webVitals",onNewAegis:function(e){if(c())try{v=this.publish.bind(this,e),w=ae(),S=Z("FCP"),O=performance.getEntriesByName("first-contentful-paint")[0],x=O?null:ee("paint",P),(O||x)&&(b=re(v,S,void 0),O&&P(O),ne((function(e){S=Z("FCP"),b=re(v,S,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){S.value=performance.now()-e.timeStamp,we.add(S),b()}))}))}))),f=this.publish.bind(this,e),y=ae(),g=Z("LCP"),(m=ee("largest-contentful-paint",I))&&(d=re(f,g,void 0),h=function(){we.has(g)||(m.takeRecords().map(I),m.disconnect(),we.add(g),d())},["keydown","click"].forEach((function(e){addEventListener(e,h,{once:!0,capture:!0})})),te(h,!0),ne((function(e){g=Z("LCP"),d=re(f,g,void 0),requestAnimationFrame((function(){requestAnimationFrame((function(){g.value=performance.now()-e.timeStamp,we.add(g),d()}))}))}))),a=this.publish.bind(this,e),s=ae(),u=Z("FID"),p=ee("first-input",E),l=re(a,u,void 0),p&&te((function(){p.takeRecords().map(E),p.disconnect()}),!0),p&&ne((function(){u=Z("FID"),l=re(a,u,void 0),he=[],fe=-1,le=null,Ie(addEventListener),he.push(E),Ee()})),n=this.publish.bind(this,e),o=Z("CLS",0),(i=ee("layout-shift",t))&&(r=re(n,o,void 0),te((function(){i.takeRecords().map(t),r()})),ne((function(){o=Z("CLS",0),r=re(n,o,void 0)})))}catch(e){}function t(e){e.hadRecentInput||(o.value+=e.value,o.entries.push(e),r())}var n,r,o,i,a,s,u,p,l,f,d,h,y,g,m,v,b,w,S,O,x;function E(e){e.startTime<s.timeStamp&&(u.value=e.processingStart-e.startTime,u.entries.push(e),we.add(u),l())}function I(e){var t=e.startTime;t<y.timeStamp&&(g.value=t,g.entries.push(e)),d()}function P(e){"first-contentful-paint"===e.name&&(x&&x.disconnect(),e.startTime<w.timeStamp&&(S.value=e.startTime,S.entries.push(e),we.add(S),b()))}},publish:function(e,t){var n,r=t.name,o=t.value,i={FCP:-1,LCP:-1,FID:-1,CLS:-1},a=[];for(n in i)a.push(n+"="+(n===r?o:i[n]));var s=-1===e.config.performanceUrl.indexOf("?")?"?":"&";setTimeout((function(){e.send({url:e.config.webVitalsUrl+s+a.join("&"),type:f.VITALS})}),0)},destroy:function(){this.option.publish=function(){}}})),Re=function(e,t){var n,r={fetch:[],static:[]},o=new FormData;return Array.isArray(e)?e.forEach((function(e){var t=ue(e);r[e.type].push(t)})):(n=ue(e),r[e.type].push(n)),o.append("payload",JSON.stringify(H({duration:r},t))),o};Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if(null!=(r=arguments[n]))for(var r=Object(r),o=Object.keys(Object(r)),i=0,a=o.length;i<a;i++){var s=o[i],c=Object.getOwnPropertyDescriptor(r,s);null!=c&&c.enumerable&&(t[s]=r[s])}return t}}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=t[o];if(e.call(r,i,o,t))return i;o+=1}}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}});var je,Ae,ke=0,Te=(B(Ae=_e,Ne=je=L),Ae.prototype=null===Ne?Object.create(Ne):(Le.prototype=Ne.prototype,new Le),_e.prototype.getBean=function(e){var t=this;return void 0===e&&(e=[]),""+Object.getOwnPropertyNames(this.bean).filter((function(t){return-1===e.indexOf(t)})).map((function(e){return e+"="+t.bean[e]})).join("&")},_e.prototype.send=function(e,t,n){var r=this;if(e&&"string"==typeof e.url&&""!==e.url&&this.bean.id)if(this.requesting)this.requestQueue.push({options:e,success:t,fail:n});else{this.requesting=!0;var o=e.url;!1!==e.addBean&&(o=o+(-1===o.indexOf("?")?"?":"&")+this.getBean(e.beanFilter)),e.url=o;var i=e.method||"get";if(!(e=(o=this.config.onBeforeRequest)?o(e,this):e))return console.log("Sending request blocked");if(!e.url)return console.warn("Please handle the parameters reasonably, options.url is necessary");var a=new XMLHttpRequest;a.sendByAegis=!0,a.addEventListener("readystatechange",(function(){var e;4===a.readyState&&(r.requesting=!1,r.requestQueue&&((e=r.requestQueue.shift())&&r.send(e.options,e.success,e.fail),400<=a.status?null==n||n(a.response):null==t||t(a.response)))})),"get"===i.toLocaleLowerCase()?(a.open("get",function(e,t){if("string"!=typeof e)return"";if("object"==typeof t&&t){var n=Object.getOwnPropertyNames(t).map((function(e){var n=t[e];return e+"="+("string"==typeof n?encodeURIComponent(n):encodeURIComponent(JSON.stringify(n)))})).join("&").replace(/eval/gi,"evaI");return e+(-1===e.indexOf("?")?"?":"&")+n}return e}(e.url,e.data)),a.send()):(a.open("post",e.url),e.contentType&&a.setRequestHeader("Content-Type",e.contentType),"string"==typeof e.data&&(e.data=e.data.replace(/eval/gi,"evaI")),a.send(e.data))}},_e.useAsyncPlugin=function(e,t){var n,r=void 0===(n=(t=void 0===t?{}:t).exportsConstructor)?"aegis-plugin-"+ke:n,o=void 0===(n=t.onAegisInit)?function(){}:n,i=void 0===(t=t.onAegisInitAndPluginLoaded)?function(){}:t;if(ke+=1,"string"!=typeof e)throw new TypeError("useAsyncPlugin first param must be string");if("function"!=typeof o||"function"!=typeof i)throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new D({name:"asyncPlugin",onNewAegis:function(t){try{o(t),_e.asyncPlugin[e]?i(t,window[_e.asyncPlugin[e]]):(n=e,a=r,s=function(n){n||(_e.asyncPlugin[e]=r,n=window[r],i(t,n))},c=document.createElement("script"),u=document.head,"function"==typeof a&&(s=a,a=""),c.src=n,c.setAttribute("name",a),c.name=a,c.setAttribute("crossorigin","anonymous"),c.crossorigin="anonymous",c.defer=!0,c.hasLoaded=!1,c.onreadystatechange=function(){c.hasLoaded||c.readyState&&"loaded"!==c.readyState&&"complete"!==c.readyState||(c.hasLoaded=!0,"function"==typeof s&&s(!1),setTimeout((function(){u.contains(c)&&u.removeChild(c)})))},c.onload=c.onreadystatechange,c.onerror=function(){"function"==typeof s&&s(!0),setTimeout((function(){u.contains(c)&&u.removeChild(c)}))},"complete"===document.readyState?u.appendChild(c):window.addEventListener("load",(function(){u.appendChild(c)})))}catch(n){console.log("error on below is caused by "+e+" "),console.error(n)}var n,a,s,c,u}}))},_e.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=void 0===e?{}:e,t=void 0===t?{}:t)},_e.__version__="1.34.35",_e.sessionID="session-"+Date.now(),_e.asyncPlugin={},_e.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.1/flog.core.min.js",shadowLog:""},_e),Ce=new D({name:"offlineLog"}),Ne=(L=Ce=new D({name:"offlineLog",onNewAegis:function(t){var n=Te.urls.flog,r=t.config,o=[],i=null,a=null,s=function(e){a=e},c=function(e){o=o.concat(e)},u=function(e,t){i={conds:e=void 0===e?{}:e,params:t=void 0===t?{}:t}};Te.useAsyncPlugin(n,{exportsConstructor:"Flog",onAegisInit:function(e){e.lifeCycle.on("beforeWrite",c),e.lifeCycle.on("uploadLogs",u),e.lifeCycle.on("onConfigChange",s)},onAegisInitAndPluginLoaded:function(t,n){var d,h,y,g,m,v=void 0===(O=r.dbConfig)?{}:O,b=void 0===(x=r.url)?Te.urls.aegisCollect:x,w=r.offlineLogExp,S=void 0===w?3:w,O=r.id,x=r.uin;null===(w=t.lifeCycle)||void 0===w||w.remove("beforeWrite",c),null===(w=t.lifeCycle)||void 0===w||w.remove("uploadLogs",u),null===(w=t.lifeCycle)||void 0===w||w.remove("onConfigChange",s),v=Object.assign({lookupUrl:b+"/offlineAuto?id="+O,preservedDay:S,id:O,uin:x,aid:(null===(x=t.bean)||void 0===x?void 0:x.aid)||""},v,{sessionId:Te.sessionID});try{var E=new n(v);o.forEach((function(e){E.add(H(H({},e),{level:e.level===l.INFO_ALL?l.INFO:e.level}))})),null===(d=t.lifeCycle)||void 0===d||d.on("beforeWrite",(function(e){(e=void 0===e?[]:e).forEach((function(e){E.add(H(H({},e),{level:e.level===l.INFO_ALL?l.INFO:e.level}))}))})),null===(h=t.lifeCycle)||void 0===h||h.on("uploadLogs",(function(e,n){var o;void 0===e&&(e={}),void 0===n&&(n={}),E.uploadLogs(Object.assign({id:r.id,uin:r.uin,aid:null===(o=t.bean)||void 0===o?void 0:o.aid},e),n)})),null===(y=t.lifeCycle)||void 0===y||y.on("onConfigChange",(function(e){E.setConfig(e)})),null===(g=t.lifeCycle)||void 0===g||g.on("destroy",(function(){0===Ce.countInstance()&&(o.length=0,"function"==typeof((i=null)==E?void 0:E.destroy)&&E.destroy())})),E.on("PERREVENT",(function(n){t.send({type:f.OFFLINE,data:e({msg:p(n),level:l.INFO}),contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:r.url+"?id=893&sessionId="+Te.sessionID+"&uin="+r.uin+"&from="+r.id+"&count=1&version=1.34.35"})})),a&&(E.setConfig(a),a=null),i&&(null===(m=t.lifeCycle)||void 0===m||m.emit("uploadLogs",i.conds,i.params),i=null),t.flog=E}catch(e){console.log(e)}}})}}),new D({name:"spa"}),new D({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState;var e=(null===(e=location.href)||void 0===e?void 0:e.split("?"))[0];this.$fireUrl=e,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(e){var t=history[e];return"function"==typeof t&&!history.__hasWrittenByTamSpa&&(Object.defineProperty(history,"__hasWrittenByTamSpa",{value:!0,enumerable:!1}),function(){var n=t.apply(this,arguments),r=null;return"function"==typeof Event?r=new Event(e):(r=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(r),n})},sendPv:function(){var e=this;setTimeout((function(){var t=location.href,n=(null===(n=location.href)||void 0===n?void 0:n.split("?"))[0];n&&n!==e.$fireUrl&&(e.$walk((function(e){e.send({url:e.config.pvUrl+"?from="+encodeURIComponent(t),beanFilter:["from"],type:f.WHITE_LIST})})),e.$fireUrl=n)}),0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}}));function _e(e){var t,n,r,o,i,a=je.call(this,e)||this;a.requestQueue=[],a.requesting=!1,a.speedLogPipeline=_([(o=a.config,i={},function(e,t){var n;o.speedSample?Array.isArray(e)?(n=e.filter((function(e){var t=!i[e.url]||-1===i[e.url].indexOf(e.status);return i[e.url]=(i[e.url]||[]).concat(e.status),t}))).length&&t(n):i[e.url]&&-1!==i[e.url].indexOf(e.status)||(i[e.url]=(i[e.url]||[]).concat(e.status),t(e)):t(e)}),j(a),(r=a,function(e,t){ge((function(n){r.extendBean("netType",n),t(e)}))}),function(e,t){a.lifeCycle.emit("beforeReportSpeed",e);var n=a.config.beforeReportSpeed;if((e="function"==typeof n?e.filter((function(e){var t=!1!==n(e);return"fetch"===e.type&&void 0===e.ret&&e.payload&&(e.ret=y(e.payload.data.response,a.config.api)),t})):e).length)return t(e)},function(e){a.send({type:f.SPEED,url:""+a.config.speedUrl,method:"post",data:Re(e,a.bean)})}]),e.asyncPlugin=!0;try{"undefined"!=typeof document&&(e.uin=e.uin||(null!==(t=document.cookie.match(/\buin=\D+(\d*)/))&&void 0!==t?t:[])[1]||(null!==(n=document.cookie.match(/\bilive_uin=\D*(\d+)/))&&void 0!==n?n:[])[1]||""),a.init(e),a.extendBean("sessionId",_e.sessionID),a.extendBean("from",encodeURIComponent(e.pageUrl||location.href)),"undefined"!=typeof document&&a.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&a.extendBean("ext1",e.ext1),e.ext2&&a.extendBean("ext2",e.ext2),e.ext3&&a.extendBean("ext3",e.ext3)}catch(e){console.warn(e),console.log("%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.\nIt is recommended that you contact us for feedback and thank you for your support.","color: red"),a.sendSDKError(e)}return a}function Le(){this.constructor=Ae}return new D({name:"ie"}),Te.use(ve),Te.use(Y),Te.use(F),Te.use(be),Te.use(Pe),Te.use(U),Te.use(ye),Te.use(L),Te.use(Ne),Te},"object"==typeof e.exports?e.exports=r():"function"==typeof define&&define.amd?define(r):(n="undefined"!=typeof globalThis?globalThis:n||self).Aegis=r()}))}();